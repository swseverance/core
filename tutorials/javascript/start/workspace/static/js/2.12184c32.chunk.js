/*! For license information please see 2.12184c32.chunk.js.LICENSE.txt */
(this["webpackJsonpdev-workspaces-frame"]=this["webpackJsonpdev-workspaces-frame"]||[]).push([[2],[function(e,t,n){e.exports=n(28)},function(e,t,n){"use strict";e.exports=n(24)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(11);var i=n(6);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(6);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(11);function i(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));n(4);var r=n(0),i=n.n(r),o=n(5),a=n(1),s=n.n(a),u=n(12);function c(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}var l=Object(a.createContext)(null),d=Object(a.memo)((function(e){var t=e.children,n=e.fallback,r=void 0===n?null:n,u=e.config,d=function(e,t){var n=Object(a.useState)(null),r=Object(o.a)(n,2),s=r[0],u=r[1];return Object(a.useEffect)((function(){c(void 0,void 0,void 0,i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t(e);case 3:r=n.sent,u(r),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))}),[]),s}(void 0===u?{}:u,e.glueFactory||window.GlueWeb||window.Glue);return d?s.a.createElement(l.Provider,{value:d},t):s.a.createElement(s.a.Fragment,null,r)}));d.propTypes={children:u.node,config:u.object,glueFactory:u.func,fallback:u.node},d.displayName="GlueProvider"},function(e,t,n){"use strict";e.exports=n(23)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(25)},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t,n){e.exports=n(29)()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(6);function i(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(r.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var d=0;d<s.length;d++)o.call(n,s[d])&&(u[s[d]]=n[s[d]])}}return u}},,function(e,t,n){"use strict";n.r(t),function(e){var n=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),r="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,i="undefined"!==typeof e&&e.Math===Math?e:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),o="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var a=["top","right","bottom","left","width","height","size","weight"],s="undefined"!==typeof MutationObserver,u=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function a(){n&&(n=!1,e()),r&&u()}function s(){o(a)}function u(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);i=e}return u}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;a.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),c=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},l=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||i},d=v(0,0,0,0);function f(e){return parseFloat(e)||0}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+f(e["border-"+n+"-width"])}),0)}function h(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return d;var r=l(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=f(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,s=f(r.width),u=f(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=p(r,"left","right")+o),Math.round(u+a)!==n&&(u-=p(r,"top","bottom")+a)),!function(e){return e===l(e).document.documentElement}(e)){var c=Math.round(s+o)-t,h=Math.round(u+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(h)&&(u-=h)}return v(i.left,i.top,s,u)}var y="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof l(e).SVGGraphicsElement}:function(e){return e instanceof l(e).SVGElement&&"function"===typeof e.getBBox};function g(e){return r?y(e)?function(e){var t=e.getBBox();return v(0,0,t.width,t.height)}(e):h(e):d}function v(e,t,n,r){return{x:e,y:t,width:n,height:r}}var m=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=v(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=g(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),w=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return c(a,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),a}(t);c(this,{target:e,contentRect:n})},b=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof l(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new m(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof l(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new w(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),_="undefined"!==typeof WeakMap?new WeakMap:new n,k=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),r=new b(t,n,this);_.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){k.prototype[e]=function(){var t;return(t=_.get(this))[e].apply(t,arguments)}}));var S="undefined"!==typeof i.ResizeObserver?i.ResizeObserver:k;t.default=S}.call(this,n(9))},function(e,t,n){"use strict";(function(e){var r=n(34),i=n(35),o=n(36);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t);return e}(e,t,n,r):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?s(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=s(e,t<0?0:0|p(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function h(e,t){if(u.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return x(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return E(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"===typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var d=!0,f=0;f<u;f++)if(c(e,o+f)!==c(t,f)){d=!1;break}if(d)return o}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function b(e,t,n,r){return H(B(t,e.length-n),e,n,r)}function _(e,t,n,r){return H(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function k(e,t,n,r){return _(e,t,n,r)}function S(e,t,n,r){return H(z(t),e,n,r)}function C(e,t,n,r){return H(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function I(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function x(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,c=e[i],l=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(l=c);break;case 2:128===(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],a=e[i+2],128===(192&o)&&128===(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=A));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?s(e,t):void 0!==n?"string"===typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=h,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?x(this,0,e):y.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(r,i),l=e.slice(t,n),d=0;d<s;++d)if(c[d]!==l[d]){o=c[d],a=l[d];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function P(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=U(e[o]);return i}function M(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function j(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function N(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,o){return o||N(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function W(e,t,n,r,o){return o||N(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=u.isBuffer(e)?e:B(new u(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(D,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function H(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(9))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,d=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},,function(e,t,n){(function(t,n,r){var i;i=function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};function i(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function c(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function d(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function f(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function p(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var h=1,y=2,g=3,v=4;function m(e){return e.type===g?"timestamp":e.type===y?"number":e.type===h?"string":e.type===v?"object":"unknown"}function w(e){return e.constructor===Date?"timestamp":"number"===typeof e?"number":"string"===typeof e?"string":"object"===typeof e?"object":"string"}function b(e){var t={},n=m(e);if("object"===n){var r=Object.keys(e.value).reduce((function(t,n){var r=w(e.value[n]);if("object"===r){var i=_(e.value[n]);t[n]={type:"object",description:"",context:{},composite:i}}else t[n]={type:r,description:"",context:{}};return t}),{});t.composite=r}return t.name=k(e.path.join("/")+"/"+e.name),t.type=n,t.description=e.description,t.context={},t}function _(e){return Object.keys(e).reduce((function(t,n){var r=w(e[n]);return t[n]="object"===r?{type:"object",description:"",context:{},composite:_(e[n])}:{type:r,description:"",context:{}},t}),{})}function k(e){return"undefined"!==typeof e&&e.length>0&&"/"!==e[0]?"/"+e:e}function S(e){return"timestamp"===m(e)?Date.now():C(e.value)}function C(e){return"object"!==typeof e?e:Object.keys(e).reduce((function(t,n){var r=e[n];return"object"===typeof r&&r.constructor!==Date?t[n]=C(r):r.constructor===Date?t[n]=new Date(r).getTime():r.constructor===Boolean?t[n]=r.toString():t[n]=r,t}),{})}function I(e){return e.reduce((function(e,t){return e.concat(Array.isArray(t)?I(t):t)}),[])}function x(e){var t=I(e.root.getAggregateState()),n=t.sort((function(e,t){return e.state?t.state?t.state-e.state:-1:1}))[0];return{description:function(e){var t="";return e.forEach((function(e,n,r){var i=e.path.join(".");n===r.length-1?t+=i+"."+e.name+": "+e.description:t+=i+"."+e.name+": "+e.description+","})),t.length>100?t.slice(0,100)+"...":t}(t),value:n.state}}var A=function(e,t,n){if(null===e||"object"!==typeof e)throw new Error("Missing definition");if(null===t||"object"!==typeof t)throw new Error("Missing parent");if(null===n||"object"!==typeof n)throw new Error("Missing transport")},T=function(){function e(e,t,n,r,i){this.definition=e,this.system=t,this.transport=n,this.value=r,this.type=i,this.path=[],A(e,t,n),this.path=t.path.slice(0),this.path.push(t.name),this.name=e.name,this.description=e.description,n.createMetric(this)}return Object.defineProperty(e.prototype,"repo",{get:function(){var e;return null===(e=this.system)||void 0===e?void 0:e.repo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.system.path+"/"+name},enumerable:!0,configurable:!0}),e.prototype.update=function(e){return this.value=e,this.transport.updateMetric(this)},e}(),E=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i,y)||this}return c(t,e),t.prototype.incrementBy=function(e){this.update(this.value+e)},t.prototype.increment=function(){this.incrementBy(1)},t.prototype.decrement=function(){this.incrementBy(-1)},t.prototype.decrementBy=function(e){this.incrementBy(-1*e)},t}(T),P=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i,v)||this}return c(t,e),t.prototype.update=function(e){return this.mergeValues(e),this.transport.updateMetric(this)},t.prototype.mergeValues=function(e){var t=this;return Object.keys(this.value).forEach((function(n){"undefined"!==typeof e[n]&&(t.value[n]=e[n])}))},t}(T),M=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i,h)||this}return c(t,e),t}(T),O=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i,g)||this}return c(t,e),t.prototype.now=function(){this.update(new Date)},t}(T);function R(e,t,n,r,i){if(!t)throw new Error("Repository is required");if(!n)throw new Error("Transport is required");var o,a,s=n,u=e,c=i||"",l=t,d=r,f=function e(t){if(!t||!t.parent)return[];var n=e(t.parent);return n.push(t.name),n}(r),p={},m=(a="/",((o=f)&&o.length>0?o.join(a):"")+e),w=t.root,b=[],_=[];function k(e,t,n,r){var i={name:""};i="string"===typeof e?{name:e}:e;var o=_.filter((function(e){return e.name===i.name}));if(o.length>0){var a=o[0];if(a.type!==t)throw new Error("A metric named "+i.name+" is already defined with different type.");return"undefined"!==typeof n&&a.update(n).catch((function(){})),a}var s=r(i);return _.push(s),s}var S={get name(){return u},get description(){return c},get repo(){return l},get parent(){return d},path:f,id:m,root:w,get subSystems(){return b},get metrics(){return _},subSystem:function(e,t){if(!e||0===e.length)throw new Error("name is required");var n=b.filter((function(t){return t.name===e}));if(n.length>0)return n[0];var r=R(e,l,s,S,t);return b.push(r),r},getState:function(){return p},setState:function(e,t){p={state:e,description:t},s.updateSystem(S,p)},stringMetric:function(e,t){return k(e,h,t,(function(e){return new M(e,S,s,t)}))},timestampMetric:function(e,t){return k(e,g,t,(function(e){return new O(e,S,s,t)}))},objectMetric:function(e,t){return k(e,v,t,(function(e){return new P(e,S,s,t)}))},numberMetric:function(e,t){return k(e,y,t,(function(e){return new E(e,S,s,t)}))},getAggregateState:function(){var e=[];return Object.keys(p).length>0&&e.push({name:u,path:f,state:p.state,description:p.description}),b.forEach((function(t){var n=t.getAggregateState();n.length>0&&e.push.apply(e,n)})),e}};return s.createSystem(S),S}var j=function(){function e(e,t){t.init(this),this.root=R("",this,t),this.addSystemMetrics(this.root,e.clickStream||void 0===e.clickStream)}return e.prototype.addSystemMetrics=function(e,t){if("undefined"!==typeof navigator&&e.stringMetric("UserAgent",navigator.userAgent),t&&"undefined"!==typeof document){var n=e.subSystem("ClickStream"),r=function(e){if(e.target){var t=e.target;n.objectMetric("LastBrowserEvent",{type:"click",timestamp:new Date,target:{className:e.target?t.className:"",id:t.id,type:"<"+t.tagName.toLowerCase()+">",href:t.href||""}})}};n.objectMetric("Page",{title:document.title,page:window.location.href}),document.addEventListener?document.addEventListener("click",r):document.attachEvent("onclick",r)}e.stringMetric("StartTime",(new Date).toString());var i=e.stringMetric("StartURL",""),o=e.stringMetric("AppName","");if("undefined"!==typeof window){if("undefined"!==typeof window.location){var a=window.location.href;i.update(a)}"undefined"!==typeof window.glue42gd&&o.update(window.glue42gd.appName)}},e}(),L=function(){function e(){}return e.prototype.init=function(e){},e.prototype.createSystem=function(e){return Promise.resolve()},e.prototype.updateSystem=function(e,t){return Promise.resolve()},e.prototype.createMetric=function(e){return Promise.resolve()},e.prototype.updateMetric=function(e){return Promise.resolve()},e}(),N=function(){function e(e,t,n){this.api=e,this.lastCount=0,this.initialPublishTimeout=1e4,this.publishInterval=6e4,this.initialPublishTimeout=null!==t&&void 0!==t?t:this.initialPublishTimeout,this.publishInterval=null!==n&&void 0!==n?n:this.publishInterval,this.scheduleCollection(),this.system=this.api.subSystem("performance","Performance data published by the web application")}return e.prototype.scheduleCollection=function(){var e=this;setTimeout((function(){e.collect(),setInterval((function(){e.collect()}),e.publishInterval)}),this.initialPublishTimeout)},e.prototype.collect=function(){try{this.collectMemory(),this.collectEntries()}catch(e){}},e.prototype.collectMemory=function(){var e=window.performance.memory;this.system.stringMetric("memory",JSON.stringify({totalJSHeapSize:e.totalJSHeapSize,usedJSHeapSize:e.usedJSHeapSize}))},e.prototype.collectEntries=function(){var e=window.performance.getEntries();e.length<=this.lastCount||(this.lastCount=e.length,this.system.stringMetric("entries",JSON.stringify(e)))},e}(),F=function(e){var t;t=e.connection&&"object"===typeof e.connection?function(e,t){var n,r,i=this;if(!e||"object"!==typeof e)throw new Error("Connection is required parameter");var o=function(e){a(e.root)},a=function e(t){s(t),t.metrics.forEach((function(e){u(e)})),t.subSystems.forEach((function(t){e(t)}))},s=function(e){return d(i,void 0,void 0,(function(){var t,i;return f(this,(function(o){switch(o.label){case 0:return void 0===e.parent?[2]:[4,n];case 1:return o.sent(),t={name:k(e.path.join("/")+"/"+e.name+"/State"),type:"object",composite:{Description:{type:"string",description:""},Value:{type:"number",description:""}},description:"System state",context:{}},i={type:"define",metrics:[t]},r.send(i),[2]}}))}))},u=function(e){return d(i,void 0,void 0,(function(){var t,i,o;return f(this,(function(a){switch(a.label){case 0:return t=p(e),[4,n];case 1:return a.sent(),i=b(t),o={type:"define",metrics:[i]},r.send(o),"undefined"!==typeof t.value&&c(t),[2]}}))}))},c=function(e){if(h()){var t=S(e),n={type:"publish",values:[{name:k(e.path.join("/")+"/"+e.name),value:t,timestamp:Date.now()}]};return r.sendFireAndForget(n)}return Promise.resolve()},p=function(e){var t=l({},e);return"object"===typeof e.value&&null!==e.value&&(t.value=l({},e.value)),t},h=function(){var e;try{return(null!==(e=t.canUpdateMetric)&&void 0!==e?e:function(){return!0})()}catch(n){return!0}};return{init:function(i){var a;n=new Promise((function(e){a=e})),(r=e.domain("metrics")).onJoined((function(e){!e&&a&&(a(),a=void 0);var t={type:"define",metrics:[{name:"/State",type:"object",composite:{Description:{type:"string",description:""},Value:{type:"number",description:""}},description:"System state",context:{}}]};r.send(t),e&&o(i)})),r.join({system:t.system,service:t.service,instance:t.instance})},createSystem:s,updateSystem:function(t,o){return d(i,void 0,void 0,(function(){var i,a,s;return f(this,(function(u){switch(u.label){case 0:return[4,n];case 1:return u.sent(),i={type:"publish",values:[{name:k(t.path.join("/")+"/"+t.name+"/State"),value:{Description:o.description,Value:o.state},timestamp:Date.now()}]},r.send(i),a=x(t),s={type:"publish",peer_id:e.peerId,values:[{name:"/State",value:{Description:a.description,Value:a.value},timestamp:Date.now()}]},r.send(s),[2]}}))}))},createMetric:u,updateMetric:function(e){return d(i,void 0,void 0,(function(){var t;return f(this,(function(r){switch(r.label){case 0:return t=p(e),[4,n];case 1:return r.sent(),c(t),[2]}}))}))}}}(e.connection,e):new L;var n=new j(e,t).root;e.disableAutoAppSystem||(n=n.subSystem("App"));var r=function(e){var t,n=e.subSystem("reporting"),r={name:"features"},i=function(e,i,o){if("undefined"===typeof e||""===e)throw new Error("name is mandatory");if("undefined"===typeof i||""===i)throw new Error("action is mandatory");if("undefined"===typeof o||""===o)throw new Error("payload is mandatory");t?t.update({name:e,action:i,payload:o}):t=n.objectMetric(r,{name:e,action:i,payload:o})};return e.featureMetric=i,e}(n);return function(e,t){var n,r;if("undefined"!==typeof window){var i=null===(r=null===(n=null===window||void 0===window?void 0:window.glue42gd)||void 0===n?void 0:n.metrics)||void 0===r?void 0:r.pagePerformanceMetrics;i&&(t=i),(null===t||void 0===t?void 0:t.enabled)&&new N(e,t.initialPublishTimeout,t.publishInterval)}}(r,e.pagePerformanceMetrics),r};function W(e){if(e&&e.errorHandling&&"function"!==typeof e.errorHandling&&"log"!==e.errorHandling&&"silent"!==e.errorHandling&&"throw"!==e.errorHandling)throw new Error('Invalid options passed to createRegistry. Prop errorHandling should be ["log" | "silent" | "throw" | (err) => void], but '+typeof e.errorHandling+" was passed");var t=e&&"function"===typeof e.errorHandling&&e.errorHandling,n={};function r(n,r){var i=n instanceof Error?n:new Error(n);if(t)t(i);else{var o='[ERROR] callback-registry: User callback for key "'+r+'" failed: '+i.stack;if(e)switch(e.errorHandling){case"log":return console.error(o);case"silent":return;case"throw":throw new Error(o)}console.error(o)}}return{add:function(e,t,i){var o=n[e];return o||(o=[],n[e]=o),o.push(t),i&&setTimeout((function(){i.forEach((function(i){var o;if(null===(o=n[e])||void 0===o?void 0:o.includes(t))try{Array.isArray(i)?t.apply(void 0,i):t.apply(void 0,[i])}catch(a){r(a,e)}}))}),0),function(){var r=n[e];r&&(0===(r=r.reduce((function(e,n,r){return n===t&&e.length===r||e.push(n),e}),[])).length?delete n[e]:n[e]=r)}},execute:function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=n[e];if(!o||0===o.length)return[];var a=[];return o.forEach((function(n){try{var i=n.apply(void 0,t);a.push(i)}catch(o){a.push(void 0),r(o,e)}})),a},clear:function(){n={}},clearKey:function(e){n[e]&&delete n[e]}}}W.default=W;var D=W,U=function(){function e(e,t){var n=this;this.registry=D(),this.gw=e.facade,this.gw.connect((function(e,t){n.messageHandler(t)})).then((function(e){n.client=e}))}return Object.defineProperty(e.prototype,"isObjectBasedTransport",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.sendObject=function(e){return this.client?(this.client.send(e),Promise.resolve(void 0)):Promise.reject("not connected")},e.prototype.send=function(e){return Promise.reject("not supported")},e.prototype.onMessage=function(e){return this.registry.add("onMessage",e)},e.prototype.onConnectedChanged=function(e){e(!0)},e.prototype.close=function(){return Promise.resolve()},e.prototype.open=function(){return Promise.resolve()},e.prototype.name=function(){return"in-memory"},e.prototype.reconnect=function(){return Promise.resolve()},e.prototype.messageHandler=function(e){this.registry.execute("onMessage",e)},e}(),B=function(){function e(e,t){var n=this;this.logger=t,this.registry=D(),this.worker=new SharedWorker(e),this.worker.port.onmessage=function(e){n.messageHandler(e.data)}}return Object.defineProperty(e.prototype,"isObjectBasedTransport",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.sendObject=function(e){return this.worker.port.postMessage(e),Promise.resolve()},e.prototype.send=function(e){return Promise.reject("not supported")},e.prototype.onMessage=function(e){return this.registry.add("onMessage",e)},e.prototype.onConnectedChanged=function(e){e(!0)},e.prototype.close=function(){return Promise.resolve()},e.prototype.open=function(){return Promise.resolve()},e.prototype.name=function(){return"shared-worker"},e.prototype.reconnect=function(){return Promise.resolve()},e.prototype.messageHandler=function(e){this.registry.execute("onMessage",e)},e}(),z=function(){function e(){}return e.getGDMajorVersion=function(){if("undefined"!==typeof window&&window.glueDesktop&&window.glueDesktop.version){var e=Number(window.glueDesktop.version.substr(0,1));return isNaN(e)?void 0:e}},e.isNode=function(){if("undefined"!==typeof e._isNode)return e._isNode;if("undefined"!==typeof window)return e._isNode=!1,!1;try{e._isNode="[object process]"===Object.prototype.toString.call(t.process)}catch(n){e._isNode=!1}return e._isNode},e}(),H=function(){function e(){var e=this;this.rejected=!1,this.resolved=!1,this.promise=new Promise((function(t,n){e.resolve=function(n){e.resolved=!0,t(n)},e.reject=function(t){e.rejected=!0,n(t)}}))}return e.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Object.defineProperty(e.prototype,"ended",{get:function(){return this.rejected||this.resolved},enumerable:!0,configurable:!0}),e}(),G={};function V(e){var t=G[e];if(t)return t;var n=[];function r(){return(new Date).getTime()}var i,o,a=r();function s(e,t){var i=null!==t&&void 0!==t?t:r(),o=0;n.length>0&&(o=i-n[n.length-1].time),n.push({name:e,time:i,diff:o})}s("start",a);var u={get startTime(){return a},get endTime(){return i},get period(){return o},stop:function(){return s("end",i=r()),o=i-a},mark:s,marks:n};return G[e]=u,u}var q,J,Y,K=z.isNode()?null:window.WebSocket,$=function(){function e(e,t){if(this.startupTimer=V("connection"),this._running=!0,this._registry=D(),this.wsRequests=[],this.settings=e,this.logger=t,!this.settings.ws)throw new Error("ws is missing")}return e.prototype.onMessage=function(e){return this._registry.add("onMessage",e)},e.prototype.send=function(e,t){var n=this;return new Promise((function(t,r){n.waitForSocketConnection((function(){var i;try{null===(i=n.ws)||void 0===i||i.send(e),t()}catch(o){r(o)}}),r)}))},e.prototype.open=function(){var e=this;return this.logger.info("opening ws..."),this._running=!0,new Promise((function(t,n){e.waitForSocketConnection(t,n)}))},e.prototype.close=function(){return this._running=!1,this.ws&&this.ws.close(),Promise.resolve()},e.prototype.onConnectedChanged=function(e){return this._registry.add("onConnectedChanged",e)},e.prototype.name=function(){return"ws "+this.settings.ws},e.prototype.reconnect=function(){var e;null===(e=this.ws)||void 0===e||e.close();var t=new H;return this.waitForSocketConnection((function(){t.resolve()})),t.promise},e.prototype.waitForSocketConnection=function(e,t){var n;t=null!==t&&void 0!==t?t:function(){},this._running?1!==(null===(n=this.ws)||void 0===n?void 0:n.readyState)?(this.wsRequests.push({callback:e,failed:t}),this.wsRequests.length>1||this.openSocket()):e():t("wait for socket on "+this.settings.ws+" failed - socket closed by user")},e.prototype.openSocket=function(e,t){return d(this,void 0,void 0,(function(){var n=this;return f(this,(function(r){switch(r.label){case 0:if(this.startupTimer.mark("opening-socket"),void 0===e&&(e=this.settings.reconnectInterval),void 0!==t){if(0===t)return this.notifyForSocketState("wait for socket on "+this.settings.ws+" failed - no more retries left"),[2];this.logger.debug("will retry "+t+" more times (every "+e+" ms)")}r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.initiateSocket()];case 2:return r.sent(),this.startupTimer.mark("socket-initiated"),this.notifyForSocketState(),[3,4];case 3:return r.sent(),setTimeout((function(){var r=void 0===t?void 0:t-1;n.openSocket(e,r)}),e),[3,4];case 4:return[2]}}))}))},e.prototype.initiateSocket=function(){var e=this,t=new H;return this.logger.debug("initiating ws to "+this.settings.ws+"..."),this.ws=new K(this.settings.ws||""),this.ws.onerror=function(n){var r="";try{r=JSON.stringify(n)}catch(o){var i=new WeakSet;r=JSON.stringify(n,(function(e,t){if("object"===typeof t&&null!==t){if(i.has(t))return;i.add(t)}return t}))}t.reject("error"),e.notifyStatusChanged(!1,r)},this.ws.onclose=function(n){e.logger.info("ws closed "+n),t.reject("closed"),e.notifyStatusChanged(!1)},this.ws.onopen=function(){var n;e.startupTimer.mark("ws-opened"),e.logger.info("ws opened "+(null===(n=e.settings.identity)||void 0===n?void 0:n.application)),t.resolve(),e.notifyStatusChanged(!0)},this.ws.onmessage=function(t){e._registry.execute("onMessage",t.data)},t.promise},e.prototype.notifyForSocketState=function(e){this.wsRequests.forEach((function(t){e?t.failed&&t.failed(e):t.callback()})),this.wsRequests=[]},e.prototype.notifyStatusChanged=function(e,t){this._registry.execute("onConnectedChanged",e,t)},e}(),Q=1,X={nextValue:function(){return(Q=(9301*Q+49297)%233280)/233280},seed:function(e){Q=e}},Z="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function ee(){Y=!1}function te(e){if(e){if(e!==q){if(e.length!==Z.length)throw new Error("Custom alphabet for shortid must be "+Z.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,n){return t!==n.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+Z.length+" unique characters. These characters were not unique: "+t.join(", "));q=e,ee()}}else q!==Z&&(q=Z,ee())}function ne(){return Y||(Y=function(){q||te(Z);for(var e,t=q.split(""),n=[],r=X.nextValue();t.length>0;)r=X.nextValue(),e=Math.floor(r*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}var re={characters:function(e){return te(e),q},seed:function(e){X.seed(e),J!==e&&(ee(),J=e)},lookup:function(e){return ne()[e]},shuffled:ne},ie="object"===typeof window&&(window.crypto||window.msCrypto),oe=function(){if(!ie||!ie.getRandomValues)return 48&Math.floor(256*Math.random());var e=new Uint8Array(1);return ie.getRandomValues(e),48&e[0]},ae=function(e,t){for(var n,r=0,i="";!n;)i+=e(t>>4*r&15|oe()),n=t<Math.pow(16,r+1),r++;return i},se=function(e){var t=re.shuffled();return{version:15&t.indexOf(e.substr(0,1)),worker:15&t.indexOf(e.substr(1,1))}},ue=function(e){if(!e||"string"!==typeof e||e.length<6)return!1;for(var t=re.characters(),n=e.length,r=0;r<n;r++)if(-1===t.indexOf(e[r]))return!1;return!0},ce=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t,n,r=0;function i(){var e="",i=Math.floor(.001*(Date.now()-1459707606518));return i===n?t++:(t=0,n=i),e+=ae(re.lookup,6),e+=ae(re.lookup,r),t>0&&(e+=ae(re.lookup,t)),e+=ae(re.lookup,i)}e.exports=i,e.exports.generate=i,e.exports.seed=function(t){return re.seed(t),e.exports},e.exports.worker=function(t){return r=t,e.exports},e.exports.characters=function(e){return void 0!==e&&re.characters(e),re.shuffled()},e.exports.decode=se,e.exports.isValid=ue})),le=(ce.generate,ce.seed,ce.worker,ce.characters,ce.decode,ce.isValid,ce);function de(e,t,n,r,i){null==e&&(e="global"),r=r||["success"],i=i||["error"];var o,a=!1,s=!1,u=!1,c=D();t.disconnected((function(){u=!1,n.debug("connection is down"),a=!1,s=!0,c.execute("onLeft",{disconnected:!0})})),t.loggedIn((function(){u=!0,s&&(n.debug("connection is now up - trying to reconnect..."),d(o))})),t.on("success",(function(e){return p(e)})),t.on("error",(function(e){return f(e)})),t.on("result",(function(e){return p(e)})),r&&r.forEach((function(e){t.on(e,(function(e){return p(e)}))})),i&&i.forEach((function(e){t.on(e,(function(e){return f(e)}))}));var l={};function d(t){return o=t,new Promise((function(r,i){var o;a?r():("global"===e?o=u?Promise.resolve({}):Promise.reject("not connected to gateway"):(n.debug("joining domain "+e),o=y({type:"join",destination:e,domain:"global",options:t})),o.then((function(){!function(){n.debug("did join "+e),a=!0;var t=s;s=!1,c.execute("onJoined",t)}(),r()})).catch((function(t){n.debug("error joining "+e+" domain: "+JSON.stringify(t)),i(t)})))}))}function f(t){if(e===t.domain){var n=t.request_id;if(n){var r=l[n];r&&r.error(t)}}}function p(t){if(t.domain===e){var n=t.request_id;if(n){var r=l[n];r&&r.success(t)}}}function h(){return le()}function y(r,i,o){o=o||{},r.request_id=r.request_id||h(),r.domain=r.domain||e,o.skipPeerId||(r.peer_id=t.peerId);var a=r.request_id;return new Promise((function(e,s){l[a]={success:function(t){delete l[a],t._tag=i,e(t)},error:function(e){n.warn("GW error - "+JSON.stringify(e)+" for request "+JSON.stringify(r)),delete l[a],e._tag=i,s(e)}},t.send(r,o).catch((function(e){l[a].error({err:e})}))}))}return{join:d,leave:function(){return"global"===e?Promise.resolve():(n.debug("stopping session "+e+"..."),s=!1,y({type:"leave",destination:e,domain:"global"}).then((function(){a=!1,c.execute("onLeft")})))},onJoined:function(e){return a&&e(!1),c.add("onJoined",e)},onLeft:function(e){return a||e(),c.add("onLeft",e)},send:y,sendFireAndForget:function(n){return n.request_id=n.request_id?n.request_id:h(),n.domain=n.domain||e,n.peer_id=t.peerId,t.send(n)},on:function(r,i){t.on(r,(function(t){if(t.domain===e)try{i(t)}catch(r){n.error("Callback  failed: "+r+" \n "+r.stack+" \n msg was: "+JSON.stringify(t),r)}}))},loggedIn:function(e){return t.loggedIn(e)},connected:function(e){return t.connected(e)},disconnected:function(e){return t.disconnected(e)},get peerId(){return t.peerId},get domain(){return e}}}var fe=function(){function e(e,t,n){var r=this;this.connection=e,this.settings=t,this.logger=n,this.protocolVersion=3,this.datePrefix="#T42_DATE#",this.datePrefixLen=this.datePrefix.length,this.dateMinLen=this.datePrefixLen+1,this.datePrefixFirstChar=this.datePrefix[0],this.registry=D(),this._isLoggedIn=!1,this.shouldTryLogin=!0,this.initialLogin=!0,this.initialLoginAttempts=3,this.sessions=[],e.disconnected((function(){r.handleDisconnected()})),this.ping()}return Object.defineProperty(e.prototype,"isLoggedIn",{get:function(){return this._isLoggedIn},enumerable:!0,configurable:!0}),e.prototype.processStringMessage=function(e){var t=this,n=JSON.parse(e,(function(e,n){if("string"!==typeof n)return n;if(n.length<t.dateMinLen)return n;if(n[0]!==t.datePrefixFirstChar)return n;if(n.substring(0,t.datePrefixLen)!==t.datePrefix)return n;try{var r=parseInt(n.substring(t.datePrefixLen,n.length),10);return isNaN(r)?n:new Date(r)}catch(i){return n}}));return{msg:n,msgType:n.type}},e.prototype.createStringMessage=function(e){var t=Date.prototype.toJSON;try{var n=this.datePrefix;return Date.prototype.toJSON=function(){return n+this.getTime()},JSON.stringify(e)}finally{Date.prototype.toJSON=t}},e.prototype.processObjectMessage=function(e){if(!e.type)throw new Error("Object should have type property");return{msg:e,msgType:e.type}},e.prototype.createObjectMessage=function(e){return e},e.prototype.login=function(e,t){return d(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,d,p;return f(this,(function(f){switch(f.label){case 0:if(this.logger.debug("logging in..."),this.loginConfig=e,this.loginConfig||(this.loginConfig={username:"",password:""}),this.shouldTryLogin=!0,r={},this.connection.gatewayToken=e.gatewayToken,!e.gatewayToken)return[3,5];if(!t)return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.getNewGWToken()];case 2:return l=f.sent(),e.gatewayToken=l,[3,4];case 3:return i=f.sent(),this.logger.warn("failed to get GW token when reconnecting "+((null===i||void 0===i?void 0:i.message)||i)),[3,4];case 4:return r.method="gateway-token",r.token=e.gatewayToken,this.connection.gatewayToken=e.gatewayToken,[3,10];case 5:return"sspi"!==e.flowName?[3,9]:(r.provider="win",r.method="access-token",e.flowCallback&&e.sessionId?(o=r,[4,e.flowCallback(e.sessionId,null)]):[3,7]);case 6:return o.token=f.sent().data.toString("base64"),[3,8];case 7:throw new Error("Invalid SSPI config");case 8:return[3,10];case 9:if(e.token)r.method="access-token",r.token=e.token;else{if(!e.username)throw new Error("invalid auth message"+JSON.stringify(e));r.method="secret",r.login=e.username,r.secret=e.password}f.label=10;case 10:a={type:"hello",identity:this.settings.identity,authentication:r},e.sessionId&&(a.request_id=e.sessionId),this.globalDomain=de("global",this.connection,this.logger.subLogger("global-domain"),["welcome","token","authentication-request"]),s={skipPeerId:!0},this.initialLogin&&(s.retryInterval=this.settings.reconnectInterval,s.maxRetries=this.settings.reconnectAttempts),f.label=11;case 11:f.trys.push([11,19,20,21]),u=void 0,f.label=12;case 12:return[4,this.globalDomain.send(a,void 0,s)];case 13:return"authentication-request"!==(c=f.sent()).type?[3,16]:(l=n.from(c.authentication.token,"base64"),e.flowCallback&&e.sessionId?(d=a.authentication,[4,e.flowCallback(e.sessionId,l)]):[3,15]);case 14:d.token=f.sent().data.toString("base64"),f.label=15;case 15:return a.request_id=e.sessionId,[3,12];case 16:if("welcome"===c.type)return u=c,[3,18];throw"error"===c.type?new Error("Authentication failed: "+c.reason):new Error("Unexpected message type during authentication: "+c.type);case 17:return[3,12];case 18:return this.initialLogin=!1,this.logger.debug("login successful with peerId "+u.peer_id),this.connection.peerId=u.peer_id,this.connection.resolvedIdentity=u.resolved_identity,this.connection.availableDomains=u.available_domains,u.options&&(this.connection.token=u.options.access_token,this.connection.info=u.options.info),this.setLoggedIn(!0),[2,u.resolved_identity];case 19:throw p=f.sent(),this.logger.error("error sending hello message - "+(p.message||p.msg||p.reason||p),p),p;case 20:return e&&e.flowCallback&&e.sessionId&&e.flowCallback(e.sessionId,null),[7];case 21:return[2]}}))}))},e.prototype.logout=function(){return d(this,void 0,void 0,(function(){var e;return f(this,(function(t){switch(t.label){case 0:return this.logger.debug("logging out..."),this.shouldTryLogin=!1,this.pingTimer&&clearTimeout(this.pingTimer),e=this.sessions.map((function(e){e.leave()})),[4,Promise.all(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.loggedIn=function(e){return this._isLoggedIn&&e(),this.registry.add("onLoggedIn",e)},e.prototype.domain=function(e,t,n,r){var i=this.sessions.filter((function(t){return t.domain===e}))[0];return i||(i=de(e,this.connection,t,n,r),this.sessions.push(i)),i},e.prototype.handleDisconnected=function(){var e=this;if(this.setLoggedIn(!1),this.shouldTryLogin&&this.initialLogin){if(this.initialLoginAttempts<=0)return;this.initialLoginAttempts--}if(this.logger.debug("disconnected - will try new login?"+this.shouldTryLogin),this.shouldTryLogin){if(!this.loginConfig)throw new Error("no login info");this.connection.login(this.loginConfig,!0).catch((function(){setTimeout(e.handleDisconnected.bind(e),e.settings.reconnectInterval||1e3)}))}},e.prototype.setLoggedIn=function(e){this._isLoggedIn=e,this._isLoggedIn&&this.registry.execute("onLoggedIn")},e.prototype.ping=function(){var e=this;this.shouldTryLogin&&(this._isLoggedIn&&this.connection.send({type:"ping"}),this.pingTimer=setTimeout((function(){e.ping()}),3e4))},e.prototype.authToken=function(){return this.globalDomain?this.globalDomain.send({type:"create-token"}).then((function(e){return e.token})):Promise.reject(new Error("no global domain session"))},e.prototype.getNewGWToken=function(){if(void 0!==typeof window){var e=window.glue42gd;if(e)return e.getGWToken()}return Promise.reject(new Error("not running in GD"))},e}(),pe=function(){function e(e){this.specsNames=[],this.messages={},this.subs={},this.subsRefCount={},this.specs={};for(var t=0,n=e;t<n.length;t++){var r=n[t];this.specs[r.name]=r,this.specsNames.push(r.name)}}return e.prototype.init=function(e){var t=this;this.connection=e;for(var n=0,r=this.specsNames;n<r.length;n++)for(var i=r[n],o=function(n){var r=a.subsRefCount[n];if(r||(r=0),r+=1,a.subsRefCount[n]=r,r>1)return"continue";var i=e.on(n,(function(e){return t.processMessage(n,e)}));a.subs[n]=i},a=this,s=0,u=this.specs[i].types;s<u.length;s++)o(u[s])},e.prototype.processMessage=function(e,t){if(!this.isDone&&t)for(var n=0,r=this.specsNames;n<r.length;n++){var i=r[n];if(-1!==this.specs[i].types.indexOf(e)){var o=this.messages[i]||[];this.messages[i]=o,o.push(t)}}},e.prototype.drain=function(e,t){var n;t&&(this.messages[e]||[]).forEach(t),delete this.messages[e];for(var r=0,i=this.specs[e].types;r<i.length;r++){var o=i[r];this.subsRefCount[o]-=1,this.subsRefCount[o]<=0&&(null===(n=this.connection)||void 0===n||n.off(this.subs[o]),delete this.subs[o],delete this.subsRefCount[o])}delete this.specs[e],this.specs.length||(this.isDone=!0)},e}(),he=function(e,t,n){return new Promise((function(r,i){var o=setTimeout((function(){i(n||"Promise timeout hit: "+t)}),t);new Promise(e).then((function(e){clearTimeout(o),r(e)})).catch((function(e){clearTimeout(o),i(e)}))}))},ye=function(){function e(e,t,n){this.settings=e,this.logger=t,this.identity=n,this.parentReady=!1,this.iAmConnected=!1,this.rejected=!1,this.children=[],this.parentPingTimeout=3e3,this.connectionRequestTimeout=5e3,this.defaultTargetString="*",this.registry=D(),this.messages={connectionAccepted:{name:"connectionAccepted",handle:this.handleConnectionAccepted.bind(this)},connectionRejected:{name:"connectionRejected",handle:this.handleConnectionRejected.bind(this)},connectionRequest:{name:"connectionRequest",handle:this.handleConnectionRequest.bind(this)},parentReady:{name:"parentReady",handle:this.handleParentReady.bind(this)},parentPing:{name:"parentPing",handle:this.handleParentPing.bind(this)},platformPing:{name:"platformPing",handle:this.handlePlatformPing.bind(this)},platformUnload:{name:"platformUnload",handle:this.handlePlatformUnload.bind(this)},platformReady:{name:"platformReady",handle:this.handlePlatformReady.bind(this)},clientUnload:{name:"clientUnload",handle:this.handleClientUnload.bind(this)}},this.setUpMessageListener(),this.setUpUnload(),this.settings.port||(this.parent=window.opener||window.top,this.parentType=window.opener?"opener":-1!==window.name.indexOf("#wsp")?"workspace":"top")}return Object.defineProperty(e.prototype,"transportWindowId",{get:function(){return this.publicWindowId},enumerable:!0,configurable:!0}),e.prototype.sendObject=function(e){return d(this,void 0,void 0,(function(){return f(this,(function(t){if(!this.port)throw new Error("Cannot send message, because the port was not opened yet");return this.port.postMessage(e),[2]}))}))},Object.defineProperty(e.prototype,"isObjectBasedTransport",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.onMessage=function(e){return this.registry.add("onMessage",e)},e.prototype.send=function(){return Promise.reject("not supported")},e.prototype.onConnectedChanged=function(e){return this.registry.add("onConnectedChanged",e)},e.prototype.open=function(){return d(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return this.logger.debug("opening a connection to the web platform gateway."),[4,this.connect()];case 1:return e.sent(),this.notifyStatusChanged(!0),[2]}}))}))},e.prototype.close=function(){return Promise.resolve()},e.prototype.name=function(){return"web-platform"},e.prototype.reconnect=function(){return Promise.resolve()},e.prototype.connect=function(){return d(this,void 0,void 0,(function(){var e=this;return f(this,(function(t){switch(t.label){case 0:if(this.parentReady)return this.logger.debug("cancelling connection attempt, because this client's parent has already given a ready signal"),[2];if(this.settings.port)return this.logger.debug("opening an internal web platform connection"),this.port=this.settings.port,this.publicWindowId=this.settings.windowId,this.identity&&(this.identity.windowId=this.publicWindowId),this.port.onmessage=function(t){return e.registry.execute("onMessage",t.data)},this.logger.debug("internal web platform connection completed"),[2];if(!this.parentType||!this.parent)throw new Error("Cannot initiate a connection, because there is no opener, no top and no port.");return this.logger.debug("opening a "+("opener"===this.parentType?"child":"grandchild")+" client web platform connection"),[4,this.waitParent(this.parent,this.parentType)];case 1:return t.sent(),[4,this.initiateRemoteConnection(this.parent,this.parentType)];case 2:return t.sent(),this.logger.debug("the "+("opener"===this.parentType?"child":"grandchild")+" client is connected"),[2]}}))}))},e.prototype.initiateRemoteConnection=function(e,t){var n=this;return he((function(r,i){n.connectionResolve=r,n.connectionReject=i,n.myClientId=le();var o="workspace"===n.parentType?window.name.substring(0,window.name.indexOf("#wsp")):window.name,a={glue42core:{type:n.messages.connectionRequest.name,clientId:n.myClientId,clientType:"top"===t||"workspace"===t?"grandChild":"child",bridgeInstanceId:o}};n.logger.debug("sending connection request to "+t),e.postMessage(a,n.defaultTargetString)}),this.connectionRequestTimeout,"The connection to the opener/top window timed out")},e.prototype.waitParent=function(e,t){var n=this;return he((function(r){n.parentPingResolve=r;var i={glue42core:{type:"opener"===t?n.messages.platformPing.name:n.messages.parentPing.name}};n.logger.debug("checking for "+t+" window availability"),e.postMessage(i,n.defaultTargetString)}),this.parentPingTimeout,"Cannot initiate glue, because this window was not opened or created by a glue client")},e.prototype.setUpMessageListener=function(){var e=this;this.settings.port?this.logger.debug("skipping generic message listener, because this is an internal client"):window.addEventListener("message",(function(t){var n,r=null===(n=t.data)||void 0===n?void 0:n.glue42core;if(r&&!e.rejected)if(e.checkMessageTypeValid(r.type)){var i=r.type;e.logger.debug("received valid glue42core message of type: "+i),e.messages[i].handle(t)}else e.logger.error("cannot handle the incoming glue42 core message, because the type is invalid: "+r.type)}))},e.prototype.setUpUnload=function(){var e=this;this.settings.port?this.logger.debug("skipping unload event listener, because this is an internal client"):window.addEventListener("beforeunload",(function(){var t,n,r={glue42core:{type:e.messages.clientUnload.name,data:{clientId:e.myClientId,ownWindowId:null===(t=e.identity)||void 0===t?void 0:t.windowId}}};e.parent&&e.parent.postMessage(r,e.defaultTargetString),null===(n=e.port)||void 0===n||n.postMessage(r)}))},e.prototype.handleParentReady=function(){if(this.logger.debug("handling the ready signal from the parent, by resoling the pending promise."),this.parentReady=!0,this.parentPingResolve)return this.parentPingResolve(),void delete this.parentPingResolve;this.logger.debug("silently handling the ready signal from the top parent, because there is no defined promise")},e.prototype.handlePlatformReady=function(){if(this.logger.debug("the web platform gave the ready signal"),this.parentReady=!0,this.parentPingResolve)return this.parentPingResolve(),void delete this.parentPingResolve;this.logger.debug("silently handling the ready signal from the top parent, because there is no defined promise")},e.prototype.handleConnectionAccepted=function(e){var t,n=null===(t=e.data)||void 0===t?void 0:t.glue42core;return this.myClientId===n.clientId?this.handleAcceptanceOfMyRequest(n):this.handleAcceptanceOfGrandChildRequest(n,e)},e.prototype.handleAcceptanceOfMyRequest=function(e){var t=this;if(this.logger.debug("handling a connection accepted signal targeted at me."),e.port){if(this.publicWindowId="opener"===this.parentType?window.name:"top"===this.parentType?e.parentWindowId:window.name.substring(0,window.name.indexOf("#wsp")),this.identity&&"top"!==this.parentType&&(this.identity.windowId=this.publicWindowId),this.identity&&e.appName&&(this.identity.application=e.appName,this.identity.applicationName=e.appName),this.port=e.port,this.port.onmessage=function(e){return t.registry.execute("onMessage",e.data)},this.connectionResolve)return this.logger.debug("my connection is set up, calling the connection resolve."),this.connectionResolve(),void delete this.connectionResolve;this.logger.error("unable to call the connection resolve, because no connection promise was found")}else this.logger.error("cannot set up my connection, because I was not provided with a port")},e.prototype.handleAcceptanceOfGrandChildRequest=function(e,t){this.logger.debug("handling a connection accepted signal targeted at a grandchild: "+e.clientId);var n=this.children.find((function(t){return t.grandChildId===e.clientId}));n?(n.connected=!0,this.logger.debug("the grandchild connection for "+e.clientId+" is set up, forwarding the success message and the gateway port"),e.parentWindowId=this.publicWindowId,n.source.postMessage(t.data,n.origin,[e.port])):this.logger.error("cannot handle connection accepted for grandchild: "+e.clientId+", because there is no grandchild with this id")},e.prototype.handleConnectionRejected=function(){this.logger.debug("handling a connection rejection. Most likely the reason is that this window was not created by a glue API call"),this.connectionReject&&(this.connectionReject("The platform connection was rejected. Most likely because this window was not created by a glue API call"),delete this.connectionReject)},e.prototype.handleConnectionRequest=function(e){var t=e.source,n=e.data.glue42core;return n.clientType&&"grandChild"===n.clientType?n.clientId?"opener"===this.parentType&&this.parent?(this.logger.debug("handling a connection request for a grandchild: "+n.clientId),this.children.push({grandChildId:n.clientId,source:t,connected:!1,origin:e.origin}),this.logger.debug("grandchild: "+n.clientId+" is prepared, forwarding connection request to the platform"),void this.parent.postMessage(e.data,this.defaultTargetString)):this.rejectConnectionRequest(t,e.origin,"Cannot forward the connection request, because no direct connection to the platform was found"):this.rejectConnectionRequest(t,e.origin,"rejecting a connection request, because the source did not provide a valid id"):this.rejectConnectionRequest(t,e.origin,"rejecting a connection request, because the source was not opened by a glue API call")},e.prototype.handleParentPing=function(e){if(this.parentReady)if(this.iAmConnected){var t={glue42core:{type:this.messages.parentReady.name}},n=e.source;this.logger.debug("responding to a parent ping with a ready message"),n.postMessage(t,e.origin)}else this.logger.debug("i am not fully connected yet, I am ignoring the parent ping");else this.logger.debug("my parent is not ready, I am ignoring the parent ping")},e.prototype.handlePlatformUnload=function(e){this.logger.debug("detected a web platform unload"),this.parentReady=!1,this.children.length&&(this.logger.debug("forwarding the platform unload to all known children and starting platform discovery polling"),this.children.forEach((function(t){return t.source.postMessage(e.data,t.origin)}))),this.notifyStatusChanged(!1,"Gateway unloaded")},e.prototype.handleClientUnload=function(e){var t=e.data.glue42core;t.clientId?this.children.find((function(e){return e.grandChildId===t.clientId}))?(this.logger.debug("handling grandchild unload for id: "+t.clientId),this.children=this.children.filter((function(e){return e.grandChildId!==t.clientId}))):this.logger.warn("cannot process grand child unload, because this client is unaware of this grandchild"):this.logger.warn("cannot process grand child unload, because the provided id was not valid")},e.prototype.handlePlatformPing=function(){this.logger.error("cannot handle platform ping, because this is not a platform calls handling component")},e.prototype.notifyStatusChanged=function(e,t){this.iAmConnected=e,this.registry.execute("onConnectedChanged",e,t)},e.prototype.checkMessageTypeValid=function(e){return"string"===typeof e&&!!this.messages[e]},e.prototype.rejectConnectionRequest=function(e,t,n){this.rejected=!0,this.logger.error(n);var r={glue42core:{type:this.messages.connectionRejected.name}};e.postMessage(r,t)},e}(),ge=function(){function e(e,t){if(this.settings=e,this.logger=t,this.messageHandlers={},this.ids=1,this.registry=D(),this._connected=!1,this.isTrace=!1,(e=e||{}).reconnectAttempts=e.reconnectAttempts||10,e.reconnectInterval=e.reconnectInterval||1e3,e.inproc)this.transport=new U(e.inproc,t.subLogger("inMemory"));else if(e.sharedWorker)this.transport=new B(e.sharedWorker,t.subLogger("shared-worker"));else if(e.webPlatform)this.transport=new ye(e.webPlatform,t.subLogger("web-platform"),e.identity);else{if(void 0===e.ws)throw new Error("No connection information specified");this.transport=new $(e,t.subLogger("ws"))}this.isTrace=t.canPublish("trace"),t.debug("starting with "+this.transport.name()+" transport"),this.protocol=new fe(this,e,t.subLogger("protocol")),this.transport.onConnectedChanged(this.handleConnectionChanged.bind(this)),this.transport.onMessage(this.handleTransportMessage.bind(this)),e.replaySpecs&&e.replaySpecs.length&&(this.replayer=new pe(e.replaySpecs),this.replayer.init(this))}return Object.defineProperty(e.prototype,"protocolVersion",{get:function(){var e;return null===(e=this.protocol)||void 0===e?void 0:e.protocolVersion},enumerable:!0,configurable:!0}),e.prototype.send=function(e,t){if(this.transport.sendObject&&this.transport.isObjectBasedTransport){var n=this.protocol.createObjectMessage(e);return this.isTrace&&this.logger.trace(">> "+JSON.stringify(n)),this.transport.sendObject(n,t)}var r=this.protocol.createStringMessage(e);return this.isTrace&&this.logger.trace(">> "+r),this.transport.send(r,t)},e.prototype.on=function(e,t){e=e.toLowerCase(),void 0===this.messageHandlers[e]&&(this.messageHandlers[e]={});var n=this.ids++;return this.messageHandlers[e][n]=t,{type:e,id:n}},e.prototype.off=function(e){delete this.messageHandlers[e.type.toLowerCase()][e.id]},Object.defineProperty(e.prototype,"isConnected",{get:function(){return this.protocol.isLoggedIn},enumerable:!0,configurable:!0}),e.prototype.connected=function(e){var t=this;return this.protocol.loggedIn((function(){e(t.settings.ws||t.settings.sharedWorker||"")}))},e.prototype.disconnected=function(e){return this.registry.add("disconnected",e)},e.prototype.login=function(e,t){return d(this,void 0,void 0,(function(){var n;return f(this,(function(r){switch(r.label){case 0:return[4,this.transport.open()];case 1:return r.sent(),V("connection").mark("transport-opened"),n=this.protocol.login(e,t),V("connection").mark("protocol-logged-in"),[2,n]}}))}))},e.prototype.logout=function(){return d(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,this.protocol.logout()];case 1:return e.sent(),[4,this.transport.close()];case 2:return e.sent(),[2]}}))}))},e.prototype.loggedIn=function(e){return this.protocol.loggedIn(e)},e.prototype.domain=function(e,t,n){return this.protocol.domain(e,this.logger.subLogger("domain="+e),t,n)},e.prototype.authToken=function(){return this.protocol.authToken()},e.prototype.reconnect=function(){return this.transport.reconnect()},e.prototype.distributeMessage=function(e,t){var n=this,r=this.messageHandlers[t.toLowerCase()];void 0!==r&&Object.keys(r).forEach((function(t){var i=r[t];if(void 0!==i)try{i(e)}catch(o){try{n.logger.error("Message handler failed with "+o.stack,o)}catch(a){console.log("Message handler failed",o)}}}))},e.prototype.handleConnectionChanged=function(e){this._connected!==e&&(this._connected=e,e?this.registry.execute("connected"):this.registry.execute("disconnected"))},e.prototype.handleTransportMessage=function(e){var t;t="string"===typeof e?this.protocol.processStringMessage(e):this.protocol.processObjectMessage(e),this.isTrace&&this.logger.trace("<< "+JSON.stringify(t)),this.distributeMessage(t.msg,t.msgType)},e}(),ve=["trace","debug","info","warn","error","off"],me=function(){function e(e,t,n){this.name=e,this.parent=t,this.subLoggers=[],this.logFn=console,this.customLogFn=!1,this.name=e,this.path=t?t.path+"."+e:e,this.loggerFullName="["+this.path+"]",this.includeTimeAndLevel=!n,n&&(this.logFn=n,this.customLogFn=!0)}return e.prototype.subLogger=function(t){var n=this.subLoggers.filter((function(e){return e.name===t}))[0];if(void 0!==n)return n;Object.keys(this).forEach((function(e){if(e===t)throw new Error("This sub logger name is not allowed.")}));var r=new e(t,this,this.customLogFn?this.logFn:void 0);return this.subLoggers.push(r),r},e.prototype.publishLevel=function(e){var t;return e&&(this._publishLevel=e),this._publishLevel||(null===(t=this.parent)||void 0===t?void 0:t.publishLevel())},e.prototype.consoleLevel=function(e){var t;return e&&(this._consoleLevel=e),this._consoleLevel||(null===(t=this.parent)||void 0===t?void 0:t.consoleLevel())},e.prototype.log=function(e,t,n){this.publishMessage(t||"info",e,n)},e.prototype.trace=function(e){this.log(e,"trace")},e.prototype.debug=function(e){this.log(e,"debug")},e.prototype.info=function(e){this.log(e,"info")},e.prototype.warn=function(e){this.log(e,"warn")},e.prototype.error=function(e,t){this.log(e,"error")},e.prototype.canPublish=function(e,t){return ve.indexOf(e)>=ve.indexOf(t||this.consoleLevel()||"trace")},e.prototype.publishMessage=function(t,n,r){var i=this.loggerFullName;if("error"===t&&!r){var o=new Error;o.stack&&(n=n+"\n"+o.stack.split("\n").slice(3).join("\n"))}if(this.canPublish(t,this.publishLevel())){var a=e.Interop;if(a)try{a.methods({name:e.InteropMethodName}).length>0&&a.invoke(e.InteropMethodName,{msg:""+n,logger:i,level:t})}catch(l){}}if(this.canPublish(t)){var s="";if(this.includeTimeAndLevel){var u=new Date;s="["+u.getHours()+":"+u.getMinutes()+":"+u.getSeconds()+":"+u.getMilliseconds()+"] ["+t+"] "}var c=""+s+i+": "+n;switch(t){case"trace":this.logFn.debug(c);break;case"debug":this.logFn.debug?this.logFn.debug(c):this.logFn.log(c);break;case"info":this.logFn.info(c);break;case"warn":this.logFn.warn(c);break;case"error":this.logFn.error(c,r)}}},e.InteropMethodName="T42.AppLogger.Log",e}(),we="create-context",be="created",_e="destroyed",ke="context-created",Se="context-added",Ce="subscribe-context",Ie="subscribed-context",xe="unsubscribe-context",Ae="destroy-context",Te="context-destroyed",Ee="update-context",Pe="context-updated",Me="joined",Oe={get name(){return"context"},get types(){return[we,be,_e,ke,Se,Ce,Ie,xe,Ae,Te,Ee,Pe,Me]}},Re="5.4.0",je=function(){function e(e,t,n,r){this.updateCallbacks={},this.contextId=e,this.name=t,this.isAnnounced=n,this.activityId=r,this.context={}}return e.prototype.hasCallbacks=function(){return Object.keys(this.updateCallbacks).length>0},e.prototype.getState=function(){return this.isAnnounced&&this.hasCallbacks()?3:this.isAnnounced?2:this.hasCallbacks()?1:0},e}();function Le(e,t,n){try{if((null===n||void 0===n?void 0:n.canPublish("trace"))&&(null===n||void 0===n||n.trace("applying context delta "+JSON.stringify(t)+" on context "+JSON.stringify(e))),!t)return e;if(t.reset)return e=l({},t.reset);if(e=Ne(e,void 0),t.commands){for(var r=0,i=t.commands;r<i.length;r++){var o=i[r];"remove"===o.type?Be(e,o.path):"set"===o.type&&De(e,o.value,o.path)}return e}var a=t.added,s=t.updated,u=t.removed;return a&&Object.keys(a).forEach((function(t){e[t]=a[t]})),s&&Object.keys(s).forEach((function(t){Fe(t,e,s)})),u&&u.forEach((function(t){delete e[t]})),e}catch(c){return null===n||void 0===n||n.error("error applying context delta "+JSON.stringify(t)+" on context "+JSON.stringify(e),c),e}}function Ne(e,t){if(t=t||new WeakMap,Object(e)!==e)return e;if(e instanceof Set)return new Set(e);if(t.has(e))return t.get(e);var n=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e.constructor?new e.constructor:Object.create(null);return t.set(e,n),e instanceof Map&&Array.from(e,(function(e){var r=e[0],i=e[1];return n.set(r,Ne(i,t))})),Object.assign.apply(Object,p([n],Object.keys(e).map((function(n){var r;return(r={})[n]=Ne(e[n],t),r}))))}var Fe=function(e,t,n){var r=n[e];if(void 0===r)return t;var i=t[e];return i&&r?"string"===typeof i||"number"===typeof i||"boolean"===typeof i||"string"===typeof r||"number"===typeof r||"boolean"===typeof r||Array.isArray(i)||Array.isArray(r)?(t[e]=r,t):(t[e]=Object.assign({},i,r),t):(t[e]=r,t)};function We(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;if(e.constructor!==t.constructor)return!1;for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n))return!1;if(e[n]!==t[n]){if("object"!==typeof e[n])return!1;if(!We(e[n],t[n]))return!1}}for(var n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}function De(e,t,n){var r,i=n.split(".");for(r=0;r<i.length-1;r++)e[i[r]]||(e[i[r]]={}),"object"!==typeof e[i[r]]&&(e[i[r]]={}),e=e[i[r]];e[i[r]]=t}function Ue(e,t){return Object.keys(t).every((function(n){return"object"===typeof t[n]?Ue((null===e||void 0===e?void 0:e[n])||{},t[n]||{}):t[n]===(null===e||void 0===e?void 0:e[n])}))}function Be(e,t){var n,r=t.split(".");for(n=0;n<r.length-1;n++){if(!e[r[n]])return;e=e[r[n]]}delete e[r[n]]}var ze,He=function(){function e(e){var t,n=this;this._contextNameToData={},this._gw3Subscriptions=[],this._nextCallbackSubscriptionNumber=0,this._contextNameToId={},this._contextIdToName={},this._protocolVersion=void 0,this._connection=e.connection,this._logger=e.logger,this._gw3Session=this._connection.domain("global",[ke,Ie,Te,Pe]),this.subscribeToContextCreatedMessages(),this.subscribeToContextUpdatedMessages(),this.subscribeToContextDestroyedMessages(),null===(t=this._connection.replayer)||void 0===t||t.drain(Oe.name,(function(e){var t=e.type;t&&(t===ke||t===Se||t===be?n.handleContextCreatedMessage(e):t===Ie||t===Pe||t===Me?n.handleContextUpdatedMessage(e):t!==Te&&t!==_e||n.handleContextDestroyedMessage(e))}))}return Object.defineProperty(e.prototype,"protocolVersion",{get:function(){var e;if(!this._protocolVersion){var t=this._connection.availableDomains.find((function(e){return"context"===e.uri}));this._protocolVersion=null!==(e=null===t||void 0===t?void 0:t.version)&&void 0!==e?e:1}return this._protocolVersion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setPathSupported",{get:function(){return this.protocolVersion>=2},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){for(var e=0,t=this._gw3Subscriptions;e<t.length;e++){var n=t[e];this._connection.off(n)}for(var r in this._gw3Subscriptions.length=0,this._contextNameToData)this._contextNameToId.hasOwnProperty(r)&&delete this._contextNameToData[r]},e.prototype.createContext=function(e,t){var n=this;return this._gw3Session.send({type:we,domain:"global",name:e,data:t,lifetime:"retained"}).then((function(r){n._contextNameToId[e]=r.context_id,n._contextIdToName[r.context_id]=e;var i=n._contextNameToData[e]||new je(r.context_id,e,!0,void 0);return i.isAnnounced=!0,i.name=e,i.contextId=r.context_id,i.context=t,n._contextNameToData[e]=i,r.context_id}))},e.prototype.all=function(){var e=this;return Object.keys(this._contextNameToData).filter((function(t){return e._contextNameToData[t].isAnnounced}))},e.prototype.update=function(e,t){var n;return d(this,void 0,void 0,(function(){var r,i,o,a=this;return f(this,(function(s){switch(s.label){case 0:return(r=this._contextNameToData[e])&&r.isAnnounced?(i=r.context,r.hasCallbacks()?[3,2]:[4,this.get(r.name)]):[2,this.createContext(e,t)];case 1:i=s.sent(),s.label=2;case 2:return o=2===this.protocolVersion?this.calculateContextDeltaV2(i,t):this.calculateContextDeltaV1(i,t),Object.keys(o.added).length||Object.keys(o.updated).length||o.removed.length||(null===(n=o.commands)||void 0===n?void 0:n.length)?[2,this._gw3Session.send({type:Ee,domain:"global",context_id:r.contextId,delta:o},{},{skipPeerId:!1}).then((function(e){a.handleUpdated(r,o,{updaterId:e.peer_id})}))]:[2,Promise.resolve()]}}))}))},e.prototype.set=function(e,t){var n=this,r=this._contextNameToData[e];return r&&r.isAnnounced?this._gw3Session.send({type:Ee,domain:"global",context_id:r.contextId,delta:{reset:t}},{},{skipPeerId:!1}).then((function(e){n.handleUpdated(r,{reset:t,added:{},removed:[],updated:{}},{updaterId:e.peer_id})})):this.createContext(e,t)},e.prototype.setPath=function(e,t,n){return this.setPathSupported?this.setPaths(e,[{path:t,value:n}]):Promise.reject("glue.contexts.setPath operation is not supported, use Glue42 3.10 or later")},e.prototype.setPaths=function(e,t){var n=this;if(!this.setPathSupported)return Promise.reject("glue.contexts.setPaths operation is not supported, use Glue42 3.10 or later");var r=this._contextNameToData[e];if(!r||!r.isAnnounced){for(var i={},o=0,a=t;o<a.length;o++)De(i,(l=a[o]).value,l.path);return this.createContext(e,i)}for(var s=[],u=0,c=t;u<c.length;u++){var l;null===(l=c[u]).value?s.push({type:"remove",path:l.path}):s.push({type:"set",path:l.path,value:l.value})}return this._gw3Session.send({type:Ee,domain:"global",context_id:r.contextId,delta:{commands:s}},{},{skipPeerId:!1}).then((function(e){n.handleUpdated(r,{added:{},removed:[],updated:{},commands:s},{updaterId:e.peer_id})}))},e.prototype.get=function(e){var t,n=this,r=this._contextNameToData[e];if(!r||!r.isAnnounced)return Promise.resolve({});if(r&&!r.hasCallbacks())return new Promise((function(t,r){return d(n,void 0,void 0,(function(){var n=this;return f(this,(function(r){return this.subscribe(e,(function(e,r,i,o){n.unsubscribe(o),t(e)})),[2]}))}))}));var i=null!==(t=null===r||void 0===r?void 0:r.context)&&void 0!==t?t:{};return Promise.resolve(i)},e.prototype.subscribe=function(e,t){var n=this._nextCallbackSubscriptionNumber;this._nextCallbackSubscriptionNumber+=1;var r=this._contextNameToData[e];if(!r||!r.isAnnounced)return r=r||new je(void 0,e,!1,void 0),this._contextNameToData[e]=r,r.updateCallbacks[n]=t,Promise.resolve(n);var i,o=r.hasCallbacks();return r.updateCallbacks[n]=t,o||r.joinedActivity||r.context&&r.sentExplicitSubscription?(t(i=Ne(r.context),i,[],n),Promise.resolve(n)):this.sendSubscribe(r).then((function(){return n}))},e.prototype.unsubscribe=function(e){for(var t=0,n=Object.keys(this._contextNameToData);t<n.length;t++){var r=n[t],i=(this._contextNameToId[r],this._contextNameToData[r]);if(!i)return;var o=i.hasCallbacks();delete i.updateCallbacks[e],i.isAnnounced&&o&&!i.hasCallbacks()&&i.sentExplicitSubscription&&this.sendUnsubscribe(i),i.isAnnounced||i.hasCallbacks()||delete this._contextNameToData[r]}},e.prototype.destroy=function(e){var t=this._contextNameToData[e];return t?this._gw3Session.send({type:Ae,domain:"global",context_id:t.contextId}).then((function(e){})):Promise.reject("context with "+e+" does not exist")},e.prototype.handleUpdated=function(e,t,n){var r=e.context;e.context=Le(e.context,t,this._logger),this._contextNameToData[e.name]!==e||We(r,e.context)||this.invokeUpdateCallbacks(e,t,n)},e.prototype.subscribeToContextCreatedMessages=function(){for(var e=0,t=[Se,ke,be];e<t.length;e++){var n=t[e],r=this._connection.on(n,this.handleContextCreatedMessage.bind(this));this._gw3Subscriptions.push(r)}},e.prototype.handleContextCreatedMessage=function(e){var t=e.type;t===be?(this._contextNameToId[e.activity_id]=e.context_id,this._contextIdToName[e.context_id]=e.activity_id):t===Se&&(this._contextNameToId[e.name]=e.context_id,this._contextIdToName[e.context_id]=e.name);var n=this._contextIdToName[e.context_id];if(!n)throw new Error("Received created event for context with unknown name: "+e.context_id);if(!this._contextNameToId[n])throw new Error("Received created event for context with unknown id: "+e.context_id);var r=this._contextNameToData[n];if(r){if(r.isAnnounced)return;if(!r.hasCallbacks())throw new Error("Assertion failure: contextData.hasCallbacks()");r.isAnnounced=!0,r.contextId=e.context_id,r.activityId=e.activity_id,r.sentExplicitSubscription||this.sendSubscribe(r)}else this._contextNameToData[n]=r=new je(e.context_id,n,!0,e.activity_id)},e.prototype.subscribeToContextUpdatedMessages=function(){for(var e=0,t=[Pe,Ie,Me];e<t.length;e++){var n=t[e],r=this._connection.on(n,this.handleContextUpdatedMessage.bind(this));this._gw3Subscriptions.push(r)}},e.prototype.handleContextUpdatedMessage=function(e){var t=e.type,n=e.context_id,r=this._contextNameToData[this._contextIdToName[n]],i=!r||!r.isAnnounced;if(t===Me)r?(r.contextId=n,r.isAnnounced=!0,r.activityId=e.activity_id):(r=new je(n,e.activity_id,!0,e.activity_id),this._contextNameToData[e.activity_id]=r,this._contextIdToName[n]=e.activity_id,this._contextNameToId[e.activity_id]=n),r.joinedActivity=!0;else if(!r||!r.isAnnounced)return void(t===Ie?((r=r||new je(n,e.name,!0,void 0)).sentExplicitSubscription=!0,this._contextNameToData[e.name]=r,this._contextIdToName[n]=e.name,this._contextNameToId[e.name]=n):this._logger.error("Received 'update' for unknown context: "+n));var o=r.context;if(t===Ie)r.context=e.data||{};else if(t===Me)r.context=e.context_snapshot||{};else{if(t!==Pe)throw new Error("Unrecognized context update message "+t);r.context=Le(r.context,e.delta,this._logger)}!i&&We(r.context,o)&&t!==Ie||this.invokeUpdateCallbacks(r,e.delta,{updaterId:e.updater_id})},e.prototype.invokeUpdateCallbacks=function(e,t,n){if((t=t||{added:{},updated:{},reset:{},removed:[]}).commands){t.added=t.updated=t.reset={},t.removed=[];for(var r=0,i=t.commands;r<i.length;r++){var o=i[r];"remove"===o.type?(-1===o.path.indexOf(".")&&t.removed.push(o.path),De(t.updated,null,o.path)):"set"===o.type&&De(t.updated,o.value,o.path)}}for(var a in e.updateCallbacks)if(e.updateCallbacks.hasOwnProperty(a))try{(0,e.updateCallbacks[a])(Ne(e.context),Object.assign({},t.added||{},t.updated||{},t.reset||{}),t.removed,parseInt(a,10),n)}catch(s){this._logger.debug("callback error: "+JSON.stringify(s))}},e.prototype.subscribeToContextDestroyedMessages=function(){for(var e=0,t=[Te,_e];e<t.length;e++){var n=t[e],r=this._connection.on(n,this.handleContextDestroyedMessage.bind(this));this._gw3Subscriptions.push(r)}},e.prototype.handleContextDestroyedMessage=function(e){var t,n;if(e.type===_e){if(n=e.activity_id,!(t=this._contextNameToId[n]))return void this._logger.error("Received 'destroyed' for unknown activity: "+e.activity_id)}else if(t=e.context_id,!(n=this._contextIdToName[t]))return void this._logger.error("Received 'destroyed' for unknown context: "+e.context_id);delete this._contextIdToName[t],delete this._contextNameToId[n];var r=this._contextNameToData[n];delete this._contextNameToData[n],r&&r.isAnnounced||this._logger.error("Received 'destroyed' for unknown context: "+t)},e.prototype.sendSubscribe=function(e){return e.sentExplicitSubscription=!0,this._gw3Session.send({type:Ce,domain:"global",context_id:e.contextId}).then((function(e){}))},e.prototype.sendUnsubscribe=function(e){return e.sentExplicitSubscription=!1,this._gw3Session.send({type:xe,domain:"global",context_id:e.contextId}).then((function(e){}))},e.prototype.calculateContextDeltaV1=function(e,t){var n={added:{},updated:{},removed:[],reset:void 0};if(e)for(var r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];-1===Object.keys(t).indexOf(o)||null===t[o]||We(e[o],t[o])||(n.updated[o]=t[o])}for(var a=0,s=Object.keys(t);a<s.length;a++)o=s[a],e&&-1!==Object.keys(e).indexOf(o)?null===t[o]&&n.removed.push(o):null!==t[o]&&(n.added[o]=t[o]);return n},e.prototype.calculateContextDeltaV2=function(e,t){for(var n,r,i={added:{},updated:{},removed:[],reset:void 0,commands:[]},o=0,a=Object.keys(t);o<a.length;o++){var s=a[o];null!==t[s]?We(e?e[s]:null,t[s])||null===(n=i.commands)||void 0===n||n.push({type:"set",path:s,value:t[s]}):null===(r=i.commands)||void 0===r||r.push({type:"remove",path:s})}return i},e}(),Ge=function(){function e(e){this._bridge=new He(e)}return e.prototype.all=function(){return this._bridge.all()},e.prototype.update=function(e,t){return this.checkName(e),this.checkData(t),this._bridge.update(e,t)},e.prototype.set=function(e,t){return this.checkName(e),this.checkData(t),this._bridge.set(e,t)},e.prototype.setPath=function(e,t,n){return this.checkName(e),this.checkPath(t),""===t?(this.checkData(n),this.set(e,n)):this._bridge.setPath(e,t,n)},e.prototype.setPaths=function(e,t){if(this.checkName(e),!Array.isArray(t))throw new Error("Please provide the paths as an array of PathValues!");for(var n=0,r=t;n<r.length;n++){var i=r[n],o=i.path,a=i.value;this.checkPath(o),""===o&&this.checkData(a)}return this._bridge.setPaths(e,t)},e.prototype.subscribe=function(e,t){var n=this;if(this.checkName(e),"function"!==typeof t)throw new Error("Please provide the callback as a function!");return this._bridge.subscribe(e,(function(e,r,i,o,a){return t(e,r,i,(function(){return n._bridge.unsubscribe(o)}),a)})).then((function(e){return function(){n._bridge.unsubscribe(e)}}))},e.prototype.get=function(e){return this.checkName(e),this._bridge.get(e)},e.prototype.ready=function(){return Promise.resolve(this)},e.prototype.destroy=function(e){return this.checkName(e),this._bridge.destroy(e)},Object.defineProperty(e.prototype,"setPathSupported",{get:function(){return this._bridge.setPathSupported},enumerable:!0,configurable:!0}),e.prototype.checkName=function(e){if("string"!==typeof e||""===e)throw new Error("Please provide the name as a non-empty string!")},e.prototype.checkPath=function(e){if("string"!==typeof e)throw new Error("Please provide the path as a dot delimited string!")},e.prototype.checkData=function(e){if("object"!==typeof e)throw new Error("Please provide the data as an object!")},e}();function Ve(e,t,n){return"function"!==typeof t&&"function"!==typeof n?e:("function"!==typeof t?t=function(){}:"function"!==typeof n&&(n=function(){}),e.then(t,n))}function qe(e,t,n){var r;return void 0===e&&(e=0),t.finally((function(){r&&clearTimeout(r)})),new Promise((function(t,i){r=setTimeout((function(){return i(n)}),e)}))}!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(ze||(ze={}));var Je=function(){function e(e,t,n,r){this.protocol=e,this.repo=t,this.instance=n,this.configuration=r}return e.prototype.subscribe=function(e,t,n,r,i){var o=this,a=function(e,n,r,a){var s;t.methodResponseTimeout=null!==(s=t.methodResponseTimeout)&&void 0!==s?s:t.waitTimeoutMs,o.protocol.client.subscribe(n,t,e,r,a,i)};return Ve(new Promise((function(n,r){var i,s=function(e){n(e)},u=function(e){r(e)};if(e)if((i="string"===typeof e?{name:e}:e).name){void 0===t&&(t={});var c=t.target;if(void 0===c&&(c="best"),"string"!==typeof c||"all"===c||"best"===c){void 0===t.methodResponseTimeout&&(t.methodResponseTimeout=t.method_response_timeout,void 0===t.methodResponseTimeout&&(t.methodResponseTimeout=o.configuration.methodResponseTimeout)),void 0===t.waitTimeoutMs&&(t.waitTimeoutMs=t.wait_for_method_timeout,void 0===t.waitTimeoutMs&&(t.waitTimeoutMs=o.configuration.waitTimeoutMs));var l=0,d=o.getServerMethodsByFilterAndTarget(i,c);d.length>0?a(d,d[0].methods[0],s,u):setTimeout((function n(){if(c&&t.waitTimeoutMs)if(l+=500,(d=o.getServerMethodsByFilterAndTarget(i,c)).length>0){var r=d[0].methods[0];a(d,r,s,u)}else l>=t.waitTimeoutMs?a(d,"string"===typeof e?{name:e}:e,s,u):setTimeout(n,500)}),500)}else r(new Error('"'+c+'" is not a valid target. Valid targets are "all", "best", or an instance.'))}else r("Method definition is required. Please, provide either a unique string for a method name or a \u201cmethodDefinition\u201d object with a required \u201cname\u201d property.");else r("Method definition is required. Please, provide either a unique string for a method name or a \u201cmethodDefinition\u201d object with a required \u201cname\u201d property.")})),n,r)},e.prototype.servers=function(e){var t=void 0===e?void 0:l({},e);return this.getServers(t).map((function(e){return e.server.instance}))},e.prototype.methods=function(e){return e="string"===typeof e?{name:e}:l({},e),this.getMethods(e)},e.prototype.methodsForInstance=function(e){return this.getMethodsForInstance(e)},e.prototype.methodAdded=function(e){return this.repo.onMethodAdded(e)},e.prototype.methodRemoved=function(e){return this.repo.onMethodRemoved(e)},e.prototype.serverAdded=function(e){return this.repo.onServerAdded(e)},e.prototype.serverRemoved=function(e){return this.repo.onServerRemoved((function(t,n){e(t,n)}))},e.prototype.serverMethodAdded=function(e){return this.repo.onServerMethodAdded((function(t,n){e({server:t,method:n})}))},e.prototype.serverMethodRemoved=function(e){return this.repo.onServerMethodRemoved((function(t,n){e({server:t,method:n})}))},e.prototype.invoke=function(e,t,n,r,i,o){return d(this,void 0,void 0,(function(){var a=this;return f(this,(function(s){return[2,Ve(d(a,void 0,void 0,(function(){var i,o,a,s,u,c,d,p,h,y,g,v,m=this;return f(this,(function(f){switch(f.label){case 0:if(!(i="string"===typeof e?{name:e}:l({},e)).name)return[2,Promise.reject("Method definition is required. Please, provide either a unique string for a method name or a \u201cmethodDefinition\u201d object with a required \u201cname\u201d property.")];if(t||(t={}),n||(n="best"),"string"===typeof n&&"all"!==n&&"best"!==n&&"skipMine"!==n)return[2,Promise.reject(new Error('"'+n+'" is not a valid target. Valid targets are "all" and "best".'))];if(r||(r={}),void 0===r.methodResponseTimeoutMs&&(r.methodResponseTimeoutMs=r.method_response_timeout,void 0===r.methodResponseTimeoutMs&&(r.methodResponseTimeoutMs=this.configuration.methodResponseTimeout)),void 0===r.waitTimeoutMs&&(r.waitTimeoutMs=r.wait_for_method_timeout,void 0===r.waitTimeoutMs&&(r.waitTimeoutMs=this.configuration.waitTimeoutMs)),void 0!==r.waitTimeoutMs&&"number"!==typeof r.waitTimeoutMs)return[2,Promise.reject(new Error('"'+r.waitTimeoutMs+'" is not a valid number for "waitTimeoutMs" '))];if("object"!==typeof t)return[2,Promise.reject(new Error("The method arguments must be an object. method: "+i.name))];if(0!==(o=this.getServerMethodsByFilterAndTarget(i,n)).length)return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.tryToAwaitForMethods(i,n,r)];case 2:return o=f.sent(),[3,4];case 3:return f.sent(),a=l(l({},i),{getServers:function(){return[]},supportsStreaming:!1,objectTypes:null!==(y=i.objectTypes)&&void 0!==y?y:[],flags:null!==(v=null===(g=i.flags)||void 0===g?void 0:g.metadata)&&void 0!==v?v:{}}),s={method:a,called_with:t,message:"Can not find a method matching "+JSON.stringify(e)+" with server filter "+JSON.stringify(n),executed_by:void 0,returned:void 0,status:void 0},[2,Promise.reject(s)];case 4:return u=r.methodResponseTimeoutMs,c=r,d=o.map((function(e){var n=le(),r=e.methods[0],i=e.server,o=m.protocol.client.invoke(n,r,t,i,c);return Promise.race([o,qe(u,o,{invocationId:n,message:"Invocation timeout ("+u+" ms) reached for method name: "+(null===r||void 0===r?void 0:r.name)+", target instance: "+JSON.stringify(i.instance)+", options: "+JSON.stringify(c),status:ze.Error})])})),[4,Promise.all(d)];case 5:return p=f.sent(),h=this.getInvocationResultObj(p,i,t),p.every((function(e){return e.status===ze.Error}))?[2,Promise.reject(h)]:[2,h]}}))})),i,o)]}))}))},e.prototype.getInvocationResultObj=function(e,t,n){var r=e.filter((function(e){return e.status===ze.Success})).reduce((function(e,r){return e=p(e,[{executed_by:r.instance,returned:r.result,called_with:n,method:t,message:r.message,status:r.status}])}),[]),i=e.filter((function(e){return e.status===ze.Error})).reduce((function(e,r){return e=p(e,[{executed_by:r.instance,called_with:n,name:t.name,message:r.message}])}),[]),o=e[0];return{method:t,called_with:n,returned:o.result,executed_by:o.instance,all_return_values:r,all_errors:i,message:o.message,status:o.status}},e.prototype.tryToAwaitForMethods=function(e,t,n){var r=this;return new Promise((function(i,o){if(0!==n.waitTimeoutMs)var a=0,s=setInterval((function(){a+=500;var u=r.getServerMethodsByFilterAndTarget(e,t);if(u.length>0)clearInterval(s),i(u);else if(a>=(n.waitTimeoutMs||1e4))return clearInterval(s),void o()}),500);else o()}))},e.prototype.filterByTarget=function(e,t){var n=this;if("string"!==typeof e)return(Array.isArray(e)?e:[e]).reduce((function(e,r){var i=t.filter((function(e){return n.instanceMatch(r,e.server.instance)}));return e.concat(i)}),[]);if("all"===e)return p(t);if("best"===e){var r=t.find((function(e){return e.server.instance.isLocal}));if(r)return[r];if(void 0!==t[0])return[t[0]]}else if("skipMine"===e)return t.filter((function(e){return e.server.instance.peerId!==n.instance.peerId}));return[]},e.prototype.instanceMatch=function(e,t){return this.containsProps(e,t)},e.prototype.methodMatch=function(e,t){return this.containsProps(e,t)},e.prototype.containsProps=function(e,t){return Object.keys(e).filter((function(t){return void 0!==e[t]&&"function"!==typeof e[t]&&"object_types"!==t&&"display_name"!==t&&"id"!==t&&"gatewayId"!==t&&"identifier"!==t&&"_"!==t[0]})).every((function(n){var r,i=e[n],o=t[n];switch(n){case"objectTypes":r=(i||[]).every((function(e){return(o||[]).includes(e)}));break;case"flags":r=Ue(o||{},i||{});break;default:r=String(i).toLowerCase()===String(o).toLowerCase()}return r}))},e.prototype.getMethods=function(e){var t=this;return void 0===e?this.repo.getMethods():this.repo.getMethods().filter((function(n){return t.methodMatch(e,n)}))},e.prototype.getMethodsForInstance=function(e){var t=this,n=this.repo.getServers().filter((function(n){return t.instanceMatch(e,n.instance)}));if(0===n.length)return[];var r={};return 1===n.length?r=n[0].methods:n.forEach((function(e){Object.keys(e.methods).forEach((function(t){var n=e.methods[t];r[n.identifier]=n}))})),Object.keys(r).map((function(e){return r[e]}))},e.prototype.getServers=function(e){var t=this,n=this.repo.getServers();return void 0===e?n.map((function(e){return{server:e,methods:[]}})):n.reduce((function(n,r){var i=Object.values(r.methods).filter((function(n){return t.methodMatch(e,n)}));return i.length>0&&n.push({server:r,methods:i}),n}),[])},e.prototype.getServerMethodsByFilterAndTarget=function(e,t){var n=this.getServers(e);return this.filterByTarget(t,n)},e}(),Ye=function(){function e(e,t,n){this.protocol=e,this.repoMethod=t,this.subscription=n}return Object.defineProperty(e.prototype,"stream",{get:function(){if(!this.repoMethod.stream)throw new Error("no stream");return this.repoMethod.stream},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arguments",{get:function(){return this.subscription.arguments||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"branchKey",{get:function(){return this.subscription.branchKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instance",{get:function(){if(!this.subscription.instance)throw new Error("no instance");return this.subscription.instance},enumerable:!0,configurable:!0}),e.prototype.close=function(){this.protocol.server.closeSingleSubscription(this.repoMethod,this.subscription)},e.prototype.push=function(e){this.protocol.server.pushDataToSingle(this.repoMethod,this.subscription,e)},e}(),Ke=function(){function e(e,t,n){this.protocol=e,this.repoMethod=t,this.requestContext=n,this.arguments=n.arguments,this.instance=n.instance}return e.prototype.accept=function(){this.protocol.server.acceptRequestOnBranch(this.requestContext,this.repoMethod,"")},e.prototype.acceptOnBranch=function(e){this.protocol.server.acceptRequestOnBranch(this.requestContext,this.repoMethod,e)},e.prototype.reject=function(e){this.protocol.server.rejectRequest(this.requestContext,this.repoMethod,e)},e}(),$e=function(){function e(e,t){var n=this;this.protocol=e,this.server=t,e.server.onSubRequest((function(e,t){return n.handleSubRequest(e,t)})),e.server.onSubAdded((function(e,t){return n.handleSubAdded(e,t)})),e.server.onSubRemoved((function(e,t){return n.handleSubRemoved(e,t)}))}return e.prototype.handleSubRequest=function(e,t){if(t&&t.streamCallbacks&&"function"===typeof t.streamCallbacks.subscriptionRequestHandler){var n=new Ke(this.protocol,t,e);t.streamCallbacks.subscriptionRequestHandler(n)}},e.prototype.handleSubAdded=function(e,t){if(t&&t.streamCallbacks&&"function"===typeof t.streamCallbacks.subscriptionAddedHandler){var n=new Ye(this.protocol,t,e);t.streamCallbacks.subscriptionAddedHandler(n)}},e.prototype.handleSubRemoved=function(e,t){if(t&&t.streamCallbacks&&"function"===typeof t.streamCallbacks.subscriptionRemovedHandler){var n=new Ye(this.protocol,t,e);t.streamCallbacks.subscriptionRemovedHandler(n)}},e}(),Qe=function(){function e(e,t,n){this.key=e,this.protocol=t,this.repoMethod=n}return e.prototype.subscriptions=function(){var e=this;return this.protocol.server.getSubscriptionList(this.repoMethod,this.key).map((function(t){return new Ye(e.protocol,e.repoMethod,t)}))},e.prototype.close=function(){this.protocol.server.closeAllSubscriptions(this.repoMethod,this.key)},e.prototype.push=function(e){this.protocol.server.pushData(this.repoMethod,e,[this.key])},e}(),Xe=function(){function e(e,t,n){this._protocol=e,this._repoMethod=t,this._server=n,this.name=this._repoMethod.definition.name}return e.prototype.branches=function(e){var t=this,n=this._protocol.server.getBranchList(this._repoMethod);return e?n.indexOf(e)>-1?new Qe(e,this._protocol,this._repoMethod):void 0:n.map((function(e){return new Qe(e,t._protocol,t._repoMethod)}))},e.prototype.branch=function(e){return this.branches(e)},e.prototype.subscriptions=function(){var e=this;return this._protocol.server.getSubscriptionList(this._repoMethod).map((function(t){return new Ye(e._protocol,e._repoMethod,t)}))},Object.defineProperty(e.prototype,"definition",{get:function(){var e,t=this._repoMethod.definition;return{accepts:t.accepts,description:t.description,displayName:t.displayName,name:t.name,objectTypes:t.objectTypes,returns:t.returns,supportsStreaming:t.supportsStreaming,flags:null===(e=t.flags)||void 0===e?void 0:e.metadata}},enumerable:!0,configurable:!0}),e.prototype.close=function(){this._protocol.server.closeAllSubscriptions(this._repoMethod),this._server.unregister(this._repoMethod.definition,!0)},e.prototype.push=function(e,t){if("string"!==typeof t&&!Array.isArray(t)&&void 0!==t)throw new Error("invalid branches should be string or string array");if("object"!==typeof e)throw new Error("Invalid arguments. Data must be an object.");this._protocol.server.pushData(this._repoMethod,e,t)},e.prototype.updateRepoMethod=function(e){this._repoMethod=e},e}(),Ze=function(){function e(e,t){this.protocol=e,this.serverRepository=t,this.invocations=0,this.currentlyUnregistering={},this.streaming=new $e(e,this),this.protocol.server.onInvoked(this.onMethodInvoked.bind(this))}return e.prototype.createStream=function(e,t,n,r,i){var o=this;return Ve(new Promise((function(n,r){if(e){var a;if(!(a="string"===typeof e?{name:""+e}:l({},e)).name)return r("The \u201cname\u201d property is required for the \u201cstreamDefinition\u201d object and must be unique. Stream definition: "+JSON.stringify(a));if(o.serverRepository.getList().some((function(e){return e.definition.name===a.name})))return r('A stream with the name "'+a.name+'" already exists! Please, provide a unique name for the stream.');a.supportsStreaming=!0,t||(t={}),"function"!==typeof t.subscriptionRequestHandler&&(t.subscriptionRequestHandler=function(e){e.accept()});var s=o.serverRepository.add({definition:a,streamCallbacks:t,protocolState:{}});o.protocol.server.createStream(s).then((function(){var e;i?(e=i,i.updateRepoMethod(s)):e=new Xe(o.protocol,s,o),s.stream=e,n(e)})).catch((function(e){s.repoId&&o.serverRepository.remove(s.repoId),r(e)}))}else r("The stream name must be unique! Please, provide either a unique string for a stream name to \u201cglue.interop.createStream()\u201d or a \u201cmethodDefinition\u201d object with a unique \u201cname\u201d property for the stream.")})),n,r)},e.prototype.register=function(e,t){var n=this;if(!e)return Promise.reject("Method definition is required. Please, provide either a unique string for a method name or a \u201cmethodDefinition\u201d object with a required \u201cname\u201d property.");if("function"!==typeof t)return Promise.reject("The second parameter must be a callback function. Method: "+("string"===typeof e?e:e.name));var r=function(e,r){return d(n,void 0,void 0,(function(){var n,i,o;return f(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),(n=t(e.args,e.instance))&&"function"===typeof n.then?[4,n]:[3,2];case 1:return i=a.sent(),r(void 0,i),[3,3];case 2:r(void 0,n),a.label=3;case 3:return[3,5];case 4:return(o=a.sent())||(o=""),r(o,o),[3,5];case 5:return[2]}}))}))};return r.userCallback=t,this.registerCore(e,r)},e.prototype.registerAsync=function(e,t){if(!e)return Promise.reject("Method definition is required. Please, provide either a unique string for a method name or a \u201cmethodDefinition\u201d object with a required \u201cname\u201d property.");if("function"!==typeof t)return Promise.reject("The second parameter must be a callback function. Method: "+("string"===typeof e?e:e.name));var n=function(e,n){try{var r=!1,i=function(e){r||n(void 0,e),r=!0},o=function(e){r||(e||(e=""),n(e,e)),r=!0},a=t(e.args,e.instance,i,o);a&&"function"===typeof a.then&&a.then(i).catch(o)}catch(s){n(s,void 0)}};return n.userCallbackAsync=t,this.registerCore(e,n)},e.prototype.unregister=function(e,t){return void 0===t&&(t=!1),d(this,void 0,void 0,(function(){var n,r;return f(this,(function(i){switch(i.label){case 0:return void 0===e?[2,Promise.reject("Please, provide either a unique string for a name or an object containing a \u201cname\u201d property.")]:"function"!==typeof e?[3,2]:[4,this.unregisterWithPredicate(e,t)];case 1:return i.sent(),[2];case 2:return void 0===(n="string"===typeof e?{name:e}:e).name?[2,Promise.reject("Method name is required. Cannot find a method if the method name is undefined!")]:(r=this.serverRepository.getList().find((function(e){return e.definition.name===n.name&&(e.definition.supportsStreaming||!1)===t})))?[4,this.removeMethodsOrStreams([r])]:[2,Promise.reject('Method with a name "'+n.name+'" does not exist or is not registered by your application!')];case 3:return i.sent(),[2]}}))}))},e.prototype.unregisterWithPredicate=function(e,t){return d(this,void 0,void 0,(function(){var n;return f(this,(function(r){switch(r.label){case 0:return(n=this.serverRepository.getList().filter((function(t){return e(t.definition)})).filter((function(e){return(e.definition.supportsStreaming||!1)===t})))&&0!==n.length?[4,this.removeMethodsOrStreams(n)]:[2,Promise.reject("Could not find a "+(t?"stream":"method")+" matching the specified condition!")];case 1:return r.sent(),[2]}}))}))},e.prototype.removeMethodsOrStreams=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.protocol.server.unregister(e).then((function(){e.repoId&&t.serverRepository.remove(e.repoId)}));n.push(r),t.addAsCurrentlyUnregistering(e.definition.name,r)})),Promise.all(n)},e.prototype.addAsCurrentlyUnregistering=function(e,t){return d(this,void 0,void 0,(function(){var n,r=this;return f(this,(function(i){return n=new Promise((function(e){return setTimeout(e,5e3)})),this.currentlyUnregistering[e]=Promise.race([t,n]).then((function(){delete r.currentlyUnregistering[e]})),[2]}))}))},e.prototype.registerCore=function(e,t){return d(this,void 0,void 0,(function(){var n,r,i,o=this;return f(this,(function(a){switch(a.label){case 0:return(n="string"===typeof e?{name:""+e}:l({},e)).name?(r=this.currentlyUnregistering[n.name])?[4,r]:[3,2]:[2,Promise.reject("Please, provide a (unique) string value for the \u201cname\u201d property in the \u201cmethodDefinition\u201d object: "+JSON.stringify(e))];case 1:a.sent(),a.label=2;case 2:return this.serverRepository.getList().some((function(e){return e.definition.name===n.name}))?[2,Promise.reject('A method with the name "'+n.name+'" already exists! Please, provide a unique name for the method.')]:n.supportsStreaming?[2,Promise.reject("When you create methods with \u201cglue.interop.register()\u201d or \u201cglue.interop.registerAsync()\u201d the property \u201csupportsStreaming\u201d cannot be \u201ctrue\u201d. If you want \u201c"+n.name+"\u201d to be a stream, please use the \u201cglue.interop.createStream()\u201d method.")]:(i=this.serverRepository.add({definition:n,theFunction:t,protocolState:{}}),[2,this.protocol.server.register(i).catch((function(e){throw(null===i||void 0===i?void 0:i.repoId)&&o.serverRepository.remove(i.repoId),e}))])}}))}))},e.prototype.onMethodInvoked=function(e,t,n){var r=this;e&&e.theFunction&&e.theFunction(n,(function(n,i){if(void 0!==n&&null!==n)if(n.message&&"string"===typeof n.message)n=n.message;else if("string"!==typeof n)try{n=JSON.stringify(n)}catch(o){n="un-stringifyable error in onMethodInvoked! Top level prop names: "+Object.keys(n)}i?("object"!==typeof i||Array.isArray(i))&&(i={_value:i}):i={},r.protocol.server.methodInvocationResult(e,t,n,i)}))},e}(),et=function(){function e(e,t,n){var r=this;this.wrapped={},this.wrapped.getMethods=function(){return e.methodsForInstance(this)},this.wrapped.getStreams=function(){return e.methodsForInstance(this).filter((function(e){return e.supportsStreaming}))},t&&this.refreshWrappedObject(t),n&&(n.loggedIn((function(){r.refresh(n)})),this.refresh(n))}return e.prototype.unwrap=function(){return this.wrapped},e.prototype.refresh=function(e){if(e){var t=null===e||void 0===e?void 0:e.resolvedIdentity,n=Object.assign({},null!==t&&void 0!==t?t:{},{peerId:null===e||void 0===e?void 0:e.peerId});this.refreshWrappedObject(n)}},e.prototype.refreshWrappedObject=function(e){var t,n,r;this.wrapped.user=e.user,this.wrapped.instance=e.instance,this.wrapped.application=null!==(t=e.application)&&void 0!==t?t:le(),this.wrapped.applicationName=e.applicationName,this.wrapped.pid=null!==(r=null!==(n=e.pid)&&void 0!==n?n:e.process)&&void 0!==r?r:Math.floor(1e10*Math.random()),this.wrapped.machine=e.machine,this.wrapped.environment=e.environment,this.wrapped.region=e.region,this.wrapped.windowId=e.windowId,this.wrapped.isLocal=!0,this.wrapped.api=e.api,this.wrapped.service=e.service,this.wrapped.peerId=e.peerId},e}(),tt=function(e){return l(l({},e),{flags:e.flags.metadata||{}})},nt=function(){function e(e,t){this.logger=e,this.API=t,this.servers={},this.methodsCount={},this.callbacks=D();var n=this.API.instance.peerId;this.myServer={id:n,methods:{},instance:this.API.instance,wrapper:this.API.unwrappedInstance},this.servers[n]=this.myServer}return e.prototype.addServer=function(e,t){this.logger.debug("adding server "+t);var n=this.servers[t];if(n)return n.id;var r=new et(this.API,e),i={id:t,methods:{},instance:r.unwrap(),wrapper:r};return this.servers[t]=i,this.callbacks.execute("onServerAdded",i.instance),t},e.prototype.removeServerById=function(e,t){var n=this,r=this.servers[e];r?(this.logger.debug("removing server "+e),Object.keys(r.methods).forEach((function(t){n.removeServerMethod(e,t)})),delete this.servers[e],this.callbacks.execute("onServerRemoved",r.instance,t)):this.logger.warn("not aware of server "+e+", my state "+JSON.stringify(Object.keys(this.servers)))},e.prototype.addServerMethod=function(e,t){var n,r=this.servers[e];if(!r)throw new Error("server does not exists");if(!r.methods[t.id]){var i=this.createMethodIdentifier(t),o=this,a={identifier:i,gatewayId:t.id,name:t.name,displayName:t.display_name,description:t.description,version:t.version,objectTypes:t.object_types||[],accepts:t.input_signature,returns:t.result_signature,supportsStreaming:"undefined"!==typeof t.flags&&t.flags.streaming,flags:null!==(n=t.flags)&&void 0!==n?n:{},getServers:function(){return o.getServersByMethod(i)}};a.object_types=a.objectTypes,a.display_name=a.displayName,a.version=a.version,r.methods[t.id]=a;var s=tt(a);return this.methodsCount[i]||(this.methodsCount[i]=0,this.callbacks.execute("onMethodAdded",s)),this.methodsCount[i]=this.methodsCount[i]+1,this.callbacks.execute("onServerMethodAdded",r.instance,s),a}},e.prototype.removeServerMethod=function(e,t){var n=this.servers[e];if(!n)throw new Error("server does not exists");var r=n.methods[t];delete n.methods[t];var i=tt(r);this.methodsCount[r.identifier]=this.methodsCount[r.identifier]-1,0===this.methodsCount[r.identifier]&&this.callbacks.execute("onMethodRemoved",i),this.callbacks.execute("onServerMethodRemoved",n.instance,i)},e.prototype.getMethods=function(){return this.extractMethodsFromServers(Object.values(this.servers)).map(tt)},e.prototype.getServers=function(){return Object.values(this.servers).map(this.hideServerMethodSystemFlags)},e.prototype.onServerAdded=function(e){var t=this.callbacks.add("onServerAdded",e),n=this.getServers().map((function(e){return e.instance}));return this.returnUnsubWithDelayedReplay(t,n,e)},e.prototype.onMethodAdded=function(e){var t=this.callbacks.add("onMethodAdded",e),n=this.getMethods();return this.returnUnsubWithDelayedReplay(t,n,e)},e.prototype.onServerMethodAdded=function(e){var t=this.callbacks.add("onServerMethodAdded",e),n=!1,r=this.getServers();return setTimeout((function(){r.forEach((function(t){var r=t.methods;Object.keys(r).forEach((function(i){n||e(t.instance,r[i])}))}))}),0),function(){n=!0,t()}},e.prototype.onMethodRemoved=function(e){return this.callbacks.add("onMethodRemoved",e)},e.prototype.onServerRemoved=function(e){return this.callbacks.add("onServerRemoved",e)},e.prototype.onServerMethodRemoved=function(e){return this.callbacks.add("onServerMethodRemoved",e)},e.prototype.getServerById=function(e){return this.hideServerMethodSystemFlags(this.servers[e])},e.prototype.reset=function(){var e,t=this;Object.keys(this.servers).forEach((function(e){t.removeServerById(e,"reset")})),this.servers=((e={})[this.myServer.id]=this.myServer,e),this.methodsCount={}},e.prototype.createMethodIdentifier=function(e){var t=void 0!==e.input_signature?e.input_signature:"",n=void 0!==e.result_signature?e.result_signature:"";return(e.name+t+n).toLowerCase()},e.prototype.getServersByMethod=function(e){var t=[];return Object.values(this.servers).forEach((function(n){Object.values(n.methods).forEach((function(r){r.identifier===e&&t.push(n.instance)}))})),t},e.prototype.returnUnsubWithDelayedReplay=function(e,t,n){var r=!1;return setTimeout((function(){t.forEach((function(e){r||n(e)}))}),0),function(){r=!0,e()}},e.prototype.hideServerMethodSystemFlags=function(e){var t={};return Object.entries(e.methods).forEach((function(e){var n=e[0],r=e[1];t[n]=tt(r)})),l(l({},e),{methods:t})},e.prototype.extractMethodsFromServers=function(e){return Object.values(e).reduce((function(e,t){return p(e,Object.values(t.methods))}),[])},e}(),rt=function(){function e(){this.nextId=0,this.methods=[]}return e.prototype.add=function(e){return e.repoId=String(this.nextId),this.nextId+=1,this.methods.push(e),e},e.prototype.remove=function(e){if("string"!==typeof e)return new TypeError("Expecting a string");this.methods=this.methods.filter((function(t){return t.repoId!==e}))},e.prototype.getById=function(e){if("string"===typeof e)return this.methods.find((function(t){return t.repoId===e}))},e.prototype.getList=function(){return this.methods.map((function(e){return e}))},e.prototype.length=function(){return this.methods.length},e.prototype.reset=function(){this.methods=[]},e}(),it="onSubscriptionRequest",ot="onSubscriptionAdded",at="onSubscriptionRemoved",st=function(){function e(e,t,n){var r=this;this.session=e,this.repository=t,this.serverRepository=n,this.ERR_URI_SUBSCRIPTION_FAILED="com.tick42.agm.errors.subscription.failure",this.callbacks=D(),this.nextStreamId=0,e.on("add-interest",(function(e){r.handleAddInterest(e)})),e.on("remove-interest",(function(e){r.handleRemoveInterest(e)}))}return e.prototype.acceptRequestOnBranch=function(e,t,n){if("string"!==typeof n&&(n=""),"object"!==typeof t.protocolState.subscriptionsMap)throw new TypeError("The streaming method is missing its subscriptions.");if(!Array.isArray(t.protocolState.branchKeyToStreamIdMap))throw new TypeError("The streaming method is missing its branches.");var r=this.getStreamId(t,n),i=e.msg.subscription_id,o={id:i,arguments:e.arguments,instance:e.instance,branchKey:n,streamId:r,subscribeMsg:e.msg};t.protocolState.subscriptionsMap[i]=o,this.session.sendFireAndForget({type:"accepted",subscription_id:i,stream_id:r}),this.callbacks.execute(ot,o,t)},e.prototype.rejectRequest=function(e,t,n){"string"!==typeof n&&(n=""),this.sendSubscriptionFailed("Subscription rejected by user. "+n,e.msg.subscription_id)},e.prototype.pushData=function(e,t,n){var r=this;if("object"===typeof e&&Array.isArray(e.protocolState.branchKeyToStreamIdMap)){if("object"!==typeof t)throw new Error("Invalid arguments. Data must be an object.");"string"===typeof n?n=[n]:(!Array.isArray(n)||n.length<=0)&&(n=[]),e.protocolState.branchKeyToStreamIdMap.filter((function(e){return!n||0===n.length||n.indexOf(e.key)>=0})).map((function(e){return e.streamId})).forEach((function(e){var n={type:"publish",stream_id:e,data:t};r.session.sendFireAndForget(n)}))}},e.prototype.pushDataToSingle=function(e,t,n){if("object"!==typeof n)throw new Error("Invalid arguments. Data must be an object.");var r={type:"post",subscription_id:t.id,data:n};this.session.sendFireAndForget(r)},e.prototype.closeSingleSubscription=function(e,t){e.protocolState.subscriptionsMap&&delete e.protocolState.subscriptionsMap[t.id];var n={type:"drop-subscription",subscription_id:t.id,reason:"Server dropping a single subscription"};this.session.sendFireAndForget(n),t.instance,this.callbacks.execute(at,t,e)},e.prototype.closeMultipleSubscriptions=function(e,t){var n=this;if("object"===typeof e&&"object"===typeof e.protocolState.subscriptionsMap&&e.protocolState.subscriptionsMap){var r=e.protocolState.subscriptionsMap,i=Object.keys(r).map((function(e){return r[e]}));"string"===typeof t&&(i=i.filter((function(e){return e.branchKey===t}))),i.forEach((function(e){delete r[e.id];var t={type:"drop-subscription",subscription_id:e.id,reason:"Server dropping all subscriptions on stream_id: "+e.streamId};n.session.sendFireAndForget(t)}))}},e.prototype.getSubscriptionList=function(e,t){if("object"!==typeof e)return[];if(!e.protocolState.subscriptionsMap)return[];var n=e.protocolState.subscriptionsMap,r=Object.keys(n).map((function(e){return n[e]}));return"string"!==typeof t?r:r.filter((function(e){return e.branchKey===t}))},e.prototype.getBranchList=function(e){if("object"!==typeof e)return[];if(!e.protocolState.subscriptionsMap)return[];var t=e.protocolState.subscriptionsMap,n=Object.keys(t).map((function(e){return t[e]})),r=[];return n.forEach((function(e){var t="";"object"===typeof e&&"string"===typeof e.branchKey&&(t=e.branchKey),-1===r.indexOf(t)&&r.push(t)})),r},e.prototype.onSubAdded=function(e){this.onSubscriptionLifetimeEvent(ot,e)},e.prototype.onSubRequest=function(e){this.onSubscriptionLifetimeEvent(it,e)},e.prototype.onSubRemoved=function(e){this.onSubscriptionLifetimeEvent(at,e)},e.prototype.handleRemoveInterest=function(e){var t=this.serverRepository.getById(e.method_id);if("string"===typeof e.subscription_id&&"object"===typeof t&&t.protocolState.subscriptionsMap&&"object"===typeof t.protocolState.subscriptionsMap[e.subscription_id]){var n=t.protocolState.subscriptionsMap[e.subscription_id];delete t.protocolState.subscriptionsMap[e.subscription_id],this.callbacks.execute(at,n,t)}},e.prototype.onSubscriptionLifetimeEvent=function(e,t){this.callbacks.add(e,t)},e.prototype.getNextStreamId=function(){return this.nextStreamId+++""},e.prototype.handleAddInterest=function(e){var t=this.repository.getServerById(e.caller_id).instance,n={msg:e,arguments:e.arguments_kv||{},instance:t},r=this.serverRepository.getById(e.method_id);if(void 0!==r)r.protocolState.subscriptionsMap&&r.protocolState.subscriptionsMap[e.subscription_id]?this.sendSubscriptionFailed("A subscription with id "+e.subscription_id+" already exists.",e.subscription_id):this.callbacks.execute(it,n,r);else{var i="No method with id "+e.method_id+" on this server.";this.sendSubscriptionFailed(i,e.subscription_id)}},e.prototype.sendSubscriptionFailed=function(e,t){var n={type:"error",reason_uri:this.ERR_URI_SUBSCRIPTION_FAILED,reason:e,request_id:t};this.session.sendFireAndForget(n)},e.prototype.getStreamId=function(e,t){if("string"!==typeof t&&(t=""),!e.protocolState.branchKeyToStreamIdMap)throw new Error("streaming "+e.definition.name+" method without protocol state");var n=e.protocolState.branchKeyToStreamIdMap.filter((function(e){return e.key===t}))[0],r=n?n.streamId:void 0;return"string"===typeof r&&""!==r||(r=this.getNextStreamId(),e.protocolState.branchKeyToStreamIdMap.push({key:t,streamId:r})),r},e}(),ut=function(){function e(e,t,n,r){var i=this;this.session=e,this.clientRepository=t,this.serverRepository=n,this.logger=r,this.callbacks=D(),this.streaming=new st(e,t,n),this.session.on("invoke",(function(e){return i.handleInvokeMessage(e)}))}return e.prototype.createStream=function(e){return e.protocolState.subscriptionsMap={},e.protocolState.branchKeyToStreamIdMap=[],this.register(e,!0)},e.prototype.register=function(e,t){var n,r=this,i=e.definition,o=Object.assign({},{metadata:null!==(n=i.flags)&&void 0!==n?n:{}},{streaming:t||!1}),a={type:"register",methods:[{id:e.repoId,name:i.name,display_name:i.displayName,description:i.description,version:i.version,flags:o,object_types:i.objectTypes||i.object_types,input_signature:i.accepts,result_signature:i.returns,restrictions:void 0}]};return this.session.send(a,{methodId:e.repoId}).then((function(){r.logger.debug("registered method "+e.definition.name+" with id "+e.repoId)})).catch((function(t){throw r.logger.warn("failed to register method "+e.definition.name+" with id "+e.repoId+" - "+JSON.stringify(t)),t}))},e.prototype.onInvoked=function(e){this.callbacks.add("onInvoked",e)},e.prototype.methodInvocationResult=function(e,t,n,r){var i;i=n||""===n?{type:"error",request_id:t,reason_uri:"agm.errors.client_error",reason:n,context:r,peer_id:void 0}:{type:"yield",invocation_id:t,peer_id:this.session.peerId,result:r,request_id:void 0},this.session.sendFireAndForget(i)},e.prototype.unregister=function(e){return d(this,void 0,void 0,(function(){var t;return f(this,(function(n){switch(n.label){case 0:return t={type:"unregister",methods:[e.repoId]},[4,this.session.send(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.getBranchList=function(e){return this.streaming.getBranchList(e)},e.prototype.getSubscriptionList=function(e,t){return this.streaming.getSubscriptionList(e,t)},e.prototype.closeAllSubscriptions=function(e,t){this.streaming.closeMultipleSubscriptions(e,t)},e.prototype.pushData=function(e,t,n){this.streaming.pushData(e,t,n)},e.prototype.pushDataToSingle=function(e,t,n){this.streaming.pushDataToSingle(e,t,n)},e.prototype.closeSingleSubscription=function(e,t){this.streaming.closeSingleSubscription(e,t)},e.prototype.acceptRequestOnBranch=function(e,t,n){this.streaming.acceptRequestOnBranch(e,t,n)},e.prototype.rejectRequest=function(e,t,n){this.streaming.rejectRequest(e,t,n)},e.prototype.onSubRequest=function(e){this.streaming.onSubRequest(e)},e.prototype.onSubAdded=function(e){this.streaming.onSubAdded(e)},e.prototype.onSubRemoved=function(e){this.streaming.onSubRemoved(e)},e.prototype.handleInvokeMessage=function(e){var t=e.invocation_id,n=e.caller_id,r=e.method_id,i=e.arguments_kv,o=this.serverRepository.getList().filter((function(e){return e.repoId===r}))[0];if(void 0!==o){var a={args:i,instance:this.clientRepository.getServerById(n).instance};this.callbacks.execute("onInvoked",o,t,a)}},e}(),ct=function(){function e(e,t){this.repository=e,this.subscriptionData=t}return Object.defineProperty(e.prototype,"requestArguments",{get:function(){return this.subscriptionData.params.arguments||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){var e=this;return this.subscriptionData.trackedServers.filter((function(e){return e.subscriptionId})).map((function(t){return e.repository.getServerById(t.serverId).instance}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverInstance",{get:function(){return this.servers[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stream",{get:function(){return this.subscriptionData.method},enumerable:!0,configurable:!0}),e.prototype.onData=function(e){if("function"!==typeof e)throw new TypeError("The data callback must be a function.");this.subscriptionData.handlers.onData.push(e),1===this.subscriptionData.handlers.onData.length&&this.subscriptionData.queued.data.length>0&&this.subscriptionData.queued.data.forEach((function(t){e(t)}))},e.prototype.onClosed=function(e){if("function"!==typeof e)throw new TypeError("The callback must be a function.");this.subscriptionData.handlers.onClosed.push(e)},e.prototype.onFailed=function(e){},e.prototype.onConnected=function(e){if("function"!==typeof e)throw new TypeError("The callback must be a function.");this.subscriptionData.handlers.onConnected.push(e)},e.prototype.close=function(){this.subscriptionData.close()},e.prototype.setNewSubscription=function(e){this.subscriptionData=e},e}(),lt="awaitingAccept",dt="subscribed",ft="Subscription failed.",pt="ClientInitiated",ht=function(){function e(e,t,n){var r=this;this.session=e,this.repository=t,this.logger=n,this.subscriptionsList={},this.subscriptionIdToLocalKeyMap={},this.nextSubLocalKey=0,this.handleErrorSubscribing=function(e){var t=e._tag,n=t.subLocalKey,i=r.subscriptionsList[n];if("object"===typeof i&&(i.trackedServers=i.trackedServers.filter((function(e){return e.serverId!==t.serverId})),i.trackedServers.length<=0)){if(clearTimeout(i.timeoutId),i.status===lt){var o="string"===typeof e.reason&&""!==e.reason?' Publisher said "'+e.reason+'".':" No reason given.",a="object"===typeof i.params.arguments?JSON.stringify(i.params.arguments):"{}";i.error({message:"Subscription rejected."+o+" Called with:"+a,called_with:i.params.arguments,method:i.method})}else i.status===dt&&r.callOnClosedHandlers(i);delete r.subscriptionsList[n]}},this.handleSubscribed=function(e){var t=e._tag.subLocalKey,n=r.subscriptionsList[t];if("object"===typeof n){var i=e._tag.serverId,o=n.trackedServers.filter((function(e){return e.serverId===i}))[0];if("object"===typeof o){o.subscriptionId=e.subscription_id,r.subscriptionIdToLocalKeyMap[e.subscription_id]=t;var a=n.status===lt;if(n.status=dt,a){var s=!1,u=n.subscription;u?(u.setNewSubscription(n),n.success(u),s=!0):(u=new ct(r.repository,n),n.subscription=u,n.success(u));for(var c=0,l=n.handlers.onConnected;c<l.length;c++){var d=l[c];try{d(u.serverInstance,s)}catch(f){}}}}}},this.handleEventData=function(e){var t=r.subscriptionIdToLocalKeyMap[e.subscription_id];if("undefined"!==typeof t){var n=r.subscriptionsList[t];if("object"===typeof n){var i=n.trackedServers.filter((function(t){return t.subscriptionId===e.subscription_id}));if(1===i.length){var o=e.oob,a=i[0].serverId,s=function(){return{data:e.data,server:r.repository.getServerById(a).instance,requestArguments:n.params.arguments,message:void 0,private:o}},u=n.handlers.onData,c=n.queued.data;u.length>0?u.forEach((function(e){"function"===typeof e&&e(s())})):c.push(s())}}}},this.handleSubscriptionCancelled=function(e){var t=r.subscriptionIdToLocalKeyMap[e.subscription_id];if("undefined"!==typeof t){var n=r.subscriptionsList[t];if("object"===typeof n){var i=n.trackedServers.length-1;n.trackedServers=n.trackedServers.filter((function(t){return t.subscriptionId!==e.subscription_id||(n.queued.closers.push(t.serverId),!1)})),n.trackedServers.length===i&&(n.trackedServers.length<=0&&(clearTimeout(n.timeoutId),r.callOnClosedHandlers(n),delete r.subscriptionsList[t]),delete r.subscriptionIdToLocalKeyMap[e.subscription_id])}}},e.on("subscribed",this.handleSubscribed),e.on("event",this.handleEventData),e.on("subscription-cancelled",this.handleSubscriptionCancelled)}return e.prototype.subscribe=function(e,t,n,r,i,o){var a=this;if(0!==n.length){var s=this.getNextSubscriptionLocalKey(),u=this.registerSubscription(s,e,t,r,i,t.methodResponseTimeout||1e4,o);"object"===typeof u?n.forEach((function(n){var r=n.server.id,i=n.methods.find((function(t){return t.name===e.name}));if(i){u.trackedServers.push({serverId:r,subscriptionId:void 0});var o={type:"subscribe",server_id:r,method_id:i.gatewayId,arguments_kv:t.arguments};a.session.send(o,{serverId:r,subLocalKey:s}).then((function(e){return a.handleSubscribed(e)})).catch((function(e){return a.handleErrorSubscribing(e)}))}else a.logger.error("can not find method "+e.name+" for target "+n.server.id)})):i({method:e,called_with:t.arguments,message:ft+" Unable to register the user callbacks."})}else i({method:e,called_with:t.arguments,message:ft+" No available servers matched the target params."})},e.prototype.drainSubscriptions=function(){var e=Object.values(this.subscriptionsList);return this.subscriptionsList={},this.subscriptionIdToLocalKeyMap={},e},e.prototype.getNextSubscriptionLocalKey=function(){var e=this.nextSubLocalKey;return this.nextSubLocalKey+=1,e},e.prototype.registerSubscription=function(e,t,n,r,i,o,a){var s=this,u={localKey:e,status:lt,method:t,params:n,success:r,error:i,trackedServers:[],handlers:{onData:(null===a||void 0===a?void 0:a.handlers.onData)||[],onClosed:(null===a||void 0===a?void 0:a.handlers.onClosed)||[],onConnected:(null===a||void 0===a?void 0:a.handlers.onConnected)||[]},queued:{data:[],closers:[]},timeoutId:void 0,close:function(){return s.closeSubscription(e)},subscription:null===a||void 0===a?void 0:a.subscription};return a||(n.onData&&u.handlers.onData.push(n.onData),n.onClosed&&u.handlers.onClosed.push(n.onClosed),n.onConnected&&u.handlers.onConnected.push(n.onConnected)),this.subscriptionsList[e]=u,u.timeoutId=setTimeout((function(){if(void 0!==s.subscriptionsList[e]){var r=s.subscriptionsList[e];r.status===lt?(i({method:t,called_with:n.arguments,message:ft+" Subscription attempt timed out after "+o+" ms."}),delete s.subscriptionsList[e]):r.status===dt&&r.trackedServers.length>0&&(r.trackedServers=r.trackedServers.filter((function(e){return"undefined"!==typeof e.subscriptionId})),delete r.timeoutId,r.trackedServers.length<=0&&(s.callOnClosedHandlers(r),delete s.subscriptionsList[e]))}}),o),u},e.prototype.callOnClosedHandlers=function(e,t){var n,r=e.queued.closers.length,i=r>0?e.queued.closers[r-1]:null;void 0!==i&&"string"===typeof i&&(n=this.repository.getServerById(i).instance),e.handlers.onClosed.forEach((function(r){"function"===typeof r&&r({message:t||"ServerInitiated",requestArguments:e.params.arguments||{},server:n,stream:e.method})}))},e.prototype.closeSubscription=function(e){var t=this,n=this.subscriptionsList[e];"object"===typeof n&&(n.trackedServers.forEach((function(e){"undefined"!==typeof e.subscriptionId&&(n.queued.closers.push(e.serverId),t.session.sendFireAndForget({type:"unsubscribe",subscription_id:e.subscriptionId,reason_uri:"",reason:pt}),delete t.subscriptionIdToLocalKeyMap[e.subscriptionId])})),n.trackedServers=[],this.callOnClosedHandlers(n,pt),delete this.subscriptionsList[e])},e}(),yt=function(){function e(e,t,n){var r=this;this.session=e,this.repository=t,this.logger=n,e.on("peer-added",(function(e){return r.handlePeerAdded(e)})),e.on("peer-removed",(function(e){return r.handlePeerRemoved(e)})),e.on("methods-added",(function(e){return r.handleMethodsAddedMessage(e)})),e.on("methods-removed",(function(e){return r.handleMethodsRemovedMessage(e)})),this.streaming=new ht(e,t,n)}return e.prototype.subscribe=function(e,t,n,r,i,o){this.streaming.subscribe(e,t,n,r,i,o)},e.prototype.invoke=function(e,t,n,r){var i=this,o=r.id,a={type:"call",server_id:o,method_id:t.gatewayId,arguments_kv:n};return this.session.send(a,{invocationId:e,serverId:o}).then((function(e){return i.handleResultMessage(e)})).catch((function(e){return i.handleInvocationError(e)}))},e.prototype.drainSubscriptions=function(){return this.streaming.drainSubscriptions()},e.prototype.handlePeerAdded=function(e){var t=e.new_peer_id,n=e.identity,r=!e.meta||e.meta.local,i=Number(n.process),o={machine:n.machine,pid:isNaN(i)?n.process:i,instance:n.instance,application:n.application,applicationName:n.applicationName,environment:n.environment,region:n.region,user:n.user,windowId:n.windowId,peerId:t,api:n.api,isLocal:r};this.repository.addServer(o,t)},e.prototype.handlePeerRemoved=function(e){var t=e.removed_id,n=e.reason;this.repository.removeServerById(t,n)},e.prototype.handleMethodsAddedMessage=function(e){var t=this,n=e.server_id;e.methods.forEach((function(e){t.repository.addServerMethod(n,e)}))},e.prototype.handleMethodsRemovedMessage=function(e){var t=this,n=e.server_id,r=e.methods,i=this.repository.getServerById(n);Object.keys(i.methods).forEach((function(e){var o=i.methods[e];r.indexOf(o.gatewayId)>-1&&t.repository.removeServerMethod(n,e)}))},e.prototype.handleResultMessage=function(e){var t=e._tag.invocationId,n=e.result,r=e._tag.serverId;return{invocationId:t,result:n,instance:this.repository.getServerById(r).instance,status:ze.Success,message:""}},e.prototype.handleInvocationError=function(e){if(this.logger.debug("handle invocation error "+JSON.stringify(e)),"_tag"in e){var t=e._tag.invocationId,n=e._tag.serverId,r=this.repository.getServerById(n),i=e.reason;return{invocationId:t,result:e.context,instance:r.instance,status:ze.Error,message:i}}return{invocationId:"",message:e.message,status:ze.Error,error:e}},e}();function gt(e,t,n,r,i,o){var a,s=i.logger.subLogger("gw3-protocol"),u=new Promise((function(e){a=e})),c=t.domain("agm",["subscribed"]),l=new ut(c,n,r,s.subLogger("server")),d=new yt(c,n,s.subLogger("client"));return c.onJoined((function(i){n.addServer(e,t.peerId),i?function(){s.info("reconnected - will replay registered methods and subscriptions");for(var e=0,t=d.drainSubscriptions();e<t.length;e++){var n=t[e],i=n.method,a=Object.assign({},n.params);s.info("trying to re-subscribe to method "+i.name),o.client.subscribe(i,a,void 0,void 0,n)}var u=r.getList();r.reset();for(var c=0,l=u;c<l.length;c++){var f=l[c],p=f.definition;s.info("re-publishing method "+p.name),f.stream?o.server.createStream(p,f.streamCallbacks,void 0,void 0,f.stream):f.theFunction&&f.theFunction.userCallback?o.register(p,f.theFunction.userCallback):f.theFunction&&f.theFunction.userCallbackAsync&&o.registerAsync(p,f.theFunction.userCallbackAsync)}}():a&&(a({client:d,server:l}),a=void 0)})),c.onLeft((function(){n.reset()})),c.join(),u}var vt=function(){function e(e){var t=this;if("undefined"===typeof e)throw new Error("configuration is required");if("undefined"===typeof e.connection)throw new Error("configuration.connections is required");var n,r=e.connection;if("number"!==typeof e.methodResponseTimeout&&(e.methodResponseTimeout=3e4),"number"!==typeof e.waitTimeoutMs&&(e.waitTimeoutMs=3e4),this.unwrappedInstance=new et(this,void 0,r),this.instance=this.unwrappedInstance.unwrap(),this.clientRepository=new nt(e.logger.subLogger("cRep"),this),this.serverRepository=new rt,3!==r.protocolVersion)throw new Error("protocol "+r.protocolVersion+" not supported");n=gt(this.instance,r,this.clientRepository,this.serverRepository,e,this),this.readyPromise=n.then((function(n){return t.protocol=n,t.client=new Je(t.protocol,t.clientRepository,t.instance,e),t.server=new Ze(t.protocol,t.serverRepository),t}))}return e.prototype.ready=function(){return this.readyPromise},e.prototype.serverRemoved=function(e){return this.client.serverRemoved(e)},e.prototype.serverAdded=function(e){return this.client.serverAdded(e)},e.prototype.serverMethodRemoved=function(e){return this.client.serverMethodRemoved(e)},e.prototype.serverMethodAdded=function(e){return this.client.serverMethodAdded(e)},e.prototype.methodRemoved=function(e){return this.client.methodRemoved(e)},e.prototype.methodAdded=function(e){return this.client.methodAdded(e)},e.prototype.methodsForInstance=function(e){return this.client.methodsForInstance(e)},e.prototype.methods=function(e){return this.client.methods(e)},e.prototype.servers=function(e){return this.client.servers(e)},e.prototype.subscribe=function(e,t,n,r){return this.client.subscribe(e,t,n,r)},e.prototype.createStream=function(e,t,n,r){return this.server.createStream(e,t,n,r)},e.prototype.unregister=function(e){return this.server.unregister(e)},e.prototype.registerAsync=function(e,t){return this.server.registerAsync(e,t)},e.prototype.register=function(e,t){return this.server.register(e,t)},e.prototype.invoke=function(e,t,n,r,i,o){return this.client.invoke(e,t,n,r,i,o)},e.prototype.waitForMethod=function(e){var t=new H,n=this.client.methodAdded((function(r){r.name===e&&(n(),t.resolve(r))}));return t.promise},e}(),mt=["subscribed","success"],wt=function(){function e(e,t){var n=this;this.publish=function(e,t,r){var i=r||{},o=i.routingKey,a=i.target,s=n.removeEmptyValues({type:"publish",topic:e,data:t,peer_id:n.peerId,routing_key:o,target_identity:a});n.session.send(s)},this.subscribe=function(e,t,r){return new Promise((function(i,o){var a=r||{},s=a.routingKey,u=a.target,c=n.removeEmptyValues({type:"subscribe",topic:e,peer_id:n.peerId,routing_key:s,source:u});n.session.send(c).then((function(r){var o=r.subscription_id;n.subscriptions.push({subscription_id:o,topic:e,callback:t,source:u}),i({unsubscribe:function(){return n.session.send({type:"unsubscribe",subscription_id:o,peer_id:n.peerId}),n.subscriptions=n.subscriptions.filter((function(e){return e.subscription_id!==o})),Promise.resolve()}})})).catch((function(e){return o(e)}))}))},this.watchOnEvent=function(){n.session.on("event",(function(e){var t=e.data,r=e.subscription_id,i=e["publisher-identity"],o=n.subscriptions.find((function(e){return e.subscription_id===r}));o&&(o.source?n.keysMatch(o.source,i)&&o.callback(t,o.topic,i):o.callback(t,o.topic,i))}))},this.connection=e,this.logger=t,this.peerId=e.peerId,this.subscriptions=[],this.session=e.domain("bus",mt),this.readyPromise=this.session.join(),this.readyPromise.then((function(){n.watchOnEvent()}))}return e.prototype.ready=function(){return this.readyPromise},e.prototype.removeEmptyValues=function(e){var t={};return Object.keys(e).forEach((function(n){void 0!==e[n]&&null!==e[n]&&(t[n]=e[n])})),t},e.prototype.keysMatch=function(e,t){var n=Object.keys(e),r=!0;return n.forEach((function(n){e[n]!==t[n]&&(r=!1)})),r},e}(),bt=function e(t,n){var i,o=z.getGDMajorVersion(),a=Promise.resolve();if(o){if(o<3)throw new Error("GD v2 is not supported. Use v4 of the API to run in that context.");o>=3&&(i=window.glue42gd,a=window.gdPreloadPromise||a)}var s,u,c,l,p,h,y,g=V("glue"),v=function(e,t,n){var i,o,a,s,u,c;if(z.isNode()){var l=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})._GD_STARTING_CONTEXT_;if(l)try{c=JSON.parse(l)}catch(g){}}function d(){if(e.application)return e.application;if(n)return n.applicationName;var t=le();return z.isNode()?c?c.applicationConfig.name:"NodeJS"+t:"undefined"!==typeof window&&"undefined"!==typeof document?document.title+" ("+t+")":t}var f=function(){var i,o,a,s,u,l,f,p,h,y,g=e.gateway,v=null!==(i=null===g||void 0===g?void 0:g.protocolVersion)&&void 0!==i?i:3,m=null===g||void 0===g?void 0:g.reconnectInterval,w=null===g||void 0===g?void 0:g.reconnectAttempts,b=null===g||void 0===g?void 0:g.ws,_=null===g||void 0===g?void 0:g.sharedWorker,k=null===g||void 0===g?void 0:g.inproc,S=null!==(o=null===g||void 0===g?void 0:g.webPlatform)&&void 0!==o?o:void 0;n&&(b=n.gwURL),z.isNode()&&c&&c.gwURL&&(b=c.gwURL),b||_||k||(b="ws://localhost:8385");var C=d(),I=C;"undefined"!==typeof n?(f=n.windowId,p=n.pid,n.env&&(h=n.env.env,y=n.env.region),I=null!==(a=n.application)&&void 0!==a?a:"glue-app",l=n.appInstanceId):z.isNode()&&(p=r.pid,c&&(h=c.env,y=c.region,l=c.instanceId));var x=null!==(u=null===(s=e.gateway)||void 0===s?void 0:s.replaySpecs)&&void 0!==u?u:[];return x.push(Oe),{identity:{application:I,applicationName:C,windowId:f,instance:l,process:p,region:y,environment:h,api:t.version||Re},reconnectInterval:m,ws:b,sharedWorker:_,webPlatform:S,inproc:k,protocolVersion:v,reconnectAttempts:w,replaySpecs:x}}(),p=d();if("undefined"!==typeof window){var h=window,y=h.htmlContainer?h.htmlContainer.containerName+"."+h.htmlContainer.application:null===(i=null===h||void 0===h?void 0:h.glue42gd)||void 0===i?void 0:i.application;y&&(p=y)}return{bus:null!==(o=e.bus)&&void 0!==o&&o,application:p,auth:function(){var t,n,r;return"string"===typeof e.auth?{token:e.auth}:e.auth?e.auth:z.isNode()&&c&&c.gwToken?{gatewayToken:c.gwToken}:(null===(t=e.gateway)||void 0===t?void 0:t.webPlatform)||(null===(n=e.gateway)||void 0===n?void 0:n.inproc)||(null===(r=e.gateway)||void 0===r?void 0:r.sharedWorker)?{username:"glue42",password:"glue42"}:void 0}(),logger:function(){var t,r,i,o=e.logger,a="warn";return o||(o=a),n&&(i=n.consoleLogLevel),"string"===typeof o?{console:null!==i&&void 0!==i?i:o,publish:a}:{console:null!==(t=null!==i&&void 0!==i?i:o.console)&&void 0!==t?t:a,publish:null!==(r=o.publish)&&void 0!==r?r:a}}(),connection:f,metrics:null===(a=e.metrics)||void 0===a||a,contexts:null===(s=e.contexts)||void 0===s||s,version:t.version||Re,libs:null!==(u=t.libs)&&void 0!==u?u:[],customLogger:e.customLogger}}(t=t||{},n=n||{},i),m={};function w(t,n,r){(y=c.canPublish("trace"))&&c.trace("registering "+t+" module");var i=function(){n.initTime=r.stop(),n.initEndTime=r.endTime,n.marks=r.marks,y&&c.trace(t+" is ready - "+(r.endTime-r.startTime))};n.initStartTime=r.startTime,n.ready?n.ready().then((function(){i()})):i(),Array.isArray(t)||(t=[t]),t.forEach((function(t){m[t]=n,e[t]=n}))}function b(){var e,t,n,r,o=V("metrics"),a=v.metrics,u=null===i||void 0===i?void 0:i.getMetricsPublishingEnabled,d=v.connection.identity,f=u||function(){return!0},p=null!==(e="boolean"!==typeof a&&a.disableAutoAppSystem)&&void 0!==e&&e;return w("metrics",l=F({connection:a?s:void 0,logger:c.subLogger("metrics"),canUpdateMetric:f,system:"Glue42",service:null!==(t=null===d||void 0===d?void 0:d.service)&&void 0!==t?t:"metrics-service",instance:null!==(r=null!==(n=null===d||void 0===d?void 0:d.instance)&&void 0!==n?n:null===d||void 0===d?void 0:d.windowId)&&void 0!==r?r:le(),disableAutoAppSystem:p,pagePerformanceMetrics:"boolean"!==typeof a?null===a||void 0===a?void 0:a.pagePerformanceMetrics:void 0}),o),Promise.resolve()}function _(){var e=V("interop"),t={connection:s,logger:c.subLogger("interop")};return u=new vt(t),me.Interop=u,w(["interop","agm"],u,e),Promise.resolve()}function k(){var e=v.activities&&3===s.protocolVersion;if(v.contexts||e){var t=V("contexts");return w("contexts",p=new Ge({connection:s,logger:c.subLogger("contexts")}),t),p}var n=s.replayer;n&&n.drain(Oe.name)}function S(){return d(this,void 0,void 0,(function(){var e;return f(this,(function(t){return v.bus?(e=V("bus"),w("bus",h=new wt(s,c.subLogger("bus")),e),[2,Promise.resolve()]):[2,Promise.resolve()]}))}))}function C(e){try{return e.forEach((function(e){!function(e,t){var n=V(e),r=t(m);r&&w(e,r,n)}(e.name,e.create)})),Promise.resolve()}catch(t){return Promise.reject(t)}}return a.then((function(){var e,t=V("logger");return(c=new me(""+(null===(e=v.connection.identity)||void 0===e?void 0:e.application),void 0,v.customLogger)).consoleLevel(v.logger.console),c.publishLevel(v.logger.publish),c.canPublish("debug")&&c.debug("initializing glue..."),w("logger",c,t),Promise.resolve(void 0)})).then((function(){var e=V("connection");s=new ge(v.connection,c.subLogger("connection"));var t=Promise.resolve(v.auth);return v.connection&&!v.auth&&(t=i?i.getGWToken().then((function(e){return{gatewayToken:e}})):Promise.reject("You need to provide auth information")),t.then((function(t){var n;if(e.mark("auth-promise-resolved"),"[object Object]"!==Object.prototype.toString.call(t))throw new Error("Invalid auth object - "+JSON.stringify(t));return n=t,s.login(n)})).then((function(){return w("connection",s,e),v})).catch((function(e){throw s&&s.logout(),e}))})).then((function(){return Promise.all([b(),_(),k(),S()])})).then((function(){return u.readyPromise})).then((function(){return C(v.libs||[])})).then((function(){var e=Object.keys(m).map((function(e){var t=m[e];return t.ready?t.ready():Promise.resolve()}));return Promise.all(e)})).then((function(){var e={coreVersion:Re,version:v.version};g.stop();var r={feedback:function(e){u&&u.invoke("T42.ACS.Feedback",e,"best")},info:e,logger:c,interop:u,agm:u,connection:s,metrics:l,contexts:p,bus:h,version:v.version,userConfig:t,done:function(){return null===c||void 0===c||c.info("done called by user..."),s.logout()}};if(r.performance={get glueVer(){return v.version},get glueConfig(){return JSON.stringify(t)},get browser(){return window.performance.timing.toJSON()},get memory(){return window.performance.memory},get initTimes(){var e=G;return Object.keys(e).map((function(t){var n=e[t];return{name:t,duration:n.endTime-n.startTime,marks:n.marks}}))}},Object.keys(m).forEach((function(e){var t=m[e];r[e]=t})),r.config={},Object.keys(v).forEach((function(e){r.config[e]=v[e]})),n&&n.extOptions&&Object.keys(n.extOptions).forEach((function(e){r.config[e]=null===n||void 0===n?void 0:n.extOptions[e]})),(null===n||void 0===n?void 0:n.enrichGlue)&&n.enrichGlue(r),i&&i.updatePerfData&&i.updatePerfData(r.performance),r.agm){var o=function(e,t,n){return function(){return r.logger.warn("glue.js - 'glue.agm."+t+"' method is deprecated, use 'glue.interop."+n+"' instead."),e.apply(r.agm,arguments)}},a=r.agm;a.method_added=o(r.agm.methodAdded,"method_added","methodAdded"),a.method_removed=o(r.agm.methodRemoved,"method_removed","methodRemoved"),a.server_added=o(r.agm.serverAdded,"server_added","serverAdded"),a.server_method_aded=o(r.agm.serverMethodAdded,"server_method_aded","serverMethodAdded"),a.server_method_removed=o(r.agm.serverMethodRemoved,"server_method_removed","serverMethodRemoved")}return r})).catch((function(e){return Promise.reject({err:e,libs:m})}))};"undefined"!==typeof window&&(window.GlueCore=bt),bt.version=Re,bt.default=bt;var _t=function(){function e(e){this._id=e}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype._update=function(e){if(e._id!==this._id)throw Error("Can not update from entity with different id.");this._updateCore(e)},e.prototype._updateCore=function(e){},e.prototype._beforeDelete=function(e){},e}();function kt(e){return"string"===typeof e}function St(e){return Array.isArray?Array.isArray(e):"[object Array]"===toString.call(e)}function Ct(e){return"undefined"===typeof e}function It(e){return!e||"undefined"===typeof e}function xt(e){return!!(e&&e.constructor&&e.call&&e.apply)}function At(e,t){"undefined"!==typeof e&&t(e)}var Tt=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o._name=t,o._description=i,o._ownerWindow=n,o._helperWindows=r||[],o}return i(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this._description},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"helperWindows",{get:function(){var e=this;return this._helperWindows.map((function(t){return e.covertToWindowDef(t)}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ownerWindow",{get:function(){return this.covertToWindowDef(this._ownerWindow)},enumerable:!0,configurable:!0}),t.prototype.initiate=function(e,t,n){return this._manager.initiate(this._name,e,t,n)},t.prototype._updateCore=function(t){var n=this;e.prototype._updateCore.call(this,t),At(t._description,(function(e){return n._description=e})),At(t._ownerWindow,(function(e){return n._ownerWindow=e})),At(t._helperWindows,(function(e){return n._helperWindows=e}))},t.prototype.covertToWindowDef=function(e){var t,n,r,i;return{type:null===(n=null===(t=e)||void 0===t?void 0:t.id)||void 0===n?void 0:n.type,name:null===(i=null===(r=e)||void 0===r?void 0:r.id)||void 0===i?void 0:i.name}},t}(_t),Et=function(e){function t(t,n){var r=e.call(this,t)||this;return r._name=t,r._appByWindowTypeGetter=n,r}return i(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this._appByWindowTypeGetter(this._name)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"windows",{get:function(){return this._manager.getWindows({type:this._name})},enumerable:!0,configurable:!0}),t.prototype.create=function(e,t){var n=Object.assign({type:this.name,name:this.name,isIndependent:!1},t);return this._manager.createWindow(e,n)},t}(_t),Pt=function(e,t){this.entity=e,this.context=t},Mt=function(e){this.type=e},Ot=function(e){function t(t,n){var r=e.call(this,jt.StatusChange)||this;return r.newStatus=t,r.oldStatus=n,r}return i(t,e),t}(Mt),Rt=function(e){function t(t,n,r){var i=e.call(this,jt.ActivityContextChange)||this;return i.context="string"===typeof t?JSON.parse(t):t,i.updated=n,i.removed=r,i}return i(t,e),t}(Mt),jt=function(){function e(){}return e.Added="added",e.Removed="removed",e.Updated="updated",e.Closed="closed",e.StatusChange="statusChange",e.ActivityContextChange="activityContextUpdate",e.ActivityWindowEvent="activityWindowEvent",e.ActivityWindowJoinedActivity="joined",e.ActivityWindowLeftActivity="left",e}(),Lt=function(){function e(){}return e.Created="created",e.Started="started",e.Destroyed="destroyed",e}(),Nt=function(){function e(e){this._activity=e}return e.prototype.register=function(t,n){this._ensureHasAgm(),e.AGM.register(t,n)},e.prototype.servers=function(){return this._ensureHasAgm(),It(this._activity)?[]:this._activity.windows.map((function(e){return e.instance}))},e.prototype.methods=function(){var e=this;if(this._ensureHasAgm(),It(this._activity))return[];var t=this._activity.windows,n=[],r=[];return t.forEach((function(t){e.methodsForWindow(t).forEach((function(e){-1===n.indexOf(e.name)&&(n.push(e.name),r.push(e))}))})),r},e.prototype.methodsForWindow=function(t){return this._ensureHasAgm(),t.instance?e.AGM.methodsForInstance(t.instance):[]},e.prototype.invoke=function(t,n,r,i,o,a){this._ensureHasAgm();var s=this.servers();if(It(r)&&(r="activity.all"),kt(r))if("activity.all"===r);else{if("activity.best"!==r){if("all"===r||"best"===r)return function(e,t,n){if("function"!==typeof t&&"function"!==typeof n)return e;"function"!==typeof t?t=function(){}:"function"!==typeof n&&(n=function(){}),e.then(t,n)}(e.AGM.invoke(t,n,r,i),o,a);throw new Error("Invalid invoke target "+r)}var u=s.filter((function(n){return e.AGM.methodsForInstance(n).filter((function(e){return e.name===t})).length>0}));u.length>0&&u[0]}else if(St(r)){if(r.length>=0){var c=r[0];if(this._isInstance(c))r.map((function(e){return e}));else{if(!this._isActivityWindow(c))throw new Error("Unknown target object");r.map((function(e){return e.instance}))}}}else if(this._isInstance(r));else{if(!this._isActivityWindow(r))throw new Error("Unknown target object");r.instance}throw new Error("Not implemented")},e.prototype.unregister=function(t){return this._ensureHasAgm(),e.AGM.unregister(t)},e.prototype.createStream=function(t,n,r){this._ensureHasAgm(),e.AGM.createStream(t,{subscriptionAddedHandler:n,subscriptionRemovedHandler:r,subscriptionRequestHandler:void 0})},e.prototype.subscribe=function(t,n,r){return this._ensureHasAgm(),e.AGM.subscribe(t,n)},e.prototype._ensureHasAgm=function(){if(It(e.AGM))throw new Error("Agm should be configured to be used in activity")},e.prototype._isInstance=function(e){return void 0!==e.application},e.prototype._isActivityWindow=function(e){return void 0!==e.instance},e}(),Ft=function(){function e(e,t,n){this._manager=e,this._ownerActivityId=t,this._state=n}return Object.defineProperty(e.prototype,"ownerId",{get:function(){return this._state.ownerId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"windowIds",{get:function(){return this._state.windowIds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frameColor",{get:function(){return this._state.frameColor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._state.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._state.tag},enumerable:!0,configurable:!0}),e.prototype.detach=function(e){var t=this;e=e||{};var n={};return Object.keys(this._state).forEach((function(e){n[e]=t._state[e]})),n.context=e.context||n.context,n.frameColor=e.frameColor||n.frameColor,this._manager.detachActivities(this._ownerActivityId,n)},e}(),Wt=function(e){setTimeout(e,0)};function Dt(e,t){if(!xt(t))return e;e.then((function(e){Wt((function(){t(null,e)}))}),(function(e){Wt((function(){t(e,null)}))}))}var Ut=function(e){function t(t,n,r,i,o){var a=e.call(this,t)||this;return a._id=t,a._actType=n,a._status=r,a._context=i,a._ownerId=o,a._agm=new Nt(a),a}return i(t,e),Object.defineProperty(t.prototype,"type",{get:function(){if(this._manager)return this._manager.getActivityType(this._actType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"owner",{get:function(){return this._ownerId?this._manager.getWindows({id:this._ownerId})[0]:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"windows",{get:function(){return this._manager.getWindows({activityId:this._id})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"agm",{get:function(){return this._agm},enumerable:!0,configurable:!0}),t.prototype.addWindow=function(e,t){return this._manager.addWindowToActivity(this,e,t)},t.prototype.createWindow=function(e,t){return this._manager.createWindow(this,e,t)},t.prototype.createStackedWindows=function(e,t,n){return this._manager.createStackedWindows(this,e,t,n)},t.prototype.leave=function(e,t){return this._manager.leaveWindowFromActivity(this,e,t)},t.prototype.getWindowsByType=function(e){var t={activityId:this._id,type:e};return this._manager.getWindows(t)},t.prototype.setContext=function(e,t){return this._manager.setActivityContext(this,e,t)},t.prototype.updateContext=function(e,t){return this._manager.updateActivityContext(this,e,t)},t.prototype.onStatusChange=function(e){var t=this;return this._manager.subscribeActivityEvents((function(n,r,i){n.id===t.id&&e(n,r,i)}))},t.prototype.onWindowEvent=function(e){var t=this;return this._manager.subscribeWindowEvents((function(n,r,i){n.id===t.id&&e(n,r,i)}))},t.prototype.onContextChanged=function(e){var t=this;this._manager.subscribeActivityContextChanged((function(n,r,i,o){n.id===t.id&&e(r,i,o,n)}));try{e(this.context,this.context,[],this)}catch(n){return}},t.prototype.stop=function(){this._manager.stopActivity(this)},t.prototype.clone=function(e){return this._manager.clone(this,e)},t.prototype.attach=function(e,t){var n;return n="string"===typeof e?e:e.id,this._manager.attachActivities(n,this.id,t)},t.prototype.onActivityAttached=function(e){var t=this;this._manager.subscribeActivitiesAttached((function(n,r,i){n===t._id&&e(i)}))},t.prototype.onDetached=function(e){var t=this;this._manager.subscribeActivitiesDetached((function(n,r,i){r.id===t._id&&e(n,i)}))},t.prototype._updateCore=function(t){var n=this;e.prototype._updateCore.call(this,t),At(t._actType,(function(e){return n._actType=e})),At(t._context,(function(e){return n._context=e})),At(t._ownerId,(function(e){return n._ownerId=e})),!t._status||this._status&&this._status.state===t._status.state||(this._status=t._status)},t.prototype._updateDescriptors=function(e){var t=this;this._attached=e.map((function(e){return new Ft(t._manager,t._id,e)}))},Object.defineProperty(t.prototype,"attached",{get:function(){return this._attached},enumerable:!0,configurable:!0}),t.prototype.setFrameColor=function(e,t){var n=this;return Dt(new Promise((function(t,r){var i=n.windows.length;0===i&&t(n),n.windows.forEach((function(r){r.underlyingWindow.setFrameColor(e,(function(){--i<=0&&t(n)}))})),setTimeout((function(){i>0&&r(n.id+" - timed out waiting for setFrameColor with"+e)}),5e3)})),t)},t.prototype.getFrameColor=function(){return this.windows&&0!==this.windows.length?this.windows[0].underlyingWindow.frameColor:""},t}(_t),Bt=function(){function e(){}return e.Trace="trace",e.Debug="debug",e.Info="info",e.Warn="warn",e.Error="error",e}(),zt=function(){function e(t){this._name=t,It(e.GlueLogger)||(this._glueLogger=e.GlueLogger.subLogger(t))}return e.GetNamed=function(t){return new e(t)},e.Get=function(t){return new e(e.GetTypeName(t))},e.prototype.trace=function(t){It(this._glueLogger)?e.Level===Bt.Trace&&console.info(this._getMessage(t,Bt.Trace)):this._glueLogger.trace(t)},e.prototype.debug=function(t){It(this._glueLogger)?e.Level!==Bt.Debug&&e.Level!==Bt.Trace||console.info(this._getMessage(t,Bt.Debug)):this._glueLogger.debug(t)},e.prototype.info=function(t){It(this._glueLogger)?e.Level!==Bt.Debug&&e.Level!==Bt.Trace&&e.Level!==Bt.Info||console.info(this._getMessage(t,Bt.Info)):this._glueLogger.info(t)},e.prototype.warn=function(t){It(this._glueLogger)?e.Level!==Bt.Debug&&e.Level!==Bt.Trace&&e.Level!==Bt.Info&&e.Level!==Bt.Warn||console.info(this._getMessage(t,Bt.Info)):this._glueLogger.warn(t)},e.prototype.error=function(e){It(this._glueLogger)?(console.error(this._getMessage(e,Bt.Error)),console.trace()):this._glueLogger.error(e)},e.prototype._getMessage=function(e,t){return"["+t+"] "+this._name+" - "+e},e.GetTypeName=function(e){var t=/function (.{1,})\(/.exec(e.constructor.toString());return t&&t.length>1?t[1]:""},e.Level=Bt.Info,e}(),Ht=function(e){function t(t,n,r,i,o,a,s,u){var c=e.call(this,t)||this;return c._logger=zt.Get("window"),c._type=r,c._activityId=i,c._name=n,c._instance=o,c._isIndependent=a,c._windowGetter=s,c._hcWindowId=u,c}return i(t,e),t.prototype.getBounds=function(){return this._manager.getWindowBounds(this.id)},Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isIndependent",{get:function(){return this._isIndependent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){if(this._manager)return this._manager.getWindowType(this._type)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activity",{get:function(){if(!Ct(this._activityId))return this._manager.getActivityById(this._activityId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOwner",{get:function(){var e=this.activity;return!Ct(e)&&e.owner.id===this.id},enumerable:!0,configurable:!0}),t.prototype.setVisible=function(e,t){return this._manager.setWindowVisibility(this.id,e)},t.prototype.activate=function(e){return this._manager.activateWindow(this.id,e)},t.prototype.setBounds=function(e,t){return this._manager.setWindowBounds(this.id,e,t)},t.prototype.close=function(){return this._manager.closeWindow(this.id)},Object.defineProperty(t.prototype,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"underlyingWindow",{get:function(){var e=this._windowGetter();return e||{id:this._hcWindowId}},enumerable:!0,configurable:!0}),t.prototype.onActivityJoined=function(e){this._subscribeForActivityWindowEvent(jt.ActivityWindowJoinedActivity,e)},t.prototype.onActivityRemoved=function(e){this._subscribeForActivityWindowEvent(jt.ActivityWindowLeftActivity,e)},t.prototype._updateCore=function(e){var t=this;At(e._activityId,(function(e){return t._activityId=e})),At(e._isIndependent,(function(e){return t._isIndependent=e})),At(e._hcWindowId,(function(e){return t._hcWindowId=e})),At(e._type,(function(e){return t._type=e})),At(e._name,(function(e){return t._name=e})),It(e._instance)||(this._instance=e._instance)},t.prototype._subscribeForActivityWindowEvent=function(e,t){var n=this;this._manager.subscribeWindowEvents((function(r,i,o){i.id===n.id&&o===e&&t(r)}))},t.prototype._beforeDelete=function(e){this._hcWindowId=e._hcWindowId},t}(_t),Gt=function(){function e(e,t,n){this.state=e,this.message=t,this.time=n}return e.prototype.getState=function(){return this.state},e.prototype.getMessage=function(){return this.message},e.prototype.getTime=function(){return this.time},e}(),Vt="error",qt="add-types",Jt="created",Yt="destroyed",Kt="initiated",$t="joined",Qt="activity-joined",Xt="left",Zt="owner-changed",en="add-peer-factories",tn="peer-factories-added",nn="peer-factories-removed",rn="peer-created",on=function(){function e(e){var t=this;if(this._activityChangeCallbacks=[],this._activityTypeStatusChangeCallbacks=[],this._activityWindowChangeCallbacks=[],this._windowTypeStatusChangeCallbacks=[],this._peerIdAndFactoryIdToPeerType={},this._peerFactoriesRegisteredByUs={},this._gw3Subscriptions=[],this._contextSubscriptions={},this._activityTypesInitiatedFromMe={},this._config=e,this._connection=e.connection,this._logger=e.logger,this._contexts=e.contexts,this._windows=e.windows,this._sessionJoinedPromise=new Promise((function(e){t._sessionJoinedPromiseResolve=e})),this._activityJoinedPromise=new Promise((function(e){t._activityJoinedPromiseResolve=e})),this._config.activityId||this._activityJoinedPromiseResolve({}),this._gw3Session=this._connection.domain("activity",["joined","initiated","peer-created","token"]),"undefined"!==typeof window){var n=window.glue42gd;n&&"function"===typeof n.addRefreshHandler&&n.addRefreshHandler((function(e,r){t._gw3Session.send({type:"reload"}).then((function(t){if(t.token){try{n.setGWToken(t.token)}catch(i){return void r(i.message||i)}e()}else r("Expected gateway token for refreshing.")}),r)}))}}return e.activityTypeGwMessageEntityToActivityType=function(e,t){var n=function(e){return new Et(e,void 0)};return new Tt(e.name,e.owner_type&&n(e.owner_type),e.helper_types&&e.helper_types.map(n),t)},e.peerFactoryGwMessageEntityToWindowType=function(e){return new Et(e.peer_type,(function(e){}))},e.activityGwMessageToActivity=function(e,t){var n=void 0!==e.owner?e.owner.peer_id:e.owner_id;return new Ut(e.activity_id,e.activity_type,t,e.context_snapshot,n)},e.activityToActivityStatusChangeEvent=function(e){return new Pt(e,new Ot(e.status,void 0))},Object.defineProperty(e.prototype,"bridgeType",{get:function(){return"GW3"},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=this;this.forwardActivityTypeMessagesToStatusEventHandlers(),this.subscribe(Jt,this.handleActivityCreatedMessage),this.subscribe(Yt,this.handleActivityDestroyedMessage),this.forwardActivityMessagesToStatusEventHandlers(),this.forwardActivityCreatedAndJoinedActivityToActivityWindowEventHandlers(),this.forwardPeerFactoryMessagesToStatusEventHandlers(),this.forwardPeerFactoryMessagesToPeerFactoryRequests(),this.subscribe(tn,this.handlePeerFactoriesAdded),this.subscribe(nn,this.handlePeerFactoriesRemoved),this.forwardActivityWindowMessagesToEventHandlers(),this.subscribe("dispose-peer",(function(){if("dispose"!==e._config.disposeRequestHandling){if("exit"===e._config.disposeRequestHandling){if(e._windows&&"undefined"!==typeof e._windows.my())return void e._windows.my().close();if("undefined"!==typeof window&&"function"===typeof window.close)return void window.close();if("undefined"!==typeof r&&"function"===typeof r.exit)return void r.exit()}}else e.dispose()})),this._gw3Session.onJoined((function(){"trackMyOnly"===e._config.mode||"trackMyTypeAndInitiatedFromMe"===e._config.mode?e._sessionJoinedPromiseResolve(e):e._gw3Session.send({type:"subscribe",activity_types:"trackAll"===e._config.mode?[]:"trackTypes"===e._config.mode?e._config.typesToTrack:[]}).then((function(){e._sessionJoinedPromiseResolve(e)}))})),this._gw3Session.join()},e.prototype.dispose=function(){var e=this;this._gw3Subscriptions.forEach((function(t){return t&&e._connection.off(t)})),this._gw3Subscriptions.length=0},e.prototype.ready=function(){return Promise.all([this._sessionJoinedPromise,this._activityJoinedPromise])},e.prototype.initReady=function(){return this._sessionJoinedPromise},e.prototype.onActivityTypeStatusChange=function(e){this._activityTypeStatusChangeCallbacks.push(e)},e.prototype.registerActivityType=function(t,n,r,i,o){var a=this,s={};s.name=t;var u=function(e){return{type:e.type,name:e.name,configuration:e}};return s.owner_type=u(n),s.helper_types=r.map(u),this._gw3Session.send({type:qt,types:[s]}).then((function(){var t=e.activityTypeGwMessageEntityToActivityType(s,o);return a.invokeCallbacks(a._activityTypeStatusChangeCallbacks,new Pt(t,new Mt(jt.Added)),qt),t}))},e.prototype.unregisterActivityType=function(e){var t=this;return this._gw3Session.send({type:"remove-types",types:[e]}).then((function(){var n=new Tt(e,void 0,void 0,void 0);t.invokeCallbacks(t._activityTypeStatusChangeCallbacks,new Pt(n,new Mt(jt.Removed)),qt)}))},e.prototype.onWindowTypeStatusChange=function(e){this._windowTypeStatusChangeCallbacks.push(e)},e.prototype.registerWindowFactory=function(t,n,r){var i=this;if(this._peerFactoriesRegisteredByUs[t])return Promise.reject(new Error("Factory for windowType "+t+" already registered."));this._peerFactoriesRegisteredByUs[t]=n;var o={id:t,peer_type:t,configuration:r};return this._gw3Session.send({type:en,factories:[o]}).then((function(){i.invokeCallbacks(i._windowTypeStatusChangeCallbacks,new Pt(e.peerFactoryGwMessageEntityToWindowType(o),new Mt(jt.Added)),en)})).catch((function(){delete i._peerFactoriesRegisteredByUs[t]}))},e.prototype.unregisterWindowFactory=function(e){var t=this;return this._peerFactoriesRegisteredByUs[e]?(delete this._peerFactoriesRegisteredByUs[e],this._gw3Session.send({type:"remove-peer-factories",factory_ids:[e]}).then((function(){t.invokeCallbacks(t._windowTypeStatusChangeCallbacks,new Pt(new Et(e,void 0),new Mt(jt.Removed)),en)}))):Promise.reject(new Error("Factory for windowType "+e+" not registered."))},e.prototype.onActivityStatusChange=function(e){this._activityChangeCallbacks.push(e)},e.prototype.initiateActivity=function(e,t,n){var r=this,i={type:"create",activity_type:e,initial_context:t};return this.isOverrideTypeDefinition(n)?i.types_override={owner_type:{type:n.owner.type,name:n.owner.name,configuration:n.owner},helper_types:n.helpers&&n.helpers.map((function(e){return{type:e.type,name:e.name,configuration:e}}))}:i.configuration=n&&n.map((function(e){return{type:e.type,name:e.name,configuration:e}})),this.sendCreateAndMapResultingMessagesToPromise(i,Kt,(function(e,t){return e.request_id===t}),Jt,(function(e,t,n){return e.activity_id===n.activity_id}),Yt,(function(e,t,n){return e.activity_id===n.activity_id}),(function(e){return e.activity_id})).then((function(t){return"trackMyTypeAndInitiatedFromMe"!==r._config.mode||r._activityTypesInitiatedFromMe[e]?t:(r._activityTypesInitiatedFromMe[e]=!0,r._gw3Session.send({type:"subscribe",activity_types:[e]}).then((function(){return t})))}))},e.prototype.stopActivity=function(e){return this._gw3Session.send({type:"destroy",activity_id:e.id,reason_uri:"com.tick42.glue.activity.constants.destroyReason.general",reason:"Destroying activity"}).then((function(e){return!0}))},e.prototype.updateActivityContext=function(e,t,n,r){if(n)return this._contexts.set(e.id,t);for(var i=0,o=r=r||[];i<o.length;i++)t[o[i]]=null;return this._contexts.update(e.id,t)},e.prototype.announceWindow=function(e,t){throw new Error("Invalid operation 'announceWindow' for GW3 protocol")},e.prototype.registerWindow=function(e,t,n){var r="undefined"!==typeof this._connection.gatewayToken,i=this._connection.peerId;if("undefined"!==typeof window){var o=window.glue42gd;o&&(r="undefined"!==typeof o.activityInfo)}return r&&this._gw3Session.send({type:"ready"}),this.invokeCallbacks(this._activityWindowChangeCallbacks,new Pt(new Ht(i,t,e,void 0,this.getAgmInstance(i),n,this.generateWindowGetter(i),void 0),new Mt(jt.Added)),"register window"),Promise.resolve(i)},e.prototype.onActivityWindowChange=function(e){this._activityWindowChangeCallbacks.push(e)},e.prototype.createWindow=function(e,t){var n=this;return t.layout||(t.left||t.width||t.height||t.top)&&(t.layout={mode:"pixels",cellSize:1}),this.sendCreateAndMapResultingMessagesToPromise({type:"create-peer",peer_type:t.type,peer_name:t.name||t.type,configuration:t,activity_id:e},void 0,void 0,rn,(function(e,t){return e.request_id===t}),void 0,void 0,(function(e){return e.created_id})).then((function(r){if(e)return n.joinActivity(e,r,t.name).then((function(){return r}))}))},e.prototype.closeWindow=function(e){return this._gw3Session.send({type:"destroy-peer",destroy_peer_id:e}).then((function(e){}))},e.prototype.getAnnouncementInfo=function(){var e=this._config.activityId||this._config.announcementInfo&&this._config.announcementInfo.activityId,t=this._config.announcementInfo&&this._config.announcementInfo.activityWindowType,n=this._config.announcementInfo&&this._config.announcementInfo.activityWindowIndependent,r=this._config.announcementInfo&&this._config.announcementInfo.activityWindowName;if("undefined"!==typeof window&&"undefined"!==typeof window.location&&window.location.search&&"function"===typeof URLSearchParams){var i=new URLSearchParams(location.search.slice(1));t=(t=t||i.get("t42PeerType"))||i.get("t42ActivityWindowType"),"undefined"===typeof n&&(n=i.get("t42ActivityWindowIndependent")),r=r||i.get("t42ActivityWindowName"),e=e||i.get("t42ActivityId")}return{activityWindowId:void 0,activityId:e,activityWindowType:t=t||"unknown",activityWindowIndependent:n=n||!1,activityWindowName:r=r||this._connection.peerId}},e.prototype.joinActivity=function(e,t,n){var r=this,i=n&&{name:n}||{};return this._gw3Session.send(o({type:"join-activity",target_id:t,activity_id:e},i)).then((function(){r.invokeCallbacks(r._activityWindowChangeCallbacks,new Pt(new Ht(t,void 0,void 0,e,r.getAgmInstance(t),void 0,r.generateWindowGetter(t),void 0),new Mt(jt.ActivityWindowJoinedActivity)),"activity joined - ActivityWindow"),r.invokeCallbacks(r._activityChangeCallbacks,new Pt(new Ut(e,void 0,new Gt("created",void 0,void 0),void 0,void 0),new Mt(jt.Updated)),"activity joined - Activity")}))},e.prototype.leaveActivity=function(e,t){var n=this;return this._gw3Session.send({type:"leave-activity",target_id:t,activity_id:e}).then((function(){n.invokeCallbacks(n._activityWindowChangeCallbacks,new Pt(new Ht(t,void 0,void 0,null,n.getAgmInstance(t),void 0,n.generateWindowGetter(t),void 0),new Mt(jt.ActivityWindowLeftActivity)),"activity left - ActivityWindow"),n.invokeCallbacks(n._activityChangeCallbacks,new Pt(new Ut(e,void 0,new Gt("created",void 0,void 0),void 0,void 0),new Mt(jt.Updated)),"activity left - Activity")}))},e.prototype.getActivityTypes=function(){return Promise.resolve([])},e.prototype.getWindowTypes=function(){return Promise.resolve([])},e.prototype.getActivities=function(){return Promise.resolve([])},e.prototype.getActivityWindows=function(){return Promise.resolve([])},e.prototype.createStackedWindows=function(e,t,n){},e.prototype.getWindowBounds=function(e){},e.prototype.setWindowBounds=function(e,t){},e.prototype.activateWindow=function(e,t){},e.prototype.setWindowVisibility=function(e,t){},e.prototype.cloneActivity=function(e,t){},e.prototype.attachActivities=function(e,t,n){return this._gw3Session.send({type:"merge",into:t,merge:e})},e.prototype.detachActivities=function(e,t){return this._gw3Session.send({type:"split",from:e}).then((function(){return""}))},e.prototype.onActivitiesAttached=function(e){},e.prototype.onActivitiesDetached=function(e){},e.prototype.onActivityAttachedDescriptorsRefreshed=function(e){},e.prototype.getAttachedDescriptors=function(){return Promise.resolve([])},e.prototype.getRandomRequestId=function(){return this._connection.peerId+":"+Math.floor(1e9*Math.random())},e.prototype.forwardAddedAndRemovedMessagesToEventHandler=function(e,t,n,r){var i=function(e){return function(t){return new Pt(t,new Mt(e?jt.Added:jt.Removed))}};return[e&&this.forwardMessageToEventHandler(e,(function(e){return n(e,!0)}),i(!0),r),t&&this.forwardMessageToEventHandler(t,(function(e){return n(e,!1)}),i(!1),r)].filter((function(e){return e}))},e.prototype.forwardMessageToEventHandler=function(e,t,n,r){return this.subscribe(e,(function(e){t(e).forEach((function(t){return r.forEach((function(r){return r(n(t,e))}))}))}))},e.prototype.sendCreateAndMapResultingMessagesToPromise=function(e,t,n,r,i,o,a,s){var u,c,l,d,f,p,h=this,y=this.getRandomRequestId(),g=new Promise((function(e,t){u=e,c=t})),v=null,m=function(){h.dropSubscription(l),h.dropSubscription(d),h.dropSubscription(f),h.dropSubscription(p)};l=t&&this.subscribe(t,(function(e){n(e,y)&&(v=e,h.dropSubscription(l))})),d=this.subscribe(r,(function(e){i(e,y,v)&&u(s(e))})),f=o&&this.subscribe(o,(function(e){a(e,y,v)&&c(e)})),p=o&&this.subscribe(Vt,(function(e){e.request_id===y&&c(e)})),e.request_id=y;var w=this._gw3Session.send(e).then((function(){return g}));return w.then(m,m),w},e.prototype.peerFactoryIdAndOwnerIdToWindowType=function(e,t){var n=this._peerIdAndFactoryIdToPeerType[t+":"+e];return n?new Et(n,void 0):null},e.prototype.subscribe=function(e,t){var n=this,r=this._connection.on(e,(function(e){return t.bind(n)(e)}));return this._gw3Subscriptions.push(r),r},e.prototype.dropSubscription=function(e){e&&(this._connection.off(e),delete this._gw3Subscriptions[this._gw3Subscriptions.indexOf(e)])},e.prototype.invokeCallbacks=function(e,t,n){var r=this;e.forEach((function(e){try{e(t)}catch(i){r._logger.error("Error in "+(n||t.context.type)+" callback: "+JSON.stringify(i))}}))},e.prototype.handleActivityCreatedMessage=function(e){e.context_id?this._contextSubscriptions[e.activity_id]||this.subscribeToContext(e):this._logger.error("Activity created with unknown context_id: "+e.activity_id)},e.prototype.subscribeToContext=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i=this;return s(this,(function(o){switch(o.label){case 0:return t=e.activity_id,n=this._contextSubscriptions,r=t,[4,this._contexts.subscribe(t,(function(e,n,r){var o=new Pt(new Ut(t,void 0,void 0,e,void 0),new Rt(e,n,r));i.invokeCallbacks(i._activityChangeCallbacks,o,"context updated")}))];case 1:return n[r]=o.sent(),[2]}}))}))},e.prototype.handleActivityDestroyedMessage=function(e){var t=this._contextSubscriptions[e.activity_id];"function"===typeof t&&t(),delete this._contextSubscriptions[e.activity_id]},e.prototype.handlePeerFactoriesAdded=function(e){var t=this;e.factories.forEach((function(n){t._peerIdAndFactoryIdToPeerType[e.owner_id+":"+n.id]=n.peer_type}))},e.prototype.handlePeerFactoriesRemoved=function(e){var t=this;e.factory_ids.forEach((function(n){delete t._peerIdAndFactoryIdToPeerType[e.owner_id+":"+n]}))},e.prototype.forwardActivityTypeMessagesToStatusEventHandlers=function(){this.forwardAddedAndRemovedMessagesToEventHandler("types-added","types-removed",(function(t,n){return n?t.types.map((function(t){return e.activityTypeGwMessageEntityToActivityType(t,void 0)})):t.types.map((function(e){return new Tt(e.name,void 0,void 0,void 0)}))}),this._activityTypeStatusChangeCallbacks)},e.prototype.forwardActivityCreatedAndJoinedActivityToActivityWindowEventHandlers=function(){for(var e=this,t=0,n=[Jt,$t,Zt];t<n.length;t++){var r=n[t];this.forwardMessageToEventHandler(r,(function(t){return[t.owner||o(o({},t),{type:t.peer_type,name:t.peer_name,peer_id:t.owner_id})].concat(t.participants||[]).map((function(n){return new Ht(n.peer_id,n.name,n.type,t.activity_id,e.getAgmInstance(n.peer_id),void 0,e.generateWindowGetter(n.peer_id),void 0)}))}),(function(e,t){return new Pt(e,new Mt(jt.ActivityWindowJoinedActivity))}),this._activityWindowChangeCallbacks)}},e.prototype.forwardActivityMessagesToStatusEventHandlers=function(){for(var t=0,n=[Jt,$t];t<n.length;t++){var r=n[t];this.forwardMessageToEventHandler(r,(function(t){return[e.activityGwMessageToActivity(t,new Gt("started","",new Date))]}),(function(t,n){return e.activityToActivityStatusChangeEvent(t)}),this._activityChangeCallbacks)}this.forwardMessageToEventHandler(Yt,(function(t){return[e.activityGwMessageToActivity(t,new Gt("destroyed",t.reason,new Date))]}),(function(t,n){return e.activityToActivityStatusChangeEvent(t)}),this._activityChangeCallbacks),this.forwardMessageToEventHandler(Kt,(function(t){return[e.activityGwMessageToActivity(t,new Gt("created","",new Date))]}),(function(t,n){return e.activityToActivityStatusChangeEvent(t)}),this._activityChangeCallbacks),this.forwardMessageToEventHandler(Zt,(function(t){return[e.activityGwMessageToActivity(t,new Gt("created","",new Date))]}),(function(t,n){return e.activityToActivityStatusChangeEvent(t)}),this._activityChangeCallbacks)},e.prototype.forwardPeerFactoryMessagesToStatusEventHandlers=function(){var t=this;this.forwardAddedAndRemovedMessagesToEventHandler(tn,nn,(function(n,r){return r?n.factories.map(e.peerFactoryGwMessageEntityToWindowType):n.factory_ids.map((function(e){return t.peerFactoryIdAndOwnerIdToWindowType(e,n.owner_id)})).filter((function(e){return null!=e}))}),this._windowTypeStatusChangeCallbacks)},e.prototype.forwardPeerFactoryMessagesToPeerFactoryRequests=function(){var e=this;this.subscribe("peer-requested",(function(t){var n=e._peerFactoriesRegisteredByUs[t.peer_factory];if(n)try{var r=t.configuration||{};r.gateway_token=r.gateway_token||t.gateway_token,r.peer_factory=r.peer_factory||t.peer_factory;var i=n({activityId:t.activity&&t.activity.id,activityType:t.activity&&t.activity.type,type:t.configuration&&t.configuration.type,gwToken:r.gateway_token,configuration:r});i&&i.then&&i.catch&&i.catch((function(n){return e._gw3Session.send({type:Vt,request_id:t.request_id,reason:n&&(n.message||JSON.stringify(n))})}))}catch(o){e._gw3Session.send({type:Vt,request_id:t.request_id,reason:o&&(o.message||JSON.stringify(o))})}else e._gw3Session.send({type:Vt,request_id:t.request_id,reason:"Unknown peer factory "+t.peer_factory})}))},e.prototype.forwardActivityWindowMessagesToEventHandlers=function(){for(var e=this,t=function(t){n.subscribe(t,(function(n){var r=t===Qt?n.joined_id:n.peer_id,i=t===Qt?n.joined_type:n.peer_type,o=t===Qt?n.joined_name:n.peer_name,a=new Ht(r,o,i,n.activity_id,e.getAgmInstance(r),void 0,e.generateWindowGetter(r),void 0);e._contextSubscriptions[n.activity_id]?t===$t&&e._activityJoinedPromiseResolve({}):e.subscribeToContext(n).then((function(){t===$t&&e._activityJoinedPromiseResolve({})})),e.invokeCallbacks(e._activityWindowChangeCallbacks,new Pt(a,new Mt(jt.ActivityWindowJoinedActivity)),t)}))},n=this,r=0,i=[Qt,$t];r<i.length;r++)t(i[r]);this.subscribe(Xt,(function(t){var n=new Ht(t.left_id,void 0,void 0,null,e.getAgmInstance(t.left_id),void 0,e.generateWindowGetter(t.left_id),void 0);e.invokeCallbacks(e._activityWindowChangeCallbacks,new Pt(n,new Mt(jt.ActivityWindowLeftActivity)),Xt)})),this.forwardAddedAndRemovedMessagesToEventHandler(rn,void 0,(function(t){return[new Ht(t.created_id,void 0,void 0,void 0,void 0,void 0,e.generateWindowGetter(t.created_id),void 0)]}),this._activityWindowChangeCallbacks)},e.prototype.getAgmInstance=function(e){return this._config.agm.servers().find((function(t){return t.peerId===e||t.windowId===e}))},e.prototype.generateWindowGetter=function(e){var t=this;return function(){var n=t.getAgmInstance(e);if(n){var r=n.windowId;return t._config.windows.list().filter((function(e){return e.id===r}))[0]}}},e.prototype.isOverrideTypeDefinition=function(e){return"undefined"!==typeof e&&!!e.owner},e}(),an=function(){function e(e,t){var n=this;this._myAttached=[],this._myDetached=[],this._myAttachedTo=[],this._myDetachedFrom=[],this._myActivityFrameColorChanged=[],this._myActivityJoinedCallbacks=[],this._myActivityRemovedCallbacks=[],this._myContextUpdateCallbacks=[],this._logger=zt.Get(this),this._m=e,e.ready().then((function(e){e.subscribeActivityContextChanged(n._subscribeMyContextChanged.bind(n)),e.subscribeWindowEvents(n._subscribeMyWindowEvent.bind(n)),e.subscribeActivitiesAttached(n._subscribeActivitiesAttached.bind(n)),e.subscribeActivitiesDetached(n._subscribeActivitiesDetached.bind(n)),t&&t.onWindowFrameColorChanged(n._subscribeWindowFrameColorChanged.bind(n))}))}return Object.defineProperty(e.prototype,"window",{get:function(){if(It(this._w)){var e=this._m.announcedWindows;e.length>0&&(this._w=e[0])}return this._w},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activity",{get:function(){var e=this.window;if(!It(e))return e.activity},enumerable:!0,configurable:!0}),e.prototype.createWindow=function(e){return this._m.createWindow(this.activity,e)},e.prototype.createStackedWindows=function(e,t){return this._m.createStackedWindows(this.activity,e,t)},Object.defineProperty(e.prototype,"context",{get:function(){var e=this.activity;return Ct(e)?{}:e.context},enumerable:!0,configurable:!0}),e.prototype.updateContext=function(e,t){var n=this.activity;return Ct(n)?new Promise((function(e,t){t("Not in activity")})):n.updateContext(e,t)},e.prototype.setContext=function(e,t){var n=this.activity;return Ct(n)?new Promise((function(e,t){t("Not in activity")})):n.setContext(e,t)},e.prototype.onActivityJoined=function(e){this._myActivityJoinedCallbacks.push(e);var t=this.window;It(t)||It(t.activity)||e(t.activity)},e.prototype.onActivityLeft=function(e){this._myActivityRemovedCallbacks.push(e)},e.prototype.onContextChanged=function(e){this._myContextUpdateCallbacks.push(e);var t=this.window;if(!It(t)){var n=t.activity;It(n)||e(n.context,n.context,[],n)}},e.prototype.clone=function(e,t){var n=this.activity;return this._m.clone(n,e,t)},e.prototype.attach=function(e,t){var n;return n="string"===typeof e?e:e.id,this._m.attachActivities(n,this.activity.id,t)},e.prototype.onActivityAttached=function(e){this._myAttached.push(e)},e.prototype.onActivityDetached=function(e){this._myDetached.push(e)},e.prototype.onAttachedToActivity=function(e){this._myAttachedTo.push(e)},e.prototype.onDetachedFromActivity=function(e){this._myDetachedFrom.push(e)},Object.defineProperty(e.prototype,"attached",{get:function(){return this.activity?this.activity.attached:[]},enumerable:!0,configurable:!0}),e.prototype.setFrameColor=function(e,t){return this.activity?this.activity.setFrameColor(e,t):Promise.resolve(null)},e.prototype.getFrameColor=function(){return this.activity?this.activity.getFrameColor():""},e.prototype.onFrameColorChanged=function(e){this._myActivityFrameColorChanged.push(e)},e.prototype._subscribeMyContextChanged=function(e,t,n,r){var i=this.window;if(!It(i)){var o=i.activity;It(o)||e.id===o.id&&this._notifyMyContextChanged(e,t,n,r)}},e.prototype._subscribeMyWindowEvent=function(e,t,n){It(this.window)||this.window.id===t.id&&(n===jt.ActivityWindowJoinedActivity?(this._notifyMyWindowEvent(e,this._myActivityJoinedCallbacks),this._notifyMyContextChanged(e,e.context,null,null)):n===jt.ActivityWindowLeftActivity&&this._notifyMyWindowEvent(e,this._myActivityRemovedCallbacks))},e.prototype._notifyMyWindowEvent=function(e,t){var n=this;t.forEach((function(t){try{t(e,event)}catch(r){n._logger.warn("error in user callback "+r)}}))},e.prototype._notifyMyContextChanged=function(e,t,n,r){var i=this;n=n||{},r=r||[],this._myContextUpdateCallbacks.forEach((function(o){try{o(t,n,r,e)}catch(a){i._logger.warn("error in user callback "+a)}}))},e.prototype._notifyAttached=function(e){var t=this;this._myAttached.forEach((function(n){try{n(e)}catch(r){t._logger.warn("error in user callback "+r)}}))},e.prototype._notifyDetached=function(e){var t=this;this._myDetached.forEach((function(n){try{n(e)}catch(r){t._logger.warn("error in user callback "+r)}}))},e.prototype._notifyAttachedTo=function(e){var t=this;this._myAttachedTo.forEach((function(n){try{n(t.activity,e)}catch(r){t._logger.warn("error in user callback "+r)}}))},e.prototype._notifyDetachedFrom=function(e,t,n){var r=this;this._myDetachedFrom.forEach((function(i){try{i(e,t,n)}catch(o){r._logger.warn("error in user callback "+o)}}))},e.prototype._subscribeActivitiesAttached=function(e,t){var n=this.window;if(!It(n)){var r=n.activity;It(r)||e.id===r.id&&(t.windowIds.indexOf(n.id)>=0?this._notifyAttachedTo(t):this._notifyAttached(t))}},e.prototype._subscribeActivitiesDetached=function(e,t,n){var r=this.window;if(!It(r)){var i=r.activity;It(i)||(t.id===i.id&&this._notifyDetached(n),e.id===i.id&&this._notifyDetachedFrom(e,t,n))}},e.prototype._subscribeWindowFrameColorChanged=function(e){var t=this.activity;t&&t.owner&&t.owner.underlyingWindow.id===e.id&&this._myActivityFrameColorChanged.forEach((function(t){t(e.frameColor)}))},e}(),sn=function(){function e(e,t){if(this._logger=zt.Get("ReadyMarker ["+e+"]"),this._logger.debug("Initializing ready marker for '"+e+"' with "+t+" signals to wait"),t<=0)throw new Error("Invalid signal number. Should be > 0");this._signals=t,this._callbacks=[],this._name=e}return e.prototype.setCallback=function(e){this.isSet()?e(void 0):this.isError()?e(this._error):this._callbacks.push(e)},e.prototype.signal=function(e){if(this._logger.debug("Signaled - "+e+" - signals left "+(this._signals-1)),this._signals--,this._signals<0)throw new Error("Error in ready marker '"+this._name+" - signals are "+this._signals);this.isSet()&&this._callbacks.forEach((function(e){e(void 0)}))},e.prototype.error=function(e){this._error=e,this._callbacks.forEach((function(t){t(e)}))},e.prototype.isSet=function(){return!this.isError()&&0===this._signals},e.prototype.isError=function(){return!Ct(this._error)},e.prototype.getError=function(){return this._error},e}(),un=function(){function e(e){this._items={},this._listeners=[],this._processNew=e}return e.prototype.addOne=function(e){this.add([e])},e.prototype.add=function(e){var t=this;e.forEach((function(e){t.process(new Pt(e,new Mt(jt.Added)))}))},e.prototype.process=function(e){var t=e.context,n=t.type,r=e.entity;if(n===jt.StatusChange&&!t.oldStatus){var i=this._items[r.id];i&&(t.oldStatus=i.status)}n===jt.StatusChange&&t.oldStatus&&t.newStatus&&t.oldStatus.state===t.newStatus.state&&(t.type=jt.Updated),"undefined"===typeof htmlContainer&&(n===jt.ActivityWindowJoinedActivity&&this._items[r.id]&&this._items[r.id].activity&&(t.type=jt.Updated),n===jt.ActivityWindowLeftActivity&&this._items[r.id]&&!this._items[r.id].activity&&(t.type=jt.Updated));var o=this._updateInternalCollections(r,n,t);return this._notifyListeners(o,t),o},e.prototype.get=function(){var e=[];for(var t in this._items)if(this._items.hasOwnProperty(t)){var n=this._items[t];e.push(n)}return e},e.prototype.getByName=function(e){for(var t in this._items)if(t===e)return this._items[t]},e.prototype.getOrWait=function(e){var t=this;return new Promise((function(n){var r=function r(i){i.id===e&&(n(i),t.unsubscribe(r))};t.subscribe(r);var i=t.getByName(e);if(i)return t.unsubscribe(r),void n(i)}))},e.prototype.subscribe=function(e){var t=this;return this._listeners.push(e),Object.keys(this._items).forEach((function(n){var r=t._items[n];e(r,new Mt(jt.Added.toString()))})),function(){t.unsubscribe(e)}},e.prototype.unsubscribe=function(e){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)},e.prototype._notifyListeners=function(e,t){this._listeners.forEach((function(n){try{n(e,t)}catch(r){return}}))},e.prototype._updateInternalCollections=function(e,t,n){var r=e,i=t===jt.StatusChange&&r.status&&r.status.state===Lt.Destroyed||t===jt.StatusChange&&n&&n.newStatus&&n.newStatus.state===Lt.Destroyed,o=t===jt.Closed;if(t===jt.Removed&&"undefined"===typeof r.isIndependent||o||i){var a=this._items[e.id];return delete this._items[e.id],this._processNew(e),a&&e._beforeDelete(a),e}var s=e.id;return this._items.hasOwnProperty(s)?this._items[e.id]._update(e):(this._processNew(e),this._items[e.id]=e),this._items[e.id]},e}(),cn=function(){function e(e,t,n){var r=this;this._logger=zt.Get("activityManager"),this._announcedWindows=[],this._attachedCallbacks=[],this._detachedCallbacks=[],this._frameColorChangesCallbacks=[],this._windowHandlers=[],this._bridge=e,this._activityTypes=new un((function(e){return r._grabEntity(e)})),this._windowTypes=new un((function(e){return r._grabEntity(e)})),this._activities=new un((function(e){return r._grabEntity(e)})),this._windows=new un((function(e){return r._grabEntity(e)})),this._dataReadyMarker=new sn("Activity Manager Data",["GetActivityTypes","GetWindowTypes","GetActivities","GetWindows"].length),this._descriptorsMarker=new sn("Attached Activities Descriptors",["GetDescriptors"].length),t?(this._readyMarker=new sn("Activity Manager Announce",["Announcement"].length),this._dataReadyMarker.setCallback((function(e){e&&r._readyMarker.error(e),r._descriptorsMarker.setCallback((function(e){e&&r._readyMarker.error(e),r._logger.debug("Auto announcing window"),r.announceWindow().then((function(e){r._announcedWindows.push(e),r._readyMarker.signal("Successfully announced window with id '"+e.id+"'")})).catch((function(e){r._logger.debug("Will not announce window - "+e),r._readyMarker.signal()}))})),r.refreshDescriptors()}))):this._readyMarker=this._dataReadyMarker,this._bridge.onActivitiesAttached((function(e){r._handleActivitiesAttached(e)})),this._bridge.onActivitiesDetached((function(e){r._handleActivitiesDetached(e)})),this._bridge.onActivityAttachedDescriptorsRefreshed((function(e){r._handleActivityDescriptorsRefreshed(e)})),n&&n.onWindowFrameColorChanged(this._handleWindowFrameColorChanged.bind(this)),this._bridge.init(),this._subscribeForData(),this._bridge.initReady().then((function(e){r._getInitialData()})).catch((function(e){console.log(e)}))}return Object.defineProperty(e.prototype,"usingHc",{get:function(){return"HC"===this._bridge.bridgeType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"announcedWindows",{get:function(){return this._announcedWindows},set:function(e){throw new Error("not allowed")},enumerable:!0,configurable:!0}),e.prototype.ready=function(e){var t=this,n=new Promise((function(e,n){t._readyMarker.setCallback((function(r){r?n(t._readyMarker.getError()):e(t)}))}));return Dt(Promise.all([this._bridge.ready(),n]).then((function(){return t})),e)},e.prototype.getActivityTypes=function(){return this._activityTypes.get()},e.prototype.getActivityType=function(e){return this._activityTypes.getByName(e)},e.prototype.registerActivityType=function(e,t,n,r,i,o){var a=this;return Dt(new Promise((function(o,s){var u;if(It(e))s("activityTypeName argument can not be undefined");else if(kt(e))if(It(a.getActivityType(e)))if(Ct(t))s("Owner window type can not be undefined");else{u=kt(t)?{type:t,name:"",isIndependent:!1,arguments:{}}:t;var c=[];if(!Ct(n)&&St(n))for(var l in n){var d=n[l];if(kt(d)){var f={type:d,name:"",isIndependent:!1,arguments:{},relativeTo:"",relativeDirection:"",windowStyleAttributes:{}};c.push(f)}else c.push(d)}a._bridge.registerActivityType(e,u,c,r,i).then((function(e){a._grabEntity(e),o(e)})).catch((function(e){s(e)}))}else s("Activity type '"+e+"' already exists");else s("activityTypeName should be string")})),o)},e.prototype.unregisterActivityType=function(e,t){var n=this;return Dt(new Promise((function(t,r){var i=n.getActivityType(e);Ct(i)?r("Activity type '"+e+"' does not exists"):n._bridge.unregisterActivityType(e).then((function(){return t(i)}),r)})),t)},e.prototype.initiate=function(e,t,n,r){var i=this;return Dt(new Promise((function(n,o){Ct(i.getActivityType(e))?o("Activity type '"+e+"' does not exists"):i._bridge.initiateActivity(e,t,r).then((function(e){i._activities.getOrWait(e).then((function(e){n(e)})).catch((function(e){return o(e)}))})).catch((function(e){o(e)}))})),n)},e.prototype.subscribeActivityTypeEvents=function(e){this._activityTypes.subscribe((function(t,n){e(t,n.type)}))},e.prototype.getWindowTypes=function(){return this._windowTypes.get()},e.prototype.getWindowType=function(e){return this._windowTypes.getByName(e)},e.prototype.registerWindowFactory=function(e,t,n){var r=this;return Dt(new Promise((function(n,i){if(It(e))i("no windowType specified");else{if("object"===typeof(o=e)&&null!==o)e=e.getName();else if(!kt(e))return void i("windowType should be string or object that has getName method");var o;r._bridge.registerWindowFactory(e,t).then((function(e){n(e)})).catch((function(e){i(e)}))}})),n)},e.prototype.unregisterWindowFactory=function(e,t){var n=this;return Dt(new Promise((function(t,r){It(e)?r("no windowType specified"):kt(e)?n._bridge.unregisterWindowFactory(e).then((function(e){t(e)})).catch((function(e){r(e)})):r("windowType should be a string")})),t)},e.prototype.getActivities=function(e){var t=this._activities.get();if(t=t.filter((function(e){return e._ownerId})),!e)return t;var n=e;if(kt(e))n=[e];else if(e instanceof Tt)n=[e.name];else if(!(e instanceof Array))throw new Error("Invalid input argument 'activityType' = "+e);return t.filter((function(e){var t=e.type;return function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return!0;return!1}(n,(function(e){return t.id===e.id}))}))},e.prototype.getActivityById=function(e){return this._activities.getByName(e)},e.prototype.announceWindow=function(e,t){var n=this;return new Promise((function(r,i){var o=n._bridge.getAnnouncementInfo();if(Ct(e)&&(e=o.activityWindowId),Ct(t)&&(t=o.activityWindowType),It(t))throw new Error("Can not announce - unknown windowType");var a=o&&o.activityId;if(It(e))n._logger.debug("Registering window with type:'"+t+"', name:'"+o.activityWindowName+"', ind.:'"+o.activityWindowIndependent+"'"),n._bridge.registerWindow(t,o.activityWindowName,o.activityWindowIndependent).then(n._windows.getOrWait.bind(n._windows)).then((function(e){return a?n._activities.getOrWait(a).then((function(t){return e})):e})).then((function(e){r(e)})).catch((function(e){n._logger.error(e)}));else{n._logger.debug("Announcing window with id '"+e+"' and type '"+t+"'");var s=n._windows.getByName(e);if(!It(s))return n._logger.debug("Window with id '"+e+"' already announced - reusing the window"),void r(s);n.subscribeWindowEvents((function t(o,a,s){e===a.id&&s===jt.ActivityWindowJoinedActivity&&(Ct(a.activity)&&i("UNDEFINED ACTIVITY"),n._logger.trace("Got joined event for id '"+e+"'"),r(a),n.unsubscribeWindowEvents(t))})),n._logger.trace("Waiting for joined event for id '"+e+"'"),n._bridge.announceWindow(t,e)}}))},e.prototype.subscribeWindowTypeEvents=function(e){this._windowTypes.subscribe((function(t,n){e(t,n.type)}))},e.prototype.subscribeActivityEvents=function(e){var t=this;return this._activities.subscribe((function(n,r){if(r.type===jt.StatusChange){var i=r;e(n,i.newStatus,i.oldStatus)}if(r.type===jt.Removed||r.type===jt.StatusChange&&r.newStatus.getState()===Lt.Destroyed)for(var o=0,a=t._windows.get();o<a.length;o++){var s=a[o];s.activity&&s.activity.id===n.id&&t._windows.process(new Pt(s,new Mt(jt.ActivityWindowLeftActivity)))}}))},e.prototype.subscribeWindowEvents=function(e){var t=function(t,n){var r=n.type;r===jt.Added&&(r="opened"),e(t.activity,t,r)};return this._windowHandlers.push([e,t]),this._windows.subscribe(t)},e.prototype.unsubscribeWindowEvents=function(e){var t=this._windowHandlers.find((function(t){return t[0]===e}));t&&(this._windowHandlers.splice(this._windowHandlers.indexOf(t),1),this._windows.unsubscribe(t[1]))},e.prototype.createWindow=function(e,t,n){var r=this;return Dt(new Promise((function(n,i){var o,a;if(It(t)&&i("windowType is undefined"),kt(t))o={type:t,name:"",isIndependent:!1,arguments:{}};else if(t instanceof Et)o={type:t.type||t.id,name:t.name||t.type||t.id,isIndependent:!1};else{var s=["url"],u={};Object.keys(t).forEach((function(e){-1===s.indexOf(e)&&(u[e]=t[e])})),o=u}if(!It(o.relativeTo))if("string"===typeof(a=o.relativeTo))!It(c=r.getWindows({type:a}))&&c.length>0&&(o.relativeTo=c[0].id);else if(It(a.type))It(a.windowId)||(o.relativeTo=a.windowId);else{var c;!It(c=r.getWindows({type:a.type}))&&c.length>0&&(o.relativeTo=c[0].id)}r._bridge.createWindow(e&&e.id,o).then((function(t){r._logger.debug("Window created, waiting for window entity with id "+t),r._windows.subscribe((function i(o,a){o.id!==t||e&&!o.activity||(r._logger.debug("Got entity window with id "+t),n(o),r._windows.unsubscribe(i))}))})).catch((function(e){i(e)}))})),n)},e.prototype.createStackedWindows=function(e,t,n,r){var i=this;return Dt(new Promise((function(r,o){It(e)&&o("activity is undefined"),It(t)&&o("relativeWindowTypes is undefined"),Array.isArray(t)||o("relativeWindowTypes has to be an array"),It(n)&&(n=2e4);var a=[];t.forEach((function(e){var t,r;if((t=kt(e)?{type:e,name:"",isIndependent:!1,arguments:{}}:e).stackedWindow=!0,t.timeout=n,!It(t.relativeTo))if(It((r=t.relativeTo).type)){if(!It(r.windowId)){var o=i.getWindows({id:r.windowId});!It(o)&&o.length>0&&(t.relativeTo=o[0].type.name)}}else t.relativeTo=r.type;a.push(t)}));var s=[];a.forEach((function(t){return s.push(i.createWindow(e,t))})),Promise.all(s).then(r).catch(o)})),r)},e.prototype.addWindowToActivity=function(e,t,n){var r=this._bridge.joinActivity(e.id,t.id).then((function(){return t}));return Dt(r,n),r},e.prototype.leaveWindowFromActivity=function(e,t,n){var r=this._bridge.leaveActivity(e.id,t.id).then((function(){return t}));return Dt(r,n),r},e.prototype.setActivityContext=function(e,t,n){var r=this;return Dt(new Promise((function(n,i){It(e)&&i("activity can not be null"),r._bridge.updateActivityContext(e,t,!0).then((function(t){n(e)})).catch((function(e){i(e)}))})),n)},e.prototype.updateActivityContext=function(e,t,n){var r=this;return Dt(new Promise((function(n,i){It(e)&&i("activity can not be null");var o=[];for(var a in t)t.hasOwnProperty(a)&&null===t[a]&&o.push(a);for(var s=0,u=o;s<u.length;s++){var c=u[s];delete t[c]}r._bridge.updateActivityContext(e,t,!1,o).then((function(t){n(e)})).catch((function(e){i(e)}))})),n)},e.prototype.subscribeActivityContextChanged=function(e){this._activities.subscribe((function(t,n){if(n.type===jt.ActivityContextChange){var r=n;e(t,r.context,r.updated,r.removed)}}))},e.prototype.stopActivity=function(e,t){return Dt(this._bridge.stopActivity(e),t)},e.prototype.getWindows=function(e){return Ct(e)?this._windows.get():Ct(e.id)?this._windows.get().filter((function(t){if(!Ct(e.type)&&t.type.id!==e.type)return!1;if(!Ct(e.name)&&t.name!==e.name)return!1;if(!Ct(e.activityId)){if(It(t.activity))return!1;if(t.activity.id!==e.activityId)return!1}return!0})):[this._windows.getByName(e.id)]},e.prototype.getWindowBounds=function(e){return this._bridge.getWindowBounds(e)},e.prototype.setWindowBounds=function(e,t,n){var r=this;return Dt(new Promise((function(n,i){r._bridge.setWindowBounds(e,t).then((function(){return n()})).catch((function(e){return i(e)}))})),n)},e.prototype.closeWindow=function(e){return this._bridge.closeWindow(e)},e.prototype.activateWindow=function(e,t){return this._bridge.activateWindow(e,t)},e.prototype.setWindowVisibility=function(e,t){return this._bridge.setWindowVisibility(e,t)},e.prototype.clone=function(e,t,n){var r=this;return Dt(new Promise((function(n,i){e||i("activity can not be null"),r._bridge.cloneActivity(e.id,t).then((function(e){r._activities.getOrWait(e).then((function(e){n(e)})).catch((function(e){return i(e)}))})).catch((function(e){return i(e)}))})),n)},e.prototype.attachActivities=function(e,t,n,r){var i=this;return n=n||{},Dt(new Promise((function(r,o){if(i._activities.getByName(e)){if(i._activities.getByName(t))return i._bridge.attachActivities(e,t,n).then((function(e){var t=e.to,n=e.descriptor,o=e.descriptors;i._activities.getOrWait(t).then((function(e){e._updateDescriptors(o);var t=e.attached.filter((function(e){return e.ownerId===n.ownerId}))[0];r(t)}))})).catch((function(e){o(e)}));o("can not find activity with id "+t)}else o("can not find activity with id "+e)})),r)},e.prototype.detachActivities=function(e,t,n){var r=this;return Dt(new Promise((function(n,i){return r._bridge.detachActivities(e,t).then((function(){r._activities.getOrWait(void 0).then((function(e){e._updateDescriptors(void 0),r._activities.getOrWait(void 0).then((function(e){n(e)}))})).catch((function(e){return i(e)}))})).catch((function(e){i(e)}))})),n)},e.prototype.subscribeActivitiesAttached=function(e){this._attachedCallbacks.push(e)},e.prototype.subscribeActivitiesDetached=function(e){this._detachedCallbacks.push(e)},e.prototype.subscribeActivityFrameColorChanged=function(e){this._frameColorChangesCallbacks.push(e)},e.prototype._grabEntity=function(e){e._manager=this},e.prototype._getInitialData=function(){var e=this;this._logger.debug("Request initial data..."),this._bridge.getActivityTypes().then((function(t){e._activityTypes.add(t),e._dataReadyMarker.signal("Got act types")})).catch((function(t){e._logger.error(t),e._dataReadyMarker.error("Can not initialize ActivityManager - error getting activity types -"+t)})),this._bridge.getWindowTypes().then((function(t){e._windowTypes.add(t),e._dataReadyMarker.signal("Got window types")})).catch((function(t){e._logger.error(t),e._dataReadyMarker.error("Can not initialize ActivityManager - error getting window types  "+t)})),this._bridge.getActivities().then((function(t){e._activities.add(t),e._dataReadyMarker.signal("Got activities")})).catch((function(t){e._logger.error(t),e._dataReadyMarker.error("Can not initialize ActivityManager - error getting activity instances -"+t)})),this._bridge.getActivityWindows().then((function(t){e._windows.add(t),e._dataReadyMarker.signal("Got windows")})).catch((function(t){e._logger.error(t),e._dataReadyMarker.error("Can not initialize ActivityManager - error getting activity windows -"+t)}))},e.prototype._subscribeForData=function(){var e=this;this._logger.debug("Subscribe for data..."),this._bridge.onActivityTypeStatusChange((function(t){e._activityTypes.process(t)})),this._bridge.onWindowTypeStatusChange((function(t){e._windowTypes.process(t)})),this._bridge.onActivityWindowChange((function(t){e._windows.process(t)})),this._bridge.onActivityStatusChange((function(t){e._activities.process(t)}))},e.prototype._handleActivitiesAttached=function(e){var t=this,n=e.to,r=e.descriptor,i=e.descriptors;this._activities.getOrWait(n).then((function(e){e._updateDescriptors(i);var n=e.attached.filter((function(e){return e.ownerId===r.ownerId}))[0];t._attachedCallbacks.forEach((function(t){try{t(e,n)}catch(r){return}}))}))},e.prototype._handleActivitiesDetached=function(e){var t=this,n=e.oldActivityId,r=e.newActivityId,i=e.descriptors,o=e.descriptor;this._activities.getOrWait(n).then((function(e){e._updateDescriptors(i),t._activities.getOrWait(r).then((function(n){t._detachedCallbacks.forEach((function(t){try{t(n,e,o)}catch(r){return}}))}))}))},e.prototype._handleActivityDescriptorsRefreshed=function(e){var t=e.id,n=e.descriptors,r=this._activities.getByName(t);r&&r._updateDescriptors(n)},e.prototype.refreshDescriptors=function(){var e=this;this._bridge.getAttachedDescriptors().then((function(t){t&&Object.keys(t).forEach((function(n){var r=n,i=t[n],o=e._activities.getByName(r);o&&o._updateDescriptors(i)})),e._descriptorsMarker.signal("Successfully got descriptors")})).catch((function(t){e._descriptorsMarker.error("failed to get descriptors - "+t)}))},e.prototype._handleWindowFrameColorChanged=function(e){if(e.activityId){var t=this._activities.getByName(e.activityId);t&&t.owner&&t.owner.underlyingWindow.id===e.id&&this._frameColorChangesCallbacks.forEach((function(n){try{n(t,e.frameColor)}catch(r){return}}))}},e}(),ln=function(){function e(e,t){this._m=e,this._my=t,this.activityTypes={get:this._getActivityTypesWrapper.bind(this),register:this._m.registerActivityType.bind(this._m),unregister:this._m.unregisterActivityType.bind(this._m),subscribe:this._m.subscribeActivityTypeEvents.bind(this._m),unsubscribe:void 0,initiate:this._m.initiate.bind(this._m)},this.windowTypes={get:this._getWindowTypesWrapper.bind(this),registerFactory:this._m.registerWindowFactory.bind(this._m),unregisterFactory:this._m.unregisterWindowFactory.bind(this._m),subscribe:this._m.subscribeWindowTypeEvents.bind(this._m),unsubscribe:void 0},this.windows={get:this._m.getWindows.bind(this._m),subscribe:this._m.subscribeWindowEvents.bind(this._m),announce:this._m.announceWindow.bind(this._m),unsubscribe:void 0,create:this._m.createWindow.bind(this._m)},this.instances={get:this._m.getActivities.bind(this._m),subscribe:this._m.subscribeActivityEvents.bind(this._m),unsubscribe:void 0}}return e.prototype.onAttached=function(e){this._m.subscribeActivitiesAttached(e)},e.prototype.onDetached=function(e){this._m.subscribeActivitiesDetached(e)},e.prototype.onActivityFrameColorChanged=function(e){this._m.subscribeActivityFrameColorChanged(e)},e.prototype._getActivityTypesWrapper=function(e){return Ct(e)?this._m.getActivityTypes():this._m.getActivityType(e)},e.prototype._getWindowTypesWrapper=function(e){return Ct(e)?this._m.getWindowTypes():this._m.getWindowType(e)},e}(),dn=function(){function e(e,t){this._mgr=e,this._my=t,this.all=new ln(e,t)}return e.prototype.ready=function(e){var t=this;return Dt(new Promise((function(e,n){t._mgr.ready().then((function(){e(t)})).catch((function(e){n(e)}))})),e)},Object.defineProperty(e.prototype,"my",{get:function(){return this._my},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aware",{get:function(){return void 0!==this._my.window},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inActivity",{get:function(){return this.aware&&void 0!==this._my.activity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"agm",{get:function(){if(this.aware)return this.inActivity?this._my.activity.agm:new Nt(null)},enumerable:!0,configurable:!0}),e.prototype.getAvailableFrameColors=function(){return[]},e}(),fn=function(){function e(t){var n,r=this;if(!t)throw new Error("config can not be null");if(Ct(t.logLevel)||(zt.Level=t.logLevel),It(t.logger)||(zt.GlueLogger=t.logger),this._isUsingHCImplementation=2===t.gdMajorVersion,this._isUsingGW3Implementation=e.checkIsUsingGW3Implementation(t.connection),this._isUsingHCImplementation)throw new Error("GD2 not supported");if(!this._isUsingGW3Implementation)throw new Error("Unable to instantiate activity bridge implementation");if(!(n=new on(t)))throw new Error("A bridge to native activity is needed to create activity lib.");Nt.AGM=t.agm;var i=new cn(n,!t.disableAutoAnnounce,t.windows),o=new an(i,t.windows);this._api=new dn(i,o),this._readyPromise=i.ready().then((function(e){return r}))}return e.checkIsUsingGW3Implementation=function(e){return 3===e.protocolVersion},Object.defineProperty(e.prototype,"api",{get:function(){return this._api},set:function(e){this._api=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUsingHCImplementation",{get:function(){return this._isUsingHCImplementation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUsingGW3Implementation",{get:function(){return this._isUsingGW3Implementation},enumerable:!0,configurable:!0}),e.prototype.ready=function(e){return Dt(this._readyPromise,e)},e}(),pn="T42.ACS.GetFunctionalEntitlement",hn="T42.ACS.CanI",yn="T42.ACS.OnEvent";function gn(e){if(e&&e.errorHandling&&"function"!==typeof e.errorHandling&&"log"!==e.errorHandling&&"silent"!==e.errorHandling&&"throw"!==e.errorHandling)throw new Error('Invalid options passed to createRegistry. Prop errorHandling should be ["log" | "silent" | "throw" | (err) => void], but '+typeof e.errorHandling+" was passed");var t=e&&"function"===typeof e.errorHandling&&e.errorHandling,n={};function r(n,r){var i=n instanceof Error?n:new Error(n);if(t)t(i);else{var o='[ERROR] callback-registry: User callback for key "'+r+'" failed: '+i.stack;if(e)switch(e.errorHandling){case"log":return console.error(o);case"silent":return;case"throw":throw new Error(o)}console.error(o)}}return{add:function(e,t,i){var o=n[e];return o||(o=[],n[e]=o),o.push(t),i&&setTimeout((function(){i.forEach((function(i){var o;if(null===(o=n[e])||void 0===o?void 0:o.includes(t))try{Array.isArray(i)?t.apply(void 0,i):t.apply(void 0,[i])}catch(a){r(a,e)}}))}),0),function(){var r=n[e];r&&(0===(r=r.reduce((function(e,n,r){return n===t&&e.length===r||e.push(n),e}),[])).length?delete n[e]:n[e]=r)}},execute:function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=n[e];if(!o||0===o.length)return[];var a=[];return o.forEach((function(n){try{var i=n.apply(void 0,t);a.push(i)}catch(o){a.push(void 0),r(o,e)}})),a},clear:function(){n={}},clearKey:function(e){n[e]&&delete n[e]}}}gn.default=gn;var vn=gn;function mn(e){return e?Object.keys(e).map((function(t){return e[t]})):[]}function wn(e){var t;try{t=JSON.parse(JSON.stringify(e||{}))}catch(n){t={}}return t}var bn=function(){function e(e,t,n){var r=this;this._appManager=e,this._name=t,this._agm=n,this._registry=vn(),e.onInstanceStarted((function(e){e.application&&e.application.name!==r._name||r._registry.execute("instanceStarted",e)})),e.onInstanceStopped((function(e){e.application&&e.application.name!==r._name||r._registry.execute("instanceStopped",e)})),e.onAppRemoved((function(e){e.name===r._name&&r._registry.execute("appRemoved",e)})),e.onAppChanged((function(e){e.name===r._name&&r._registry.execute("appChanged",e)})),e.onAppAvailable((function(e){e.name===r._name&&r._registry.execute("appAvailable",e)})),e.onAppUnavailable((function(e){e.name===r._name&&r._registry.execute("appUnavailable",e)}))}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._props.Title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._props.Version},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoStart",{get:function(){return this._props.AutoStart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShell",{get:function(){return this._props.IsShell},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caption",{get:function(){return this._props.Caption},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return this._props.IsHidden},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this._props.ApplicationName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activityType",{get:function(){return this._props.ActivityType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activityWindowType",{get:function(){return this._props.ActivityWindowType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"windowSettings",{get:function(){return this._props.Arguments?wn(this._props.Arguments):{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowMultiple",{get:function(){return this._props.AllowMultiple},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"available",{get:function(){return this._props.IsReady||!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return this._props.Icon},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconURL",{get:function(){return this._props.IconUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortOrder",{get:function(){return this._props.SortOrder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userProperties",{get:function(){return this._props.UserProperties?wn(this._props.UserProperties):{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActivity",{get:function(){return void 0!==this._props.ActivityType&&""!==this._props.ActivityType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"configuration",{get:function(){return{autoStart:this._props.AutoStart,caption:this._props.Caption,hidden:this._props.IsHidden,container:this._props.ApplicationName,activityType:this._props.ActivityType,allowMultiple:this._props.AllowMultiple}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instances",{get:function(){var e=this;return this._appManager.instances().filter((function(t){return t.application.name===e._name}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._props.Type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){if(!this._props)return"unknown";if(this._props.Mode&&"string"===typeof this._props.Mode)return this._props.Mode.toLowerCase();if(this.isActivity)return"unknown";if(this._props.Arguments&&this._props.Arguments.mode&&"string"===typeof this._props.Arguments.mode)return this._props.Arguments.mode.toLowerCase();var e=this._props.WindowStyleAttributes;if(e){var t='mode:"',n=(e=e.split(" ").join("")).indexOf(t);if(-1!==n){var r=n+t.length,i=e.indexOf('"',r),o=e.substr(r,i-r);if(o&&"string"===typeof o)return o.toLowerCase()}}return"flat"},enumerable:!0,configurable:!0}),e.prototype.updateFromProps=function(e){var t=this;this._props||(this._props={Name:e.Name}),Object.keys(e).forEach((function(n){t._props[n]=e[n]}))},e.prototype.start=function(e,t){var n=this,r=this._name;return new Promise((function(i,o){t=t||{},e=e||{},n._agm.invoke("T42.ACS.StartApplication",{Name:r,Context:e,Options:t},"best",{methodResponseTimeoutMs:1e4},(function(e){var t=e.returned&&e.returned.Instance_0?e.returned.Instance_0:e.returned;if(t&&t.Id)if("startOnly"===n._appManager.mode){var r=n._appManager.handleInstanceStarted(t);i(r)}else!function(e){var t,r=function(){var t,r=n._appManager.instances().filter((function(t){return t.id===e}));return(t=2===r.length?r[0].isActivityInstance?r[0]:r[1]:r[0])?t.agm?t:void 0:t},a=setTimeout((function(){t&&t(),o("timeout")}),1e4);t=n._appManager.onInstanceAgmServerReady((function(n){n.id===e&&(t&&(t(),t=void 0),clearTimeout(a),setTimeout((function(){i(r())}),1))}));var s=r();s&&(t&&(t(),t=void 0),clearTimeout(a),i(s))}(t.Id);else i(void 0)}),(function(e){o(e)}))}))},e.prototype.onInstanceStarted=function(e){this._registry.add("instanceStarted",e)},e.prototype.onInstanceStopped=function(e){this._registry.add("instanceStopped",e)},e.prototype.onAvailable=function(e){this._registry.add("appAvailable",e)},e.prototype.onUnavailable=function(e){this._registry.add("appUnavailable",e)},e.prototype.onChanged=function(e){this._registry.add("appChanged",e)},e.prototype.onRemoved=function(e){this._registry.add("appRemoved",e)},e}(),_n=function(){function e(e,t,n,r,i,o,a){var s=this;this._id=e,this._appName=t,this._appManager=n,this._agm=r,this._activities=i,this._windows=o,this.onAgmReady=this._addToRegistry("agmReady"),this.onStopped=this._addToRegistry("stopped"),this._registry=vn(),a||(this._unsubscribeInstanceStopped=this._appManager.onInstanceStopped((function(e){e.id===s._id&&s._registry.execute("stopped",e)})),this._unsubscribeInstanceAgmServerReady=this._appManager.onInstanceAgmServerReady((function(e){e.id===s._id&&s._registry.execute("agmReady",e)})))}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"application",{get:function(){return this._appManager.application(this._appName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activity",{get:function(){var e=this;if(!this._activities)throw new Error("This method requires glue.activities library to be enabled.");return this._activities.all.instances.get().filter((function(t){return t.id===e._activityId}))[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActivityOwner",{get:function(){return this._isActivityOwner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activityInstances",{get:function(){var e=this;return this._appManager.instances().filter((function(t){return"activity"!==t.application.type&&t.activityId&&t.activityId===e._activityId}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activityOwnerInstance",{get:function(){if(this._activityId)return this.activityInstances.filter((function(e){var t;return null===(t=e)||void 0===t?void 0:t.isActivityOwner}))[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){var e=this;if(!this._windows)throw new Error("This method requires glue.windows library to be enabled.");var t=this._windows.list().filter((function(t){return t.id===e._id}))[0];return!t&&this.activity&&this.activityOwnerInstance&&(t=this.activityOwnerInstance.window),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){var e,t,n;return null!==(n=null!==(e=this._startUpContext)&&void 0!==e?e:null===(t=this.window)||void 0===t?void 0:t.context)&&void 0!==n?n:{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActivityInstance",{get:function(){return this._isActivityInstance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activityId",{get:function(){return this._activityId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inActivity",{get:function(){return this._inActivity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSingleWindowApp",{get:function(){return!this._inActivity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"agm",{get:function(){return this._agmInstance},enumerable:!0,configurable:!0}),e.prototype.updateFromProps=function(e){this._startUpContext=e.Context,this._title=e.Title,this._isActivityInstance=!1,e.ActivityId&&""!==e.ActivityId&&(this._activityId=e.ActivityId,this._isActivityInstance=!0),this._isActivityOwner=e.IsActivityOwner,!this._activityId&&this._startUpContext&&this._startUpContext.activityId&&(this._activityId=this._startUpContext.activityId),this._inActivity=Boolean(this._activityId),this.updateAgmInstanceFromProps(e)},e.prototype.updateAgmInstanceFromProps=function(e){if(e.AgmServers)if(e.GD3){var t=e.AgmServers;t&&(this._agmInstance=t[0])}else{var n=e.AgmServers,r=Object.keys(n)[0];if(!r)return;var i=n[r];this._agmInstance={machine:i.machineName,user:i.userName,environment:i.environment,application:i.applicationName}}},e.prototype.stop=function(){var e=this;return new Promise((function(t,n){var r=e._appManager.onInstanceStopped((function(n){n.id===e._id&&(r(),t())}));e._agm.invoke("T42.ACS.StopApplication",{Name:e._appName,Id:e._id}).then((function(){"startOnly"===e._appManager.mode&&(e._appManager.handleInstanceStopped({Name:e._appName,Id:e.id,Context:void 0,Title:void 0,ActivityId:void 0,IsActivityOwner:void 0,AgmServers:void 0}),t())})).catch((function(e){return n(e)}))}))},e.prototype.activate=function(){return this._agm.invoke("T42.ACS.ActivateApplication",{Name:this._appName,Id:this._id})},e.prototype.done=function(){this._registry.clear(),this._unsubscribeInstanceAgmServerReady(),this._unsubscribeInstanceStopped()},e.prototype.getContext=function(){return Promise.resolve(this.context)},e.prototype._addToRegistry=function(e){var t=this;return function(n){t._registry.add(e,n)}},e}(),kn=function(){function e(e,t,n,r,i,o){var a=this;this.mode=e,this._agm=t,this._activities=n,this._windows=r,this._logger=i,this._gdMajorVersion=o,this._apps={},this._instances=[],this._registry=vn(),this.application=function(e){return a._apps[e]},this.applications=function(){return Object.keys(a._apps).map((function(e){return a._apps[e]}))},this.instances=function(){return a._instances},this.getMyInstance=function(){if(a._gdMajorVersion>=3){var e=window.glue42gd.appInstanceId;return a._instances.filter((function(t){return t.id===e}))[0]}},this.handleAppAdded=function(e){var t=a._getAppId(e);a._logger.trace("adding app "+t),a._apps[t]=new bn(a,t,a._agm);var n=a._updateAppFromProps(e);a._registry.execute("appAdded",n)},this.handleAppUpdated=function(e){var t=a._updateAppFromProps(e);a._registry.execute("appChanged",t)},this.handleAppRemoved=function(e){var t=a._getAppId(e);a._logger.trace("removing app "+t);var n=a.application(t);a._instances=a._instances.filter((function(e){return e.application.name!==n.name})),delete a._apps[t],a._registry.execute("appRemoved",n)},this.handleAppReady=function(e){var t=a._getAppId(e),n=a._getAppOrThrow(t);n.updateFromProps(e),n.available?a._registry.execute("appAvailable",n):a._registry.execute("appUnavailable",n)},this.handleInstanceStarted=function(e){a._logger.trace("started app "+e.Name+" "+e.Id);var t=a._getInstanceId(e),n=a._getInstanceAppName(e),r=new _n(t,n,a,a._agm,a._activities,a._windows);return a._updateInstanceFromProps(r,e),a._instances.push(r),a._registry.execute("instanceStarted",r),r},this.handleInstanceStopped=function(e){a._logger.trace("failed to start app "+e.Name+" "+e.Id);var t=a._getInstanceId(e),n=a._getInstanceAppName(e),r=a._getInstanceOrThrow(t,n);a._instances=a._instances.filter((function(e){return!a._matchInstance(e,t,n)})),a._registry.execute("instanceStopped",r),r.done()},this.handleInstanceAgmServerReady=function(e){var t=a._getInstanceId(e),n=a._getInstanceAppName(e),r=a._getInstanceOrThrow(t,n);r.updateAgmInstanceFromProps(e),a._registry.execute("instanceAgmServerReady",r)},this.handleInstanceStartFailed=function(e){var t=a._getInstanceId(e),n=a._getInstanceAppName(e),r=new _n(t,n,void 0,void 0,void 0,void 0,!0);a._updateInstanceFromProps(r,e),a._registry.execute("instanceStartFailed",r)},this.handleInstanceUpdated=function(e){var t=a._getInstanceId(e),n=a._getInstanceAppName(e),r=a._getInstanceOrThrow(t,n);a._updateInstanceFromProps(r,e)},this.onInstanceStarted=function(e){return a._registry.add("instanceStarted",e,a._instances)},this.onInstanceStartFailed=function(e){return a._registry.add("instanceStartFailed",e)},this.onInstanceStopped=function(e){return a._registry.add("instanceStopped",e)},this.onInstanceUpdated=function(e){return a._registry.add("instanceChanged",e)},this.onInstanceAgmServerReady=function(e){return a._registry.add("instanceAgmServerReady",e)},this.onAppAdded=function(e){return a._registry.add("appAdded",e,Object.values(a._apps))},this.onAppRemoved=function(e){return a._registry.add("appRemoved",e)},this.onAppAvailable=function(e){return a._registry.add("appAvailable",e)},this.onAppUnavailable=function(e){return a._registry.add("appUnavailable",e)},this.onAppChanged=function(e){return a._registry.add("appChanged",e)}}return e.prototype._getAppOrThrow=function(e){var t=this.application(e);if(!t)throw Error("app with id "+e+" not found");return t},e.prototype._getAppId=function(e){return e.Name},e.prototype._matchInstance=function(e,t,n){return e.id===t&&e.application.name===n},e.prototype._getInstanceByIdAndName=function(e,t){var n=this;return this._instances.filter((function(r){return n._matchInstance(r,e,t)}))[0]},e.prototype._getInstanceOrThrow=function(e,t){var n=this._getInstanceByIdAndName(e,t);if(!n)throw Error("instance with id "+e+" not found");return n},e.prototype._getInstanceId=function(e){return e.Id},e.prototype._getInstanceAppName=function(e){return e.Name},e.prototype._updateAppFromProps=function(e){var t=this._getAppId(e);this._logger.trace("updating app with  + "+t+", "+e);var n=this._getAppOrThrow(t);return n.updateFromProps(e),n},e.prototype._updateInstanceFromProps=function(e,t){this._logger.trace("updating instance with "+this._getInstanceId(t)+" for app "+this._getInstanceAppName(t)),e.updateFromProps(t)},e}();function Sn(e,t,n){var r=function(e){return!!(e&&e.constructor&&e.call&&e.apply)};if(!r(t)&&!r(n))return e;r(t)?r(n)||(n=function(){}):t=function(){},e.then(t,n)}var Cn=function(){function e(e){var t=this;this._agm=e,this._registry=vn(),this._isMethodRegistered=!1,this.handleBranchModified=function(e){t._registry.execute("branchChanged",e)},this.handleBranchesModified=function(e){t._registry.execute("branchesChanged",e)},this.getRegion=function(e,n){return Sn(t._agmInvoke("T42.ACS.GetConfigurationRegion",(function(e){return e.returned.Region})),e,n)},this.getBranches=function(e,n){return Sn(t._agmInvoke("T42.ACS.GetBranches",(function(e){var t=e.returned.Branches;return Object.keys(t).map((function(e){return t[e]}))})),e,n)},this.getCurrentBranch=function(e,n){return Sn(t._agmInvoke("T42.ACS.GetCurrentBranch",(function(e){return e.returned.Branch}),void 0),e,n)},this.setRegion=function(e,n,r){return Sn(t._agmInvoke("T42.ACS.SetConfigurationRegion",(function(e){return e.returned.ResultMessage}),{Region:e}),n,r)},this.setCurrentBranch=function(e,n,r){return Sn(t._agmInvoke("T42.ACS.SetCurrentBranch",(function(e){return e.returned.ResultMessage}),{Branch:e}),n,r)},this.currentUser=function(e,n){return Sn(t._agmInvoke("T42.ACS.GetUser"),e,n)},this.getFunctionalEntitlement=function(e,n,r){return Sn(t._agmInvoke(pn,(function(e){return e.returned.Entitlement}),{Function:e}),n,r)},this.getFunctionalEntitlementBranch=function(e,n,r,i){return Sn(t._agmInvoke(pn,(function(e){return e.returned.Entitlement}),{Function:e,Branch:n}),r,i)},this.canI=function(e,n,r){return Sn(t._agmInvoke(hn,(function(e){return e.returned.Result}),{Function:e}),n,r)},this.canIBranch=function(e,n,r,i){return Sn(t._agmInvoke(hn,(function(e){return e.returned.Result}),{Function:e,Branch:n}),r,i)},this.onBranchesChanged=function(e){return t._registry.add("branchesChanged",e)},this.onBranchChanged=function(e){return t._registry.add("branchChanged",e)},this.exit=function(e){return t._agmInvoke("T42.ACS.Shutdown",null,e)},this.onShuttingDown=function(e){return t.registerMethod(),t._registry.add("onShuttingDown",e)},this.restart=function(e){return t._agmInvoke("T42.ACS.Restart",null,e)},this._agmInvoke=function(e,n,r){return r=r||{},new Promise((function(i,o){t._agm.invoke(e,r).then((function(e){n||(n=function(e){return e.returned}),i(n(e))})).catch((function(e){return o(e)}))}))}}return e.prototype.registerMethod=function(){var e=this;this._isMethodRegistered||(this._agm.register("T42.ACS.OnGDShutdown",(function(t){return a(e,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Promise.all(this._registry.execute("onShuttingDown",t))];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}}))}))})),this._isMethodRegistered=!0)},e}(),In="T42.ACS.InMemoryStoreCommand",xn=function(){function e(e){this.interop=e}return e.prototype.import=function(e,t){if(!e||!Array.isArray(e))return Promise.reject("invalid apps argument - should be an array of application definitions");if(t&&"replace"!==t&&"merge"!==t)return Promise.reject("invalid mode argument - should be 'replace' or 'merge'");var n={command:"import",args:{apps:e,mode:t=null!==t&&void 0!==t?t:"replace"}};return this.interop.invoke(In,n).then((function(e){return e.returned}))},e.prototype.export=function(){return this.interop.invoke(In,{command:"export"}).then((function(e){return e.returned.apps}))},e.prototype.remove=function(e){if(!e||"string"!==typeof e)return Promise.reject("invalid app name, should be a string value");var t={command:"remove",args:{apps:[e]}};return this.interop.invoke(In,t).then((function(e){return e.returned}))},e.prototype.clear=function(){return this.interop.invoke(In,{command:"clear"}).then((function(e){return e.returned}))},e.prototype.createAppDef=function(e,t){return t||(t="https://google.com"),{name:e,type:"window",title:e,details:{url:t}}},e}(),An=function(e){if(!e)throw Error("config not set");if(!e.agm)throw Error("config.agm is missing");var t="startOnly",n="skipIcons",r=e.mode||t;if(r!==t&&r!==n&&"full"!==r)throw new Error("Invalid mode for appManager lib - "+r+" is not supported");var i,o=e.activities,a=e.agm,s=e.logger,u=e.windows,c=new kn(r,a,o,u,s.subLogger("applications"),e.gdMajorVersion),l=new Cn(a);if(r===t)i=function(e,t){return new Promise((function(n,r){e.invoke("T42.ACS.GetApplications",{skipIcon:!0}).then((function(e){var r=e.returned;r||n();var i=r.applications;i||n(),mn(i).map((function(e){return t.handleAppAdded(e)})),n()})).catch((function(e){return r("Error getting application snapshot: "+e.message)}))}))}(a,c);else{var d=function(e,t,n,r){var i;return{start:function(){var o,a,s=new Promise((function(e,t){o=e,a=t}));return e.subscribe(yn,{arguments:{skipIcon:r},waitTimeoutMs:1e4}).then((function(e){(i=e).onData((function(e){var r=e.data;mn(r.OnApplicationAdded).map((function(e){return t.handleAppAdded(e)})),mn(r.OnApplicationChanged).map((function(e){return t.handleAppUpdated(e)})),mn(r.OnApplicationRemoved).map((function(e){return t.handleAppRemoved(e)})),mn(r.OnApplicationReady).map((function(e){return t.handleAppReady(e)})),mn(r.OnApplicationStarted).map((function(e){return t.handleInstanceStarted(e)})),mn(r.OnApplicationStartFailed).map((function(e){return t.handleInstanceStartFailed(e)})),mn(r.OnApplicationStopped).map((function(e){return t.handleInstanceStopped(e)})),mn(r.OnApplicationUpdated).map((function(e){return t.handleInstanceUpdated(e)})),mn(r.OnApplicationAgmServerReady).map((function(e){return t.handleInstanceAgmServerReady(e)})),mn(r.OnBranchChanged).map((function(e){return n.handleBranchModified(e)})),mn(r.OnBranchesModified).map((function(e){return n.handleBranchesModified(e)})),o()})),i.onFailed((function(e){return a(e)}))})).catch((function(e){return a("Error subscribing for T42.ACS.OnEvent stream. Err: "+e)})),s},stop:function(){i&&i.close()}}}(a,c,l,r===n);i=d.start()}return{ready:function(){return i},applications:c.applications,application:c.application,onAppAdded:c.onAppAdded,onAppRemoved:c.onAppRemoved,onAppChanged:c.onAppChanged,onAppAvailable:c.onAppAvailable,onAppUnavailable:c.onAppUnavailable,instances:c.instances,get myInstance(){return c.getMyInstance()},onInstanceStarted:c.onInstanceStarted,onInstanceStopped:c.onInstanceStopped,onInstanceUpdated:c.onInstanceUpdated,onInstanceStartFailed:c.onInstanceStartFailed,getRegion:l.getRegion,getBranches:l.getBranches,getCurrentBranch:l.getCurrentBranch,getFunctionalEntitlement:l.getFunctionalEntitlement,getFunctionalEntitlementBranch:l.getFunctionalEntitlementBranch,setCurrentBranch:l.setCurrentBranch,setRegion:l.setRegion,currentUser:l.currentUser,canI:l.canI,canIBranch:l.canIBranch,onBranchesChanged:l.onBranchesChanged,exit:l.exit,restart:l.restart,onShuttingDown:l.onShuttingDown,inMemory:new xn(a)}},Tn=new(function(){function e(){this.waitForTimeoutInMilliseconds=6e4,this._windows={},this._pendingWindows={},this._pendingWindowsStates={},this._registry=vn()}return e.prototype.init=function(e){this._logger=e},e.prototype.get=function(e){return this._windows[e]||this._pendingWindows[e]},e.prototype.getIfReady=function(e){return this._windows[e]},Object.defineProperty(e.prototype,"list",{get:function(){return this._windows},enumerable:!0,configurable:!0}),e.prototype.add=function(e){if(this._pendingWindows[e.API.id])this._logger.error("trying to add window with id "+e.API.id+" from windowStore, which already exists");else{var t="remote"===e.API.windowType;this._pendingWindows[e.API.id]=e,this._pendingWindowsStates[e.API.id]={ready:!1,urlChanged:t},this._registry.execute("on-added",e)}},e.prototype.remove=function(e){delete this._windows[e.API.id],delete this._pendingWindows[e.API.id],delete this._pendingWindowsStates[e.API.id],this._registry.execute("on-removed",e)},e.prototype.setReadyState=function(e){var t=this._pendingWindowsStates[e];"undefined"!==typeof t&&(t.ready=!0,t.urlChanged&&this.markReadyToShow(e))},e.prototype.setUrlChangedState=function(e){var t=this._pendingWindowsStates[e];"undefined"!==typeof t&&(t.urlChanged=!0,t.ready&&this.markReadyToShow(e))},e.prototype.waitFor=function(e){var t=this;return new Promise((function(n,r){var i,o=setTimeout((function(){i(),r("waitFor timed out.")}),t.waitForTimeoutInMilliseconds),a=t._windows[e];a?(clearTimeout(o),n(a)):i=t.onReadyWindow((function(t){t.API.id===e&&(clearTimeout(o),i(),n(t))}))}))},e.prototype.onReadyWindow=function(e){return this._registry.add("on-ready",e)},e.prototype.onAdded=function(e){return this._registry.add("on-added",e)},e.prototype.onRemoved=function(e){return this._registry.add("on-removed",e)},e.prototype.markReadyToShow=function(e){this._pendingWindows[e]&&(this._windows[e]=this._pendingWindows[e],delete this._pendingWindows[e],delete this._pendingWindowsStates[e]),this._registry.execute("on-ready",this._windows[e])},e}()),En=function(){function e(){}return e.getGDMajorVersion=function(){if("undefined"===typeof window)return-1;if(!window.glueDesktop)return-1;if(!window.glueDesktop.version)return-1;var e=Number(window.glueDesktop.version.substr(0,1));return isNaN(e)?-1:e},e.callbackifyPromise=function(e,t,n){var r=function(e){var t=e;if(e instanceof Error&&(t=e.message),"function"!==typeof n)return Promise.reject(t);n(t)};try{return e().then((function(e){return"function"===typeof t&&t(e),e})).catch((function(e){return r(e)}))}catch(i){return r(i)}},e.getMonitor=function(e,t){var n=this;return t.map((function(t){var r=t.left,i=t.top,o=t.workingAreaWidth,a=t.workingAreaHeight;return{monitor:t,totalOverlap:n.calculateTotalOverlap({left:r,top:i,width:o,height:a},e)}})).sort((function(e,t){return t.totalOverlap-e.totalOverlap}))[0].monitor},e.getDisplayCenterOfScreen=function(e,t){var n=Math.floor(Math.max(t.left,t.left+(t.workingAreaWidth-e.width)/2));return{top:Math.floor(Math.max(t.top,t.top+(t.workingAreaHeight-e.height)/2)),left:n}},e.calculateTotalOverlap=function(e,t){var n=e.left,r=e.top,i=n+e.width,o=r+e.height,a=t.left,s=t.top,u=a+t.width,c=s+t.height;return Math.max(0,Math.min(i,u)-Math.max(n,a))*Math.max(0,Math.min(o,c)-Math.max(r,s))},e}(),Pn=function(e,t,n,r,i,o,u,c){var l,d,f=null!==c&&void 0!==c?c:vn(),p=r.subLogger("window "+e),h=t.name,y=t.mode,g=t.url,v=t.title,m=t.context||{},w=t.bounds,b=t.frameColor,_=t.focus,k=t.neighbours||{},S=t.groupId,C=t.isGroupHeaderVisible,I=t.isTabHeaderVisible,x=t.isTabSelected,A=t.settings,T=t.isVisible,E=t.isSticky,P=t.isCollapsed,M=t.state,O=t.tabGroupId,R=t.isLocked,j=[],L=t.zoomFactor,N=t.placementSettings;function F(e,t,r){return new Promise((function(i,o){var a,s,u=ce(e,w),c=!1,l=function(){c||(c=!0,"function"===typeof t&&t(d),i(d),s&&(s(),s=void 0),a&&(clearTimeout(a),a=void 0))};u||(s=te((function(t){ce(e,t.bounds)&&l()}))),n.moveResize(d,e).then((function(){u?l():a=setTimeout((function(){l()}),1e3)})).catch((function(e){"function"===typeof r&&r(e),o(e)}))}))}function W(e,t,r){return new Promise((function(i,o){if(e===T)return"function"===typeof t&&t(d),i(d);var a=X((function(e){"function"===typeof t&&t(d),a(),i(d)}));n.setVisible(d,e).catch((function(e){"function"===typeof r&&r(e),o(e)}))}))}function D(e,t,r){return new Promise((function(i,o){var a=Z((function(){a(),"function"===typeof t&&t(d),i(d)}));n.updateContext(d,e).catch((function(e){"function"===typeof r&&r(e),o(e)}))}))}function U(){return new Promise((function(e){var t=ee((function(n){n.id===d.id&&(t(),e())}))}))}function B(e){return e(d.title,d),f.add("onTitleChanged",e)}function z(e){return f.add("onClose",e)}function H(e){return f.add("onUrlChanged",e)}function G(e){return f.add("onFrameButtonAdded",e)}function V(e){return f.add("onFrameButtonRemoved",e)}function q(e){return P&&e(d),f.add("collapsed",e)}function J(e){return P||e(d),f.add("expanded",e)}function Y(e){return"maximized"===M&&e(d),f.add("maximized",e)}function K(e){return"minimized"===M&&e(d),f.add("minimized",e)}function $(e){return"normal"===M&&e(d),f.add("normal",e)}function Q(e){return f.add("detached",e)}function X(e){return f.add("visibility-changed",e)}function Z(e){return f.add("context-updated",e)}function ee(e){return f.add("lock-changed",e)}function te(e){return f.add("bounds-changed",e)}function ne(e){return f.add("focus-changed",e)}function re(e){return f.add("frame-color-changed",e)}function ie(e){return f.add("tab-header-visibility-changed",e)}function oe(e){return f.add("group-changed",e)}function ae(e){var t=k[e];if("undefined"!==typeof t)return t.reduce((function(e,t){var n=Tn.get(t);return n&&e.push(n.API),e}),[])}function se(){if(m._APPLICATION_NAME)return m._APPLICATION_NAME;if(m&&m._t42&&m._t42.application)return m._t42.application;var e=ue();return e?e.applicationName:void 0}function ue(){if("undefined"!==typeof window&&window.glue42gd&&window.glue42gd.getWindowInfo){var t=window.glue42gd.getWindowInfo(e);return t||void 0}}function ce(e,t){var n=e.height,r=e.width;e.height<A.minHeight&&(n=A.minHeight),e.height>A.maxHeight&&(n=A.maxHeight),e.width<A.minWidth&&(r=A.minWidth),e.width>A.maxWidth&&(r=A.maxWidth);var i=!n||t.height===n,o=!r||t.width===r,a=!e.left||t.left===e.left,s=!e.top||t.top===e.top;return i&&o&&a&&s}var le={handleWindowClose:function(){void 0!==d.id&&(f.execute("onClose",d),d.id=void 0)},handleWindowChangeState:function(e){"collapsed"===e?P=!0:"expanded"===e?P=!1:M=e,f.execute(e,d)},handleTitleChanged:function(e){v=e,f.execute("onTitleChanged",e,d)},handleVisibilityChanged:function(e){e!==T&&(T=e,f.execute("visibility-changed",d))},handleUrlChanged:function(e){g=e,f.execute("onUrlChanged",e,d)},handleWindowSettingsChanged:function(e){A=e,f.execute("settings-changed",d)},handleContextUpdated:function(e){m=e,f.execute("context-updated",m,d)},handleFrameIsLockedChanged:function(e){R=e,f.execute("lock-changed",d)},handleBoundsChanged:function(e){w.top===e.top&&w.left===e.left&&w.width===e.width&&w.height===e.height||(w.top=e.top,w.left=e.left,w.width=e.width,w.height=e.height,f.execute("bounds-changed",d))},handleFocusChanged:function(e){_=e,f.execute("focus-changed",d)},handleFrameButtonAdded:function(e){var t=["buttonId","imageBase64","order","tooltip"].reduce((function(t,n){return t[n]=e[n],t}),{});-1===j.map((function(e){return e.buttonId})).indexOf(e.buttonId)&&j.push(t),f.execute("onFrameButtonAdded",t,d)},handleFrameButtonRemoved:function(e){var t;j=j.reduce((function(n,r){return r.buttonId===e?t=r:n.push(r),n}),[]),void 0!==t&&f.execute("onFrameButtonRemoved",t,d)},handleFrameButtonClicked:function(e){var t=j.filter((function(t){return t.buttonId===e.buttonId}));t.length>0&&f.execute("onFrameButtonClicked",t[0],d)},handleFrameColorChanged:function(e){b=e,f.execute("frame-color-changed",d)},handleFrameAttached:function(e,t){O=e,I=t,f.execute("frame-attached",d)},handleFrameSelectionChanged:function(t,n){var r;"undefined"!==typeof t&&t===e?(x=!0,r=d):(x=!1,r=Tn.get(t)?Tn.get(t).API:void 0);var i=Tn.get(n)?Tn.get(n).API:void 0;if(x&&i)var o=i.onTabSelectionChanged((function(e,t){(t&&t.id)===i.id&&(o(),f.execute("tab-selection-changed",r,i,d))}));else f.execute("tab-selection-changed",r,i,d)},handleCompositionChanged:function(e,t){k=e||{},f.execute("neighbours-changed",e,d),S=t,d.groupId!==t&&f.execute("group-changed",d)},handleGroupHeaderVisibilityChanged:function(e){C=e},handleTabHeaderVisibilityChanged:function(e){I!==e&&(I=e,f.execute("tab-header-visibility-changed",d))},handleGroupChanged:function(t,n){p.trace("handle group changed to win: "+e+" with group id: "+t.id),l=t,S=t.id,f.execute("group-changed",d,t,n)},handleGroupAssociation:function(t){t&&p.trace("setting group to win: "+e+" with group id: "+t.id),l=t},handleAttached:function(e,t){O=e,I=t,f.execute("attached",d)},handleDetached:function(t){O=t;var n=f.add("frame-attached",(function(t){t.id===e&&(n(),f.execute("detached",d))}))},handleWindowAttached:function(e){f.execute("window-attached",e)},handleWindowDetached:function(e){f.execute("window-detached",e)},handleZoomFactorChanged:function(e){L=e,f.execute("zoom-factor-changed",d)},handleIsStickyChanged:function(e){E=e,f.execute("sticky-changed",e,d)},handlePlacementSettingsChanged:function(e){var t,n=e;if(n.display){var r=o();if(r){var i=n.display-1;t=new Promise((function(e,t){r.all().then((function(t){var n=t.find((function(e){return e.index===i}));e(n)})).catch(t)}))}else t=Promise.resolve(void 0)}else t=Promise.resolve(void 0);t.then((function(e){n.display=e,N=n,f.execute("placementSettingsChanged",d)}))}};return{API:d={get name(){return h},get application(){var e=i();return e?e.application(se()):void 0},get hostInstance(){return n.hostInstance},get agmInstance(){var e=this;if("undefined"!==typeof window&&window.glue42gd)return u.servers().find((function(t){return t.windowId===e.id}));var t=se();return t?{application:t}:void 0},get url(){return g},id:e,get title(){return v},get windowStyleAttributes(){return A},get settings(){return A},get tabGroupId(){return"tab"===y.toLowerCase()?O:void 0},get frameButtons(){return j},get mode(){return y},get state(){return M},get isCollapsed(){return P},get isVisible(){return T},get isLocked(){return R},get context(){return m},get bounds(){return w},get minHeight(){return A.minHeight},get maxHeight(){return A.maxHeight},get minWidth(){return A.minWidth},get maxWidth(){return A.maxWidth},get isFocused(){return _},get frameColor(){return b},get opened(){return void 0!==d.id},get group(){return l},get groupId(){return S},get isSticky(){return E},get topNeighbours(){return ae("top")},get leftNeighbours(){return ae("left")},get rightNeighbours(){return ae("right")},get bottomNeighbours(){return ae("bottom")},get isGroupHeaderVisible(){return C},get activityId(){if(m._t42)return m._t42.activityId;var e=ue();return e?e.activityId:void 0},get activityWindowId(){if(m._t42)return m._t42.activityWindowId;var e=ue();return e?e.activityWindowId:void 0},get windowType(){return t.windowType||"electron"},get zoomFactor(){return L},get screen(){if("undefined"!==typeof window&&window.glue42gd)return En.getMonitor(d.bounds,window.glue42gd.monitors)},get placementSettings(){return Object.assign({},N)},maximize:function(e,t){return new Promise((function(r,i){if("maximized"===M)return"function"===typeof e&&e(d),r(d);var o=Y((function(t){"function"===typeof e&&e(d),o(),r(d)}));n.maximize(d).catch((function(e){"function"===typeof t&&t(e),i(e)}))}))},restore:function(e,t){return new Promise((function(r,i){if("normal"===M)return"function"===typeof e&&e(d),r(d);var o=$((function(t){o(),"function"===typeof e&&e(d),r(d)}));n.restore(d).catch((function(e){"function"===typeof t&&t(e),i(e)}))}))},minimize:function(e,t){return new Promise((function(r,i){if("minimized"===M)return"function"===typeof e&&e(d),r(d);var o=K((function(t){return o(),"function"===typeof e&&e(d),r(d)}));n.minimize(d).catch((function(e){"function"===typeof t&&t(e),i(e)}))}))},maximizeRestore:function(e,t){return new Promise((function(r,i){var o=("normal"===M?Y:$)((function(){o(),"function"===typeof e&&e(d),r(d)}));n.maximizeRestore(d).catch((function(e){"function"===typeof t&&t(e),i(e)}))}))},collapse:function(e,t){return new Promise((function(r,i){if(P)return"function"===typeof e&&e(d),r(d);var o=q((function(t){o(),"function"===typeof e&&e(d),r(d)}));n.collapse(d).catch((function(e){"function"===typeof t&&t(e),i(e)}))}))},expand:function(e,t){return new Promise((function(r,i){if(!P)return"function"===typeof e&&e(d),r(d);var o=J((function(){o(),"function"===typeof e&&e(d),r(d)}));n.expand(d).catch((function(e){"function"===typeof t&&t(e),i(e)}))}))},toggleCollapse:function(e,t){return new Promise((function(r,i){var o=(P?J:q)((function(){o(),"function"===typeof e&&e(d),r(d)}));n.toggleCollapse(d).catch((function(e){"function"===typeof t&&t(e),i(e)}))}))},focus:function(t,r){return new Promise((function(i,o){if(_)return"function"===typeof t&&t(d),void i(d);var a=ne((function(n){if(e===n.id&&n.isFocused)return a(),"function"===typeof t&&t(d),i(d)}));n.focus(d).catch((function(e){"function"===typeof r&&r(e),o(e)}))}))},activate:function(t,r){return new Promise((function(i,o){if(_)return"function"===typeof t&&t(d),void i(d);var a=ne((function(n){if(e===n.id&&n.isFocused)return a(),"function"===typeof t&&t(d),void i(d)}));n.activate(d).catch((function(e){"function"===typeof r&&r(e),o(e)}))}))},moveResize:F,setTitle:function(e,t,r){return new Promise((function(i,o){if(e===v)return"function"===typeof t&&t(d),void i(d);var a=B((function(n){n===e&&(a(),"function"===typeof t&&t(d),i(d))}));n.setTitle(d,e).catch((function(e){"function"===typeof r&&r(e),o(e)}))}))},setStyle:function(e,t,r){if(!e||0===Object.keys(e).length||Object.keys(e).every((function(e){return!e}))){var i="Invalid style arguments: "+JSON.stringify(e);return"function"===typeof r?void r(i):Promise.reject(new Error(i))}if(e&&void 0!==e.focus){if("boolean"!==typeof e.focus)return i="Focus must be boolean. Currently only focus true is supported ! "+JSON.stringify(e),"function"===typeof r?void r(i):Promise.reject(new Error(i));!1===e.focus&&p.warn("Focus false is not supported!")}if(e&&void 0!==e.hidden&&"boolean"!==typeof e.hidden)return i="hidden should be boolean","function"===typeof r?void r(i):Promise.reject(new Error(i));for(var o=0,a=["minHeight","maxHeight","minWidth","maxWidth"];o<a.length;o++){var s=a[o];if(s in e&&"number"!==typeof e[s])return i=s+" should be number","function"===typeof r?void r(i):Promise.reject(new Error(i))}return En.callbackifyPromise((function(){return n.setStyle(d,e)}),t,r)},setOnTop:function(e,t,r){if(this.onTop===e){var i="OnTop setting is already set to '"+e+"'";return r(i),Promise.reject(new Error(i))}return En.callbackifyPromise((function(){return n.setOnTop(d,e)}),t,r)},resetButtons:function(e,t,r){return En.callbackifyPromise((function(){return n.resetButtons(d,e)}),t,r)},setSizeConstraints:function(e,t,r){if(!e||Object.keys(e).every((function(e){return void 0===e}))){var i="Invalid Constraints: "+JSON.stringify(e);return r(i),Promise.reject(new Error(i))}return En.callbackifyPromise((function(){return n.setSizeConstraints(d,e)}),t,r)},navigate:function(e,t,r){return new Promise((function(i,o){var a=H((function(e,n){e===n.url&&(a(),"function"===typeof t&&t(d),i(d))}));n.navigate(d,e).catch((function(e){"function"===typeof r&&r(e),o(e)}))}))},addFrameButton:function(e,t,r){return new Promise((function(i,o){if("undefined"===typeof e)return"function"===typeof r?void r("No button info"):void o("No button info");if(void 0===e.buttonId)return"function"===typeof r?void r("No buttonId"):void o("No buttonId");if(void 0===e.imageBase64)return"function"===typeof r?void r("No imageBase64"):void o("No imageBase64");var a=G((function(){a(),"function"===typeof t&&t(d),i(d)}));n.addFrameButton(d,e).catch((function(e){"function"===typeof r&&r(e),o(e)}))}))},removeFrameButton:function(e,t,r){return new Promise((function(i,o){if(void 0===e||""===e)return"function"===typeof r?void r("No buttonId"):void o("No buttonId");var a=V((function(){a(),"function"===typeof t&&t(d),i(d)}));n.removeFrameButton(d,e).catch((function(e){"function"===typeof r&&r(e),o(e)}))}))},setVisible:W,show:function(){return W(!0)},hide:function(){return W(!1)},center:function(e){return F(En.getDisplayCenterOfScreen(d.bounds,e||d.screen))},close:function(t,r){return new Promise((function(i,o){if(!e){var a=new Error("The window is already closed.");return"function"===typeof r&&r(a.message),void o(a)}var s=z((function(){s(),"function"===typeof t&&t(d),i(d)}));n.close(d).catch((function(e){"function"===typeof r&&r(e),o(e)}))}))},snap:function(e,t,r,i){return a(this,void 0,void 0,(function(){var o,a,u;return s(this,(function(s){if(!e){if(u=new Error("Please specify a target window - "+e),"function"===typeof i)return i(u.message),[2];throw u}if("string"===typeof e){if(!(a=Tn.get(e))){if(u=new Error("Invalid target parameter or no such window. Invoked with:  "+e),"function"===typeof i)return i(u.message),[2];throw u}o=a.API.group}else o=e.group;return[2,Promise.all([(c=o,new Promise((function(e,t){var n=c.onWindowAdded((function(t,r){d.id===r.id&&(n(),e())}))}))),n.snap(d,e,t)]).then((function(){return"function"===typeof r&&r(d),d})).catch((function(e){return"function"===typeof i&&i(e),e}))];var c}))}))},showLoader:function(e){return new Promise((function(t,r){n.showLoader(d,e).then((function(){t(d)})).catch((function(e){r(e)}))}))},hideLoader:function(){return new Promise((function(e,t){n.hideLoader(d).then((function(){e(d)})).catch((function(e){t(e)}))}))},updateContext:D,lock:function(e,t){return d.isLocked?("function"===typeof e&&e(d),Promise.resolve(d)):new Promise((function(r,i){n.lock(d).then((function(){return U()})).then((function(){"function"===typeof e&&e(d),r(d)})).catch((function(e){"function"===typeof t&&t(e),i(e)}))}))},unlock:function(e,t){return d.isLocked?new Promise((function(r,i){n.unlock(d).then((function(){return U()})).then((function(){"function"===typeof e&&e(d),r(d)})).catch((function(e){"function"===typeof t&&t(e),i(e)}))})):("function"===typeof e&&e(d),Promise.resolve(d))},getIcon:function(e,t){return new Promise((function(r,i){n.getIcon(d).then((function(t){"function"===typeof e&&e(t),r(t)})).catch((function(e){"function"===typeof t&&t(e),i(e)}))}))},setIcon:function(e,t,r){return new Promise((function(i,o){n.setIcon(d,e).then((function(){"function"===typeof t&&t(d),i(d)})).catch((function(e){"function"===typeof r&&r(e),o(e)}))}))},setFrameColor:function(e,t,r){return new Promise((function(i,o){var a=re((function(){a(),"function"===typeof t&&t(d),i(d)}));n.setFrameColor(d,e).catch((function(e){"function"===typeof r&&r(e),o(e)}))}))},setTabTooltip:function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){if(!e)throw new Error(e+" is null or undefined");return[2,n.setTabTooltip(d,e)]}))}))},attachTab:function(e,t,r,i){return new Promise((function(o,a){var s,u=d.id,c="Invalid tab parameter - should be an object with property id or a string. Invoked for source window id:"+d.id;if(e){if("string"===typeof e)s=e;else{if("undefined"===typeof e.id)return void a(c);s=e.id}var l={sourceWindowId:s,targetWindowId:u};t&&(l.index=t);var f=Tn.get(l.sourceWindowId).API.onAttached((function(e){f(),"function"===typeof r&&r(d),o(d)}));n.attachTab(d,l).catch((function(e){"function"===typeof i&&i(e),f(),a(e)}))}else a(c)}))},detachTab:function(t,r,i){return new Promise((function(o,a){var s={windowId:d.id},u=t||{};"undefined"!==typeof u.relativeTo&&("string"===typeof u.relativeTo?s.relativeTo=u.relativeTo:"undefined"!==typeof u.relativeTo.id&&(s.relativeTo=u.relativeTo.id),"undefined"!==typeof u.relativeDirection&&(s.relativeDirection=u.relativeDirection),"undefined"!==typeof u.width&&(s.width=u.width),"undefined"!==typeof u.height&&(s.height=u.height)),"undefined"!==typeof u.bounds&&(s.bounds=u.bounds),"undefined"!==typeof u.hideTabHeader&&(s.hideTabHeader=u.hideTabHeader);var c=!1,l=!1,p=f.add("frame-attached",(function(t){var n=void 0===u.hideTabHeader||u.hideTabHeader!==t.isTabHeaderVisible;e===t.id&&n&&(c=!0,p(),l&&("function"===typeof r&&r(d),o(d),"function"===typeof h&&h()))})),h=Q((function(t){e===t.id&&(l=!0,h(),c&&("function"===typeof r&&r(d),o(d),"function"===typeof p&&p()))}));n.detachTab(d,s).catch((function(e){"function"===typeof i&&i(e),h(),p(),a(e)}))}))},setTabHeaderVisible:function(t,r,i){return new Promise((function(o,a){if(I===t)return"function"===typeof r&&r(d),o(d);var s=ie((function(n){n.id===e&&n.isTabHeaderVisible===t&&("function"===typeof r&&r(d),s(),o(d))}));n.setTabHeaderVisible(d,t).catch((function(e){"function"===typeof i&&i(e),a(e)}))}))},showPopup:function(e){return n.showPopup(d,e)},createFlydown:function(e){return n.createFlydown(d.id,e)},setModalState:function(e){return n.setModalState(d.id,e||!1)},setZoomFactor:function(e,t,r){return En.callbackifyPromise((function(){if(isNaN(e))throw new Error("zoomFactor is not a number");return n.setZoomFactor(d,e)}),t,r)},zoomIn:function(e,t){return En.callbackifyPromise((function(){return n.zoomIn(d)}),e,t)},zoomOut:function(e,t){return En.callbackifyPromise((function(){return n.zoomOut(d)}),e,t)},showDevTools:function(){return n.showDevTools(d)},capture:function(e){return n.capture(d,e)},flash:function(e,t){var r={shouldFlash:!0,mode:"auto"};return"boolean"===typeof e&&(r.shouldFlash=e),"undefined"!==typeof t&&(r.mode=t),n.flash(d,r)},setSticky:function(e,t,r){return new Promise((function(i,o){n.setSticky(d,e).then((function(){"function"===typeof t&&t(d),i(d)})).catch((function(e){"function"===typeof r&&r(e),o(e)}))}))},print:function(e){return n.print(d,e)},printToPDF:function(e){return n.printToPDF(d,e)},place:function(e){return n.place(d,e)},ungroup:function(t){return new Promise((function(r,i){var o=oe((function(t,n,i){e===t.id&&(o(),r(d))}));n.ungroup(d,t).catch((function(e){o(),i(e)}))}))},onClose:z,onUrlChanged:H,onTitleChanged:B,onFrameButtonAdded:G,onFrameButtonRemoved:V,onFrameButtonClicked:function(e){return f.add("onFrameButtonClicked",e)},onCollapsed:q,onExpanded:J,onMinimized:K,onMaximized:Y,onNormal:$,onAttached:function(e){return f.add("attached",e)},onDetached:Q,onVisibilityChanged:X,onContextUpdated:Z,onLockingChanged:ee,onBoundsChanged:te,onFrameColorChanged:re,onFocusChanged:ne,onStickyChanged:function(e){return f.add("sticky-changed",e)},onGroupChanged:oe,onWindowAttached:function(e){return f.add("window-attached",e)},onWindowDetached:function(e){return f.add("window-detached",e)},onTabSelectionChanged:function(e){return f.add("tab-selection-changed",e)},onTabHeaderVisibilityChanged:ie,onClosing:function(t){if(!xt(t))throw new Error("callback should be a function");return n.onClosing((function(e,n){var r=t();r&&r.then?r.then(e).catch(n):e()}),e)},onRefreshing:function(t){if(!xt(t))throw new Error("callback should be a function");return n.onRefreshing((function(e,n,r){var i=t(r);i&&i.then?i.then(e).catch(n):e()}),e)},onZoomFactorChanged:function(e){if(!xt(e))throw new Error("callback should be a function");return f.add("zoom-factor-changed",e)},onPlacementSettingsChanged:function(e){if(!xt(e))throw new Error("callback should be a function");return f.add("placementSettingsChanged",e)},onNeighboursChanged:function(e){if(!xt(e))throw new Error("callback should be a function");return f.add("neighbours-changed",e)},get tabs(){return function(){var e=Tn.list;return"tab"!==y.toLowerCase()?[]:Object.keys(e).reduce((function(t,n){var r=e[n];return r&&r.API.tabGroupId&&"undefined"!==typeof r.API.tabGroupId&&"undefined"!==typeof d.tabGroupId&&r.API.tabGroupId===d.tabGroupId&&t.push(r.API),t}),[])}()},get isTabHeaderVisible(){return I},get isTabSelected(){return x},getURL:function(){return Promise.resolve(g)},getTitle:function(){return Promise.resolve(v)},getBounds:function(){return Promise.resolve(w)},getContext:function(){return Promise.resolve(m)},setContext:function(e){return D(e)},resizeTo:function(e,t){return F({width:e,height:t})},moveTo:function(e,t){return F({top:e,left:t})},getParentWindow:function(){var e;return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){return(t=A.parentInstanceId)?[2,null===(e=Tn.list[t])||void 0===e?void 0:e.API]:[2,void 0]}))}))},getChildWindows:function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,Object.keys(Tn.list).map((function(e){return Tn.list[e].API})).filter((function(t){return t.settings.parentInstanceId===e}))]}))}))}},Events:le,Registry:f}},Mn=new(function(){function e(){this._registry=vn()}return Object.defineProperty(e.prototype,"hostInstance",{get:function(){return this.agmTarget},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t){this.agm=e,this.agmTarget=t},e.prototype.close=function(e){var t=this;return new Promise((function(n,r){t.execute("close",{windowId:e.id}).then((function(){n(e)})).catch((function(e){r(e)}))}))},e.prototype.navigate=function(e,t){var n=this;return new Promise((function(r,i){n.execute("navigate",{windowId:e.id,options:{url:t}}).then((function(){r(e)})).catch((function(e){i(e)}))}))},e.prototype.setStyle=function(e,t){var n;return a(this,void 0,void 0,(function(){var r,i,o,a,u,c,l,d,f,p,h,y,g;return s(this,(function(s){switch(s.label){case 0:return r=[],i=function(e){return r.push(e)},void 0===t.focus||e.isFocused||i(e.focus()),void 0!==t.hidden&&(o=!t.hidden,i(e.setVisible(o))),void 0!==t.onTop&&i(e.setOnTop(t.onTop)),void 0===t.tabTooltip&&void 0===t.tabToolTip||(n=t.tabTooltip,a=null!==n&&void 0!==n?n:t.tabToolTip,i(e.setTabTooltip(a))),u=t.maxWidth,c=t.maxHeight,l=t.minWidth,d=t.minHeight,f=t.allowClose,p=t.allowCollapse,h=t.allowLockUnlock,y=t.allowMaximize,g=t.allowMinimize,i(e.setSizeConstraints({maxWidth:u,maxHeight:c,minWidth:l,minHeight:d})),i(e.resetButtons({allowClose:f,allowCollapse:p,allowLockUnlock:h,allowMaximize:y,allowMinimize:g})),[4,Promise.all(r)];case 1:return s.sent(),[2,e]}}))}))},e.prototype.setSizeConstraints=function(e,t){var n=this;return new Promise((function(r,i){n.execute("setSizeConstraints",{windowId:e.id,options:t}).then((function(){r(e)})).catch(i)}))},e.prototype.setTabTooltip=function(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.execute("setTabTooltip",{windowId:e.id,options:{tabToolTip:t}})];case 1:return n.sent(),[2,e]}}))}))},e.prototype.resetButtons=function(e,t){var n=this;return new Promise((function(r,i){n.execute("resetButtons",{windowId:e.id,options:t}).then((function(){r(e)})).catch(i)}))},e.prototype.setOnTop=function(e,t){var n=this;return new Promise((function(r,i){n.execute("setOnTop",{windowId:e.id,options:{onTop:t}}).then((function(){r(e)})).catch(i)}))},e.prototype.setTitle=function(e,t){var n=this;return new Promise((function(r,i){var o={windowId:e.id,options:{title:t}};n.execute("setTitle",o).then((function(){r(e)})).catch((function(e){i(e)}))}))},e.prototype.setSticky=function(e,t){var n=this;return new Promise((function(r,i){var o={windowId:e.id,options:{isSticky:t}};n.execute("setSticky",o).then((function(){r(e)})).catch((function(e){i(e)}))}))},e.prototype.moveResize=function(e,t){var n=this;return new Promise((function(r,i){n.execute("moveResize",{windowId:e.id,options:{bounds:t}}).then((function(){r(e)})).catch((function(e){i(e)}))}))},e.prototype.addFrameButton=function(e,t){var n=this;return new Promise((function(r,i){n.execute("addButton",{windowId:e.id,options:t}).then((function(){r(e)})).catch((function(e){i(e)}))}))},e.prototype.removeFrameButton=function(e,t){var n=this;return new Promise((function(r,i){n.execute("removeButton",{windowId:e.id,options:t}).then((function(){r(e)})).catch((function(e){i(e)}))}))},e.prototype.activate=function(e){var t=this;return new Promise((function(n,r){t.execute("activate",{windowId:e.id}).then((function(){n(e)})).catch((function(e){r(e)}))}))},e.prototype.focus=function(e){var t=this;return new Promise((function(n,r){t.execute("focus",{windowId:e.id}).then((function(){n(e)})).catch((function(e){r(e)}))}))},e.prototype.maximizeRestore=function(e){var t=this;return new Promise((function(n,r){t.execute("maximizeRestore",{windowId:e.id}).then((function(){n(e)})).catch((function(e){r(e)}))}))},e.prototype.maximize=function(e){var t=this;return new Promise((function(n,r){t.execute("maximize",{windowId:e.id}).then((function(){n(e)})).catch((function(e){r(e)}))}))},e.prototype.restore=function(e){var t=this;return new Promise((function(n,r){t.execute("restore",{windowId:e.id}).then((function(){n(e)})).catch((function(e){r(e)}))}))},e.prototype.minimize=function(e){var t=this;return new Promise((function(n,r){t.execute("minimize",{windowId:e.id}).then((function(){n(e)})).catch((function(e){r(e)}))}))},e.prototype.collapse=function(e){var t=this;return new Promise((function(n,r){t.execute("collapse",{windowId:e.id}).then((function(){n(e)})).catch((function(e){r(e)}))}))},e.prototype.expand=function(e){var t=this;return new Promise((function(n,r){t.execute("expand",{windowId:e.id}).then((function(){n(e)})).catch((function(e){r(e)}))}))},e.prototype.toggleCollapse=function(e){var t=this;return new Promise((function(n,r){t.execute("toggleCollapse",{windowId:e.id}).then((function(){n(e)})).catch((function(e){r(e)}))}))},e.prototype.snap=function(e,t,n){var r=this;return new Promise((function(i,o){e.id;var a,s="Invalid target parameter - should be an object with property id or a string. Invoked for source window id:"+e.id;if(t){if("string"===typeof t)a=t;else{if("undefined"===typeof t.id)return void o(s);a=t.id}var u={targetWindowId:a};n&&(u.snappingEdge=n),r.execute("snap",{windowId:e.id,options:u}).then((function(){i(e)})).catch((function(e){o(e)}))}else o(s)}))},e.prototype.attachTab=function(e,t){var n=this;return new Promise((function(r,i){n.execute("attachTab",{windowId:e.id,options:t}).then((function(){r(e)})).catch((function(e){i(e)}))}))},e.prototype.detachTab=function(e,t){var n=this;return new Promise((function(r,i){n.execute("detachTab",{windowId:e.id,options:t}).then((function(){r(e)})).catch((function(e){i(e)}))}))},e.prototype.setVisible=function(e,t){var n=this;return void 0===t&&(t=!0),new Promise((function(r,i){var o;o=t?"show":"hide",n.execute(o,{windowId:e.id}).then((function(){r(e)})).catch((function(e){i(e)}))}))},e.prototype.showLoader=function(e,t){var n=this;return new Promise((function(r,i){n.execute("showLoadingAnimation",{windowId:e.id,options:t}).then((function(){r(e)})).catch((function(e){i(e)}))}))},e.prototype.hideLoader=function(e){var t=this;return new Promise((function(n,r){t.execute("hideLoadingAnimation",{windowId:e.id}).then((function(){n(e)})).catch((function(e){r(e)}))}))},e.prototype.updateContext=function(e,t){var n=this;return new Promise((function(r,i){n.execute("updateContext",{windowId:e.id,context:t,replace:!(Object.keys(e.context).length>0)}).then((function(){r(e)})).catch((function(e){i(e)}))}))},e.prototype.lock=function(e){var t=this;return new Promise((function(n,r){t.execute("lockUnlock",{windowId:e.id,options:{lock:!0}}).then((function(){n(e)})).catch((function(e){r(e)}))}))},e.prototype.unlock=function(e){var t=this;return new Promise((function(n,r){t.execute("lockUnlock",{windowId:e.id,options:{lock:!1}}).then((function(){n(e)})).catch((function(e){r(e)}))}))},e.prototype.getIcon=function(e){var t=this;return new Promise((function(n,r){t.execute("getIcon",{windowId:e.id,options:{}}).then((function(e){n(e.icon)})).catch((function(e){r(e)}))}))},e.prototype.setIcon=function(e,t){var n=this;return new Promise((function(r,i){n.execute("setIcon",{windowId:e.id,options:{dataURL:t}}).then((function(){r(e)})).catch((function(e){i(e)}))}))},e.prototype.setFrameColor=function(e,t){var n=this;return new Promise((function(r,i){n.execute("setFrameColor",{windowId:e.id,options:{frameColor:t}}).then((function(){r(e)})).catch((function(e){i(e)}))}))},e.prototype.setTabHeaderVisible=function(e,t){var n=this;return new Promise((function(r,i){n.execute("setTabHeaderVisible",{windowId:e.id,options:{toShow:t}}).then((function(){r(e)})).catch((function(e){i(e)}))}))},e.prototype.showPopup=function(e,t){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return t?((n=o({},t)).targetLocation||(n.targetLocation="bottom"),r=o(o({},n),{popupBounds:n.size,targetId:e.id,popupId:n.windowId}),[4,this.execute("showPopupWindow",{windowId:e.id,options:r})]):[2,Promise.reject("The options object is not valid!")];case 1:return i.sent(),[2,e]}}))}))},e.prototype.createFlydown=function(e,t){return a(this,void 0,void 0,(function(){var n,r,i=this;return s(this,(function(u){return t?((n=o({},t)).horizontalOffset||(n.horizontalOffset=0),n.verticalOffset||(n.verticalOffset=0),r=this.reformatFlydownOptions(e,n),[2,this.execute("setFlydownArea",{windowId:e,options:r}).then((function(){var e=r.zones.map((function(e){return e.id}));return r.zones.forEach((function(e){var n="function"===typeof e.flydownSize?e.flydownSize:function(){return e.flydownSize};t.size instanceof Function&&e.flydownSize&&(n=function(n,r){return a(i,void 0,void 0,(function(){var i;return s(this,(function(o){switch(o.label){case 0:return t.size instanceof Function?[4,t.size(n,r)]:[3,2];case 1:i=o.sent(),o.label=2;case 2:return e.flydownSize instanceof Function&&e.flydownSize!==t.size?[4,e.flydownSize(n,r)]:[3,4];case 3:return[2,o.sent()||i];case 4:return[2,i||e.flydownSize]}}))}))}),i._registry.clearKey(r.targetId+"_"+e.id),i._registry.add(r.targetId+"_"+e.id,n)})),{destroy:function(){return i.clearFlydownArea(r.targetId,e)},options:n}}))]):[2,Promise.reject("The options object is not valid!")]}))}))},e.prototype.setModalState=function(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){return[2,this.execute("setModalState",{windowId:e,options:{isModal:t}})]}))}))},e.prototype.handleFlydownBoundsRequested=function(e,t){return a(this,void 0,void 0,(function(){var n,r,i,a,u;return s(this,(function(s){switch(s.label){case 0:return n=function(){return t.cancel=!0},r={zoneId:t.flydownId,flydownWindowBounds:t.flydownWindowBounds,flydownWindowId:t.flydownWindowId},[4,Promise.all(this._registry.execute(e+"_"+t.flydownId,r,n))];case 1:return 1===(i=s.sent()).length?(a={height:0,width:0,top:0,left:0},u="object"!==typeof i[0]||Array.isArray(i[0])?a:i[0],[2,o(o({},t),{flydownWindowBounds:u})]):[2]}}))}))},e.prototype.zoomIn=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.execute("zoomIn",{windowId:e.id})];case 1:return t.sent(),[2,e]}}))}))},e.prototype.zoomOut=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.execute("zoomOut",{windowId:e.id})];case 1:return t.sent(),[2,e]}}))}))},e.prototype.setZoomFactor=function(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.execute("setZoomFactor",{windowId:e.id,options:{zoomFactor:t}})];case 1:return n.sent(),[2,e]}}))}))},e.prototype.showDevTools=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.execute("showDevTools",{windowId:e.id})];case 1:return t.sent(),[2,e]}}))}))},e.prototype.capture=function(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.execute("captureScreenshot",{windowId:e.id,options:o({},t)})];case 1:return[2,n.sent().data]}}))}))},e.prototype.captureGroup=function(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.execute("captureGroupScreenshot",{windowId:e[0],options:o({groupWindowIds:e},t)})];case 1:return[2,n.sent().data]}}))}))},e.prototype.flash=function(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.execute("flash",{windowId:e.id,options:o({},t)})];case 1:return n.sent(),[2,e]}}))}))},e.prototype.configure=function(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){return[2,this.execute("configure",{windowId:e,options:o({},t)})]}))}))},e.prototype.print=function(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.execute("print",{windowId:e.id,options:o({},t)})];case 1:return n.sent(),[2,e]}}))}))},e.prototype.printToPDF=function(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.execute("printToPDF",{windowId:e.id,options:o({},t)})];case 1:return[2,n.sent().filePath]}}))}))},e.prototype.place=function(e,t){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){return(n=o({},t)).display&&(n.display=n.display.index+1),[2,this.execute("place",{windowId:e.id,options:o({},n)})]}))}))},e.prototype.execute=function(e,t){var n=this;return new Promise((function(r,i){var a=o(o({},t),{command:e});n.agm.invoke("T42.Wnd.Execute",a,n.agmTarget).then((function(e){e.returned&&e.returned.errorMsg?i(e):r(e.returned)})).catch((function(e){i(e)}))}))},e.prototype.setGroupHeaderVisible=function(e,t){return this.execute("setGroupHeaderVisibility",{windowId:e,options:{toShow:t}})},e.prototype.getGroupTitle=function(e){return this.execute("getGroupTitle",{windowId:e,options:{}}).then((function(e){return e.title}))},e.prototype.setGroupTitle=function(e,t){return this.execute("setGroupTitle",{windowId:e,options:{title:t}})},e.prototype.onClosing=function(e,t){var n="undefined"!==typeof window&&window.glue42gd;if(n)return n.addCloseHandler(e,t)},e.prototype.onRefreshing=function(e,t){var n="undefined"!==typeof window&&window.glue42gd;if(n)return n.addRefreshHandler(e,t)},e.prototype.ungroup=function(e,t){var n=this;return new Promise((function(r,i){var o={windowId:e.id,options:t};n.execute("ungroup",o).then((function(){r(e)})).catch((function(e){i(e)}))}))},e.prototype.reformatFlydownOptions=function(e,t){var n=function(e,n){if(t[n]&&(void 0===e[n]||null===e[n])){var r=t[n];e[n]=r}},r=t.zones.map((function(e){return n(e,"windowId"),n(e,"targetLocation"),!t.size||void 0!==e.flydownSize&&null!==e.flydownSize||(e.flydownSize=t.size),e.flydownBounds=e.flydownSize,e.flydownId=e.windowId,e.targetLocation||(e.targetLocation="bottom"),e}));return o(o({},t),{zones:r,targetId:e,flydownBounds:t.size,flydownActiveArea:t.activeArea})},e.prototype.clearFlydownArea=function(e,t){var n=this;return this.execute("clearFlydownWindowArea",{windowId:e,options:{}}).then((function(){t.forEach((function(t){n._registry.clearKey(e+"_"+t)}))}))},e}());function On(e,t){var n=Tn.list;return Object.keys(n).reduce((function(r,i){var o=n[i];return o.API.tabGroupId===t&&o.API.id!==e&&(r[i]=o),r}),{})}var Rn,jn,Ln,Nn=function(){function e(e,t,n,r,i,o){this._registry=vn(),this._waitTimeout=1e4,this._agm=e,this._logger=t.subLogger("gd-env"),this._agmInstance=this.normalizeInstance(i),this._windowId=o,this._appManagerGetter=n,this._displayAPIGetter=r}return e.prototype.init=function(){var e=this;return new Promise((function(t,n){"undefined"===typeof e._agmInstance&&(e._agmInstance="best"),e._agm.registerAsync("T42.Wnd.OnEventWithResponse",(function(t,n,r,i){e.respondToEvent(t).then(r).catch(i)})),new Promise((function(r,i){e._agm.subscribe("T42.Wnd.OnEvent",{waitTimeoutMs:e._waitTimeout,target:e._agmInstance,onData:function(n){e.updateWindow(n.data,t)},onConnected:function(t){e._agmInstance=e.normalizeInstance(t),Mn.init(e._agm,e._agmInstance)}}).catch((function(e){n("Can not subscribe for stream T42.Wnd.OnEvent. Err: "+e)}))}))}))},Object.defineProperty(e.prototype,"executor",{get:function(){return Mn},enumerable:!0,configurable:!0}),e.prototype.open=function(e,t,n,r,i){var a=o({},n=n||{});void 0!==e?(void 0!==a.relativeTo&&"string"!==typeof a.relativeTo&&(a.relativeTo=a.relativeTo.id||""),a.name=e,a.url=t,a.windowState=n.windowState||n.state,delete a.state,this._agm.invoke("T42.Wnd.Create",a,this._agmInstance).then((function(e){if(void 0!==e.returned){var t=e.returned.id;r(t)}else i({message:"failed to execute T42.Wnd.Create - unknown reason"})})).catch(i)):i({message:"The name is undefined"})},e.prototype.createFlydown=function(e,t){return this.executor.createFlydown(e,t)},e.prototype.showPopup=function(e,t){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:return n=Tn.get(e),[4,this.executor.showPopup(n.API,t)];case 1:return r.sent(),[2]}}))}))},e.prototype.tabAttached=function(e){return this._registry.add("tab-attached",e)},e.prototype.tabDetached=function(e){return this._registry.add("tab-detached",e)},e.prototype.onWindowFrameColorChanged=function(e){return this._registry.add("frame-color-changed",e)},e.prototype.onEvent=function(e){return this._registry.add("window-event",e)},e.prototype.my=function(){return this._windowId},e.prototype.execute=function(e,t,n){return this._agm.invoke("T42.Wnd.Execute",{command:e,options:n,windowId:t})},e.prototype.setGroupHeaderVisible=function(e,t){return this._agm.invoke("T42.Wnd.SetGroupHeaderVisible",{windowId:e,toShow:t},this._agmInstance)},e.prototype.onCompositionChanged=function(e){return this._registry.add("composition-changed",e)},e.prototype.onGroupHeaderVisibilityChanged=function(e){return this._registry.add("group-header-changed",e)},e.prototype.onWindowGotFocus=function(e){return this._registry.add("got-focus",e)},e.prototype.onWindowLostFocus=function(e){return this._registry.add("lost-focus",e)},e.prototype.normalizeInstance=function(e){if(e)return{application:e.application,machine:e.machine,user:e.user}},e.prototype.respondToEvent=function(e){return"ShowFlydownBoundsRequested"===e.type?this.executor.handleFlydownBoundsRequested(e.data.windowId,e.data):Promise.reject("There isn't a handler for "+e.type)},e.prototype.updateWindow=function(e,t){var n=this,r=this.getExtendedStreamEvent(e);if("Snapshot"===e.type)return e.windows.forEach((function(e){var t=n.createWindow(e.id,e);Tn.markReadyToShow(t.API.id),n._registry.execute("window-event",r)})),void t(this);if("Created"===e.type){var i=e,o=this.createWindow(i.windowId,i.data||{});return Tn.setReadyState(o.API.id),void this._registry.execute("window-event",r)}var a=Tn.get(e.windowId);if(a){var s=a.API,u=a.Events;if("BoundsChanged"===e.type){var c=e;u.handleBoundsChanged(c.data)}if("UrlChanged"===e.type){var l=e;Tn.setUrlChangedState(l.windowId),u.handleUrlChanged(l.data)}if("TitleChanged"===e.type){var d=e;u.handleTitleChanged(d.data)}if("IsStickyChanged"===e.type){var f=e;u.handleIsStickyChanged(f.data)}if("VisibilityChanged"===e.type&&u.handleVisibilityChanged(e.data),"ContextChanged"===e.type&&u.handleContextUpdated(e.data),"StateChanged"===e.type&&u.handleWindowChangeState(e.data),"FrameColorChanged"===e.type&&(u.handleFrameColorChanged(e.data),this._registry.execute("frame-color-changed",s)),"CompositionChanged"===e.type){var p=e;u.handleCompositionChanged(p.data.neighbors,p.data.groupId),this._registry.execute("composition-changed",p.data)}if("GroupHeaderVisibilityChanged"===e.type){var h=e;u.handleGroupHeaderVisibilityChanged(h.data.groupHeaderVisible),this._registry.execute("group-header-changed",h.data)}if("FocusChanged"===e.type){var y=e;this.focusChanged(u,s,y.data)}if("WindowFrameChanged"===e.type&&(u.handleFrameAttached(e.data.frameId,e.data.isTabHeaderVisible),this._registry.execute("frame-changed")),"WindowFrameAdded"===e.type){u.handleAttached(e.data.frameId,e.data.isTabHeaderVisible);var g=On(s.id,e.data.frameId);Object.keys(g).forEach((function(e){g[e].Events.handleWindowAttached(s)})),this._registry.execute("tab-attached",s,e.data.frameId,e.data.isTabHeaderVisible)}if("WindowFrameRemoved"===e.type){var v=s.tabGroupId;u.handleDetached(e.data.frameId);var m=On(s.id,v);Object.keys(m).forEach((function(e){m[e].Events.handleWindowDetached(s)}));var w=this._registry.add("frame-changed",(function(){w(),n._registry.execute("tab-detached",s,e.data.frameId,s.tabGroupId)}))}"TabHeaderVisibilityChanged"===e.type&&u.handleTabHeaderVisibilityChanged(e.data.isTabHeaderVisible),"FrameSelectionChanged"===e.type&&u.handleFrameSelectionChanged(e.data.newWindowId,e.data.prevWindowId),"ButtonClicked"===e.type&&u.handleFrameButtonClicked(e.data),"ButtonAdded"===e.type&&u.handleFrameButtonAdded(e.data),"ButtonRemoved"===e.type&&u.handleFrameButtonRemoved(e.data),"WindowZoomFactorChanged"===e.type&&u.handleZoomFactorChanged(e.data),"Closed"===e.type&&(Tn.remove(a),u.handleWindowClose()),"FrameIsLockedChanged"===e.type&&u.handleFrameIsLockedChanged(e.data),"PlacementSettingsChanged"===e.type&&u.handlePlacementSettingsChanged(e.data),this._registry.execute("window-event",r)}else this._logger.error("received update for unknown window. Stream:', "+JSON.stringify(e,null,4))},e.prototype.createWindow=function(e,t){var n,r=Tn.get(e),i=Pn(e,this.mapToWindowConstructorOptions(t),Mn,this._logger,this._appManagerGetter,this._displayAPIGetter,this._agm,null===(n=r)||void 0===n?void 0:n.Registry);return Tn.add(i),i},e.prototype.focusChanged=function(e,t,n){e.handleFocusChanged(n),n?this._registry.execute("got-focus",t):this._registry.execute("lost-focus",t)},e.prototype.mapToWindowConstructorOptions=function(e){return{name:e.name,context:e.context,bounds:e.bounds,url:e.url,title:e.title,isVisible:e.isVisible,focus:e.isFocused,state:e.state,frameColor:e.frameColor,groupId:e.groupId,neighbours:e.neighbors,isFocused:e.isFocused,isGroupHeaderVisible:e.groupHeaderVisible,isCollapsed:e.isCollapsed,tabGroupId:e.frameId,mode:e.mode,isTabHeaderVisible:e.isTabHeaderVisible,isTabSelected:e.isActiveTab,settings:e.settings,windowType:e.windowType,zoomFactor:e.zoomFactor,isLocked:e.isLocked,placementSettings:e.placementSettings,isSticky:e.isSticky}},e.prototype.getExtendedStreamEvent=function(e){try{var t=o({state:e.type,windowName:Tn.get(e.windowId).API.name},e);return"WindowFrameAdded"===t.state&&(t.state="TabAttached"),"StateChanged"===t.state&&(t.state=t.data.charAt(0).toUpperCase()+t.data.slice(1)),"ButtonAdded"===t.state&&(t.state="FrameButtonAdded"),"ButtonRemoved"===t.state&&(t.state="FrameButtonRemoved"),t}catch(n){return e}},e}(),Fn=function(e,t){var n=vn(),r=[];function i(){return new Promise((function(e,t){var n=u((function(t){n(),e()}))}))}function o(e,n,r,i){return new Promise((function(i,o){t.execute(e,n).then((function(e){"function"===typeof r&&r(c),i(c)})).catch((function(e){o(e)}))}))}function a(){var e=[];return r.forEach((function(t){var n=s(t);"undefined"!==typeof n&&e.push(n)})),e}function s(e){return Tn.get(e)?Tn.get(e).API:void 0}function u(e){return n.add("header-visibility-changed",e)}var c={id:e,get windows(){return function(e){var t=a();return"function"===typeof e&&e(t),t}()},find:function(e,t){if(!It(e)){var n;n="string"===typeof e?e:e.id;var i=r.indexOf(n);if(-1!==i){var o=s(r[i]);return"function"===typeof t&&t(o),o}}},get isHeaderVisible(){return void 0===a().find((function(e){return!e.isGroupHeaderVisible}))},showHeader:function(e,n){return new Promise((function(n,o){Promise.all([t.setGroupHeaderVisible(r[0],!0),i()]).then((function(){"function"===typeof e&&e(c),n(c)})).catch((function(e){o(e)}))}))},hideHeader:function(e,n){return new Promise((function(n,o){Promise.all([t.setGroupHeaderVisible(r[0],!1),i()]).then((function(){"function"===typeof e&&e(c),n(c)})).catch((function(e){}))}))},getTitle:function(){return t.getGroupTitle(r[0])},setTitle:function(e){return t.setGroupTitle(r[0],e)},capture:function(e){return t.captureGroup(r,e)},maximize:function(e,t){return o("maximizeGroup",{windowId:r[0]},e)},restore:function(e,t){return o("restoreGroup",{windowId:r[0]},e)},onHeaderVisibilityChanged:u,onWindowAdded:function(e){return n.add("window-added",e)},onWindowRemoved:function(e){return n.add("window-removed",e)}};return{groupAPI:c,groupInternal:{addWindow:function(e){if(-1===r.indexOf(e)){r.push(e);var t=Tn.get(e);t.Events.handleGroupAssociation(c),n.execute("window-added",c,t.API)}},removeWindow:function(e){var t=r.indexOf(e);if(-1!==t){r.splice(t,1);var i=s(e);n.execute("window-removed",c,i)}},handleGroupHeaderVisibilityChanged:function(e){n.execute("header-visibility-changed",c)}}}},Wn=function(e,t){var n=t.subLogger("groups"),r=vn(),i={},o=-1,a=Tn.list;function s(e,n){var r,o;if("undefined"!==typeof e)return r="string"===typeof e?e:e.id,Object.keys(i).forEach((function(e){var t=i[e].groupAPI;void 0===t.find(r)||(o=t)})),"function"===typeof n&&n(o),o;t.debug("trying to find a group by a window, but winId is undefined")}function u(e){n.trace("Adding new window "+e.API.id+" to win.API.groupId "+e.API.groupId);var t=c(e);t&&(n.trace("handleGroupAssociation "+e.API.id+" to group.groupAPI.id "+t.groupAPI.id),e.Events.handleGroupAssociation(t.groupAPI))}function c(t,r){var o=r||t.API.groupId,a=t.API.id;if("undefined"!==typeof o&&"undefined"!==typeof a){var s=function(t){if(i.hasOwnProperty(t))return i[t];var n=Fn(t,e.executor);return i[t]=n,n}(o);return s.groupInternal.addWindow(a),s}n.debug("trying to add a window without group - winId: "+a)}function l(e,t){var n=e.API.id,r=t||e.API.groupId;"undefined"!==typeof r&&(i[r].groupInternal.removeWindow(n),e.Events.handleGroupAssociation(void 0),function(e){i.hasOwnProperty(e)&&"undefined"!==typeof i[e]&&0===i[e].groupAPI.windows.length&&delete i[e]}(r))}return Object.keys(a).forEach((function(e){u(a[e])})),e.onCompositionChanged((function(e){!function(e){var t=e.groupId,i=e.windowId,o=s(i),a=o?o.id:void 0;if(n.trace("handleCompositionChanged newGroupId: "+t+" windowId: "+i+" oldGroup: "+a),a!==t){var u=Tn.get(i)||Tn.get(i),d=c(u,t);o&&(l(u,a),r.execute("window-moved",i,o,t)),u.Events.handleGroupChanged(d.groupAPI,o)}else n.trace("handleCompositionChanged newGroupId: "+t+" windowId: "+i+" oldGroup: "+a+" are the same - returning...")}(e)})),e.onGroupHeaderVisibilityChanged((function(e){var t=s(e.windowId);if("undefined"!==typeof t){var n=i[t.id];-1===o&&(o=t.windows.length),0===--o&&(o=-1,n.groupInternal.handleGroupHeaderVisibilityChanged(e))}})),Tn.onAdded((function(e){u(e)})),Tn.onRemoved((function(e){l(e)})),{groupsAPI:{get my(){return s(e.my())},list:function(e){var t=Object.keys(i).map((function(e){if(i[e])return i[e].groupAPI}));return"function"===typeof e&&e(t),t},findGroupByWindow:s},groupsEvents:{onWindowMoved:function(e){return r.add("window-moved",e)}}}},Dn=function(e,t,n,r,i){var o,a,s=vn(),u=t;Tn.init(u);var c=new Promise((function(t,s){(function(e,t,n,r,i){var o=t;return new Promise((function(t,a){if(2===i)throw o.trace("running in HC"),new Error("GD2 not supported");if(i>=3)o.trace("running in GD 3"),new Nn(e,o,n,r,void 0,window.glue42gd.windowId).init().then(t).catch(a);else{var s=new Nn(e,o,n,r).init();Promise.race([s,(u=1e4,new Promise((function(e,t){return setTimeout((function(){t("timeout waiting for streams")}),u)})))]).then(t).catch(a)}var u}))})(e,u,n,r,i).then((function(e){a=e,o=Wn(e,u),t()})).catch((function(e){var t="Environment detector fails with: "+e;u.error(t),s(t)}))}));function l(){var e=Tn.getIfReady(a.my());return e?e.API:void 0}function d(e){return s.add("window-added",e)}function f(e){return s.add("window-removed",e)}return Tn.onReadyWindow((function(e){s.execute("window-added",e.API)})),Tn.onRemoved((function(e){s.execute("window-removed",e.API)})),{my:l,open:function(e,t,n,r,i){return new Promise((function(o,s){var u=function(e){"function"===typeof i&&i(e),s(e)};a.open(e,t,n,(function(e){Tn.waitFor(e).then((function(e){"function"===typeof r&&r(e.API),o(e.API),"electron"===e.API.windowType&&e.Events.handleUrlChanged(e.API.url)})).catch(u)}),u)}))},find:function(e,t,n){var r=Tn.list,i=Object.keys(r).reduce((function(t,n){var i=r[n];return i&&i.API.name===e&&t.push(i.API),t}),[]);if("function"!==typeof t)return i[0];i.length>0?t(i[0]):"function"===typeof n&&n("There is no window with name:"+e)},findById:function(e,t,n){var r=Tn.list,i=Object.keys(r).reduce((function(t,n){var i=r[n];return"undefined"!==typeof i&&i.API.id===e&&t.push(i.API),t}),[]);if("function"!==typeof t)return i[0];i.length>0?t(i[0]):"function"===typeof n&&n("There is no window with such id:"+e)},list:function(e){var t=Tn.list,n=Object.keys(t).map((function(e){return t[e].API}));if("function"!==typeof e)return n;e(n)},ready:function(){return c},onWindowAdded:d,windowAdded:d,onWindowRemoved:f,windowRemoved:f,onTabAttached:function(e){var t,n=!1;return c.then((function(){n||(t=a.tabAttached(e))})),function(){n=!0,t&&t()}},onTabDetached:function(e){var t,n=!1;return c.then((function(){n||(t=a.tabDetached(e))})),function(){n=!0,t&&t()}},onWindowFrameColorChanged:function(e){var t,n=!1;return c.then((function(){n||(t=a.onWindowFrameColorChanged(e))})),function(){n=!0,t&&t()}},get groups(){return o.groupsAPI},onWindowGotFocus:function(e){var t,n=!1;return c.then((function(){n||(t=a.onWindowGotFocus(e))})),function(){n=!0,t&&t()}},onWindowLostFocus:function(e){var t,n=!1;return c.then((function(){n||(t=a.onWindowLostFocus(e))})),function(){n=!0,t&&t()}},onEvent:function(e){var t,n=!1;return c.then((function(){n||(t=a.onEvent(e))})),function(){n=!0,t&&t()}},createFlydown:function(e,t){return a.createFlydown(e,t)},showPopup:function(e,t){return a.showPopup(e,t)},configure:function(e){var t=l(),n=t?t.id:"";return Mn.configure(n,e)}}},Un=new(function(){function e(){this.layouts=[]}return e.prototype.removeWhere=function(e){this.layouts=this.layouts.filter(e)},e.prototype.add=function(e){this.layouts.push(e)},Object.defineProperty(e.prototype,"all",{get:function(){return this.layouts},enumerable:!0,configurable:!0}),e.prototype.where=function(e){return this.layouts.filter(e)},e.prototype.first=function(e){return this.where(e)[0]},e}()),Bn=1,zn={nextValue:function(){return(Bn=(9301*Bn+49297)%233280)/233280},seed:function(e){Bn=e}},Hn="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function Gn(){Ln=!1}function Vn(e){if(e){if(e!==Rn){if(e.length!==Hn.length)throw new Error("Custom alphabet for shortid must be "+Hn.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,n){return t!==n.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+Hn.length+" unique characters. These characters were not unique: "+t.join(", "));Rn=e,Gn()}}else Rn!==Hn&&(Rn=Hn,Gn())}function qn(){return Ln||(Ln=function(){Rn||Vn(Hn);for(var e,t=Rn.split(""),n=[],r=zn.nextValue();t.length>0;)r=zn.nextValue(),e=Math.floor(r*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}var Jn,Yn,Kn={characters:function(e){return Vn(e),Rn},seed:function(e){zn.seed(e),jn!==e&&(Gn(),jn=e)},lookup:function(e){return qn()[e]},shuffled:qn},$n="object"===typeof window&&(window.crypto||window.msCrypto),Qn=function(){if(!$n||!$n.getRandomValues)return 48&Math.floor(256*Math.random());var e=new Uint8Array(1);return $n.getRandomValues(e),48&e[0]},Xn=function(e,t){for(var n,r=0,i="";!n;)i+=e(t>>4*r&15|Qn()),n=t<Math.pow(16,r+1),r++;return i},Zn=function(e){var t=Kn.shuffled();return{version:15&t.indexOf(e.substr(0,1)),worker:15&t.indexOf(e.substr(1,1))}},er=function(e){var t="",n=Math.floor(.001*(Date.now()-1459707606518));return n===Yn?Jn++:(Jn=0,Yn=n),t+=Xn(Kn.lookup,6),t+=Xn(Kn.lookup,e),Jn>0&&(t+=Xn(Kn.lookup,Jn)),t+=Xn(Kn.lookup,n)},tr=function(e){if(!e||"string"!==typeof e||e.length<6)return!1;for(var t=Kn.characters(),n=e.length,r=0;r<n;r++)if(-1===t.indexOf(e[r]))return!1;return!0},nr=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=0;function n(){return er(t)}e.exports=n,e.exports.generate=n,e.exports.seed=function(t){return Kn.seed(t),e.exports},e.exports.worker=function(n){return t=n,e.exports},e.exports.characters=function(e){return void 0!==e&&Kn.characters(e),Kn.shuffled()},e.exports.decode=Zn,e.exports.isValid=tr})),rr=(nr.generate,nr.seed,nr.worker,nr.characters,nr.decode,nr.isValid,nr),ir=function(){function e(e,t,n,r){this.config=e,this.activitiesGetter=t,this.callbacks=n,this.logger=r,this.interop=e.agm,this.registerRequestMethods()}return e.prototype.onSaveRequested=function(e){return this.callbacks.add("saveRequested",e)},e.prototype.isActivityOwner=function(){if("undefined"!==typeof htmlContainer){var e=htmlContainer.getContext();return e&&e._t42&&e._t42.activityIsOwner}var t=this.activitiesGetter();if(!t)return!1;if(!t.inActivity)return!1;var n=t.my.window,r=t.my.activity;return!(!r&&!n)&&r.owner.id===n.id},e.prototype.registerRequestMethods=function(){var e=this;this.interop.register("T42.HC.GetSaveContext",(function(t){var n,r,i,o=e.callbacks.execute("saveRequested",t);(null===(n=o)||void 0===n?void 0:n.length)>1&&e.logger.warn('Multiple subscriptions for "glue.layouts.onSaveRequested" - only the first one will be used');var a=o[0],s=e.config.autoSaveWindowContext;if(s)return{autoSaveWindowContext:s};var u={windowContext:null===(r=a)||void 0===r?void 0:r.windowContext,activityContext:void 0};return e.isActivityOwner()&&(u.activityContext=null===(i=a)||void 0===i?void 0:i.activityContext),u}))},e}();function or(e){return e?Array.isArray(e)?e.map((function(e){return or(e)})):"string"===typeof e||"number"===typeof e||"boolean"===typeof e?e:Object.keys(e).reduce((function(t,n){var r=or(e[n]),i=n;return n[0].toLowerCase()!==n[0]&&(i=n[0].toLowerCase()+n.substr(1)),t[i]=r,t}),{}):e}var ar=function(e){this.name=e.name,this.type=e.type,this.components=e.components,this.context=e.context,this.metadata=e.metadata,this.version=e.version,this.displays=e.displays},sr=function(){function e(e,t,n,r){this.config=e,this.stream=t,this.callbacks=n,this.appManager=e.appManager,this.onEvent=t.onEvent,this.provider=new ir(e,e.activityGetter,n,r),t.subscribe()}return e.prototype.setDefaultGlobal=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.config.agm.invoke("T42.ACS.SelectDefaultLayout",{name:e})];case 1:return t.sent(),[2]}}))}))},e.prototype.clearDefaultGlobal=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.config.agm.invoke("T42.ACS.DeselectDefaultLayout")];case 1:return e.sent(),[2]}}))}))},e.prototype.getDefaultGlobal=function(){return a(this,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return[4,this.config.agm.invoke("T42.ACS.GetDefaultLayout")];case 1:return e=n.sent(),(t=e.returned)?this.isSlimMode()?[2,t]:[2,this.list().find((function(e){return e.name===t.name&&"Global"===e.type}))]:[2,void 0]}}))}))},e.prototype.ready=function(){return"fullWaitSnapshot"===this.config.mode?this.stream.gotSnapshot:this.stream.ready},e.prototype.save=function(e){var t=this;return new Promise((function(n,r){if(t.verifyNotSlimMode(),!e.name)throw Error("layout.name argument is required");e.type||(e.type="Global"),e.activityId&&(e.type="Activity"),"undefined"===typeof e.ignoreHidden&&(e.ignoreHidden=!0);var i={name:e.name,actIds:[],appIds:[],type:e.type,context:e.context,metadata:e.metadata||{},options:{ignoreLayoutRestrictions:!1}};if("Activity"===e.type){var o=e.activityId;if(!o){if(!t.appManager.myInstance.inActivity)throw new Error("Current application is not in activity. Can not save activity layout for it");o=t.appManager.myInstance.activityId}i.actIds.push(o),i.options={ignoreLayoutRestrictions:!0}}else{if("Global"!==e.type)throw new Error("layout type "+e.type+" not supported");if(2===t.config.gdMajorVersion){var a=t.appManager.instances();e.ignoreHidden&&(a=a.filter((function(e){return t.isVisibleWindow(e)}))),e.ignoreMyInstance&&t.appManager.myInstance&&(a=a.filter((function(e){return e.id!==t.appManager.myInstance.id}))),a.reduce((function(e,t){if(!t.id)return e;if(t.inActivity){var n=t.activityId;-1===e.actIds.indexOf(n)&&e.actIds.push(n)}else e.appIds.push(t.id);return e}),i)}else i.autoCollectApps=!0}t.invokeMethodAndTrack("T42.ACS.SaveLayout",i,n,r)}))},e.prototype.restore=function(e){var t=this;return new Promise((function(n,r){if(t.verifyNotSlimMode(),"undefined"===typeof e)throw Error("options argument is required");if(!e.name)throw Error("options.name argument is required");e.type||(e.type="Global"),e.activityIdToJoin&&(e.type="Activity"),"undefined"===typeof e.restoreActivityOwner&&(e.restoreActivityOwner=!1),"undefined"===typeof e.ignoreActivityWindowTypes&&(e.ignoreActivityWindowTypes=[]),"undefined"===typeof e.setActivityContext&&(e.setActivityContext=!0),"undefined"===typeof e.closeRunningInstance&&("Global"===e.type?e.closeRunningInstance=!0:"Activity"===e.type&&(e.closeRunningInstance=!1)),"undefined"===typeof e.reuseWindows&&(e.reuseWindows=!0),e.context=e.context||{};var i={restoreOptions:{activityToJoin:e.activityIdToJoin,setActivityContext:e.setActivityContext,ignoreActivityWindowTypes:e.ignoreActivityWindowTypes,restoreActivityOwner:e.restoreActivityOwner,closeOldWindows:e.closeRunningInstance,reuseExistingWindows:e.reuseWindows}},o={type:e.type,name:e.name,context:e.context,toClose:[],splash:e.splash};2===t.config.gdMajorVersion&&e.closeRunningInstance&&(o.toClose=t.getInstancesToClose(e)),e.timeout&&(o.timeout=e.timeout),o.context._t42=i,t.invokeMethodAndTrack("T42.ACS.RestoreLayout",o,n,r,!0)}))},e.prototype.remove=function(e,t){var n=this;return new Promise((function(r,i){if(n.verifyNotSlimMode(),!t)throw Error("name argument is required");if(!e)throw Error("type argument is required");var o={type:e,name:t};n.invokeMethodAndTrack("T42.ACS.RemoveLayout",o,r,i)}))},e.prototype.list=function(){return this.verifyNotSlimMode(),Un.all},e.prototype.import=function(e,t){var n=this;return new Promise((function(r,i){n.verifyNotSlimMode();var o={mode:t||"replace",layouts:e};n.invokeMethodAndTrack("T42.ACS.ImportLayouts",o,r,i,!0)}))},e.prototype.export=function(e){var t=this;return new Promise((function(n,r){t.invokeMethodAndTrack("T42.ACS.ExportLayouts",{},(function(r){var i=t.getObjectValues(r.Layouts).map((function(e){return new ar(or(e))}));e&&(i=i.filter((function(t){return t.type=e}))),n(i)}),r,!0)}))},e.prototype.rename=function(e,t){var n=this;return new Promise((function(r,i){if(n.verifyNotSlimMode(),!e)throw Error("layout argument is required");if(!e.name)throw Error("name argument is required");if(!e.type)throw Error("type argument is required");var o={type:e.type,oldName:e.name,newName:t};n.invokeMethodAndTrack("T42.ACS.RenameLayout",o,r,i)}))},e.prototype.updateMetadata=function(e){var t=this;return new Promise((function(n,r){if(!e)throw Error("layout argument is required");if(!e.name)throw Error("name argument is required");if(!e.type)throw Error("type argument is required");if(!e.metadata)throw Error("metadata argument is required");var i={name:e.name,type:e.type,metadata:e.metadata};t.invokeMethodAndTrack("T42.ACS.UpdateMetadata",i,n,r,!0)}))},e.prototype.hibernate=function(e,t){var n=this;return new Promise((function(r,i){if(!e)return i("name cannot be empty");var o={name:e,type:"Global",context:(t=t||{}).context||{},metadata:t.metadata||{}};n.invokeMethodAndTrack("T42.ACS.HibernateLayout",o,r,i,!0)}))},e.prototype.resume=function(e,t,n){var r=this;return new Promise((function(i,a){if(!e)return a("name cannot be empty");var s=o({name:e,type:"Global",context:t},n);r.invokeMethodAndTrack("T42.ACS.ResumeLayout",s,i,a,!0)}))},e.prototype.getCurrentLayout=function(){return a(this,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return[4,this.config.agm.invoke("T42.ACS.GetCurrentLayout",{},"best",{methodResponseTimeoutMs:12e4})];case 1:return e=n.sent(),(t=e.returned.layout)?(this.isSlimMode()||(t=this.list().find((function(e){return e.name===t.name&&e.type===t.type}))),[2,t]):[2,void 0]}}))}))},e.prototype.onAdded=function(e){var t=this.callbacks.add("added",e);return Un.all.length>0&&Un.all.forEach((function(t){try{e(t)}catch(n){}})),t},e.prototype.onRemoved=function(e){return this.callbacks.add("removed",e)},e.prototype.onChanged=function(e){return this.callbacks.add("changed",e)},e.prototype.onRestored=function(e){return this.callbacks.add("restored",e)},e.prototype.onRenamed=function(e){return this.callbacks.add("renamed",e)},e.prototype.onEvent=function(e){return this.stream.onEvent(e)},e.prototype.onSaveRequested=function(e){return this.provider.onSaveRequested(e)},e.prototype.updateAppContextInCurrent=function(e){var t=this;return new Promise((function(n,r){e&&"object"!==typeof e&&r("context must be an object");var i={context:e=null!==e&&void 0!==e?e:{}};t.invokeMethodAndTrack("T42.ACS.UpdateLayoutComponentContext",i,n,r,!0)}))},e.prototype.updateDefaultContext=function(e){var t=this;return new Promise((function(n,r){e&&"object"!==typeof e&&r("context must be an object");var i={context:e=null!==e&&void 0!==e?e:{}};t.invokeMethodAndTrack("T42.ACS.UpdateDefaultContext",i,n,r,!0)}))},e.prototype.get=function(e,t){var n=this.list().find((function(n){return n.name===e&&n.type===t}));return n?Promise.resolve(n):Promise.reject("can not find layout with name="+e+" and type="+t)},e.prototype.getAll=function(e){var t=this.list().filter((function(t){return e===t.type}));return Promise.resolve(t)},e.prototype.isSlimMode=function(){return"slim"===this.config.mode},e.prototype.verifyNotSlimMode=function(){if(this.isSlimMode())throw Error("Operation not allowed in slim mode. Run in full mode.")},e.prototype.isVisibleWindow=function(e){return"exe"===e.application.type||"node"===e.application.type||"activity"===e.application.type||!(!e||!e.window)&&e.window.isVisible},e.prototype.invokeMethodAndTrack=function(e,t,n,r,i){var o,a=i,s=rr();t.token=s;var u=function(){a&&o&&n(o)};i||this.stream.waitFor(s).then((function(){a=!0,u()})).catch((function(e){r(e)})),this.config.agm.invoke(e,t,"best",{methodResponseTimeoutMs:12e4}).then((function(t){t.returned||r("No result from method "+e),t.returned.status&&"Success"!==t.returned.status&&"PartialSuccess"!==t.returned.status&&r(t.returned),o=t.returned,u()})).catch((function(e){return r(e)}))},e.prototype.getInstancesToClose=function(e){var t=this,n=[],r=this.appManager.applications().filter((function(e){return e.isShell}))[0],i=r?r.name:"AppManager";return this.appManager.instances().forEach((function(r){t.appManager.myInstance&&r.id===t.appManager.myInstance.id||r.application.name!==i&&t.isVisibleWindow(r)&&("Activity"===e.type&&r.activityId!==e.activityIdToJoin||n.push({application:r.application.name,instance:r.id}))})),n},e.prototype.getObjectValues=function(e){return e?Object.keys(e).map((function(t){return e[t]})):[]},e}(),ur=function(){function e(e,t){var n=this;this.agm=e,this.callbacks=t,this.ready=new Promise((function(e,t){n.resolveReady=e,n.rejectReady=t})),this.gotSnapshot=new Promise((function(e,t){n.resolveGotSnapshot=e,n.rejectGotSnapshot=t}))}return e.prototype.subscribe=function(e){var t=this,n=function(e){return t.getObjectValues(e).map((function(e){return or(e)}))};this.checkForLayoutEventMethod()?this.agm.subscribe("T42.ACS.OnLayoutEvent",{waitTimeoutMs:1e4}).then((function(e){e.onData((function(e){var r=e.data;r.IsSnapshot&&t.resolveGotSnapshot(),t.addLayouts(n(r.OnLayoutAdded)),t.removeLayouts(n(r.OnLayoutRemoved)),t.changeLayouts(n(r.OnLayoutChanged)),t.renameLayouts(n(r.OnLayoutRenamed)),t.restoredLayout(n(r.OnLayoutRestored)),t.callbacks.execute("streamEvent",r)})),e.onFailed((function(e){var n="can not subscribe to T42.ACS.OnLayoutEvent "+e;t.rejectReady(n),t.rejectGotSnapshot(n)})),t.resolveReady()})).catch((function(e){var n="Error subscribing for T42.ACS.OnLayoutEvent stream. Err: "+e;t.rejectReady(n),t.rejectGotSnapshot(n)})):(e&&this.resolveReady(),setTimeout((function(){t.subscribe(!0)}),500))},e.prototype.onEvent=function(e){return this.callbacks.add("streamEvent",e)},e.prototype.waitFor=function(e,t){var n=this;return t||(t=1e4),new Promise((function(r,i){var o=!1,a=n.onEvent((function(t){t.Token===e&&(o=!0,a(),r())}));setTimeout((function(){o||i("timed out")}),t)}))},e.prototype.checkForLayoutEventMethod=function(){try{return-1!==this.agm.methods().map((function(e){return e.name})).indexOf("T42.ACS.OnLayoutEvent")}catch(e){return!1}},e.prototype.addLayouts=function(e){var t=this;e&&e.forEach((function(e){var n=new ar(e);Un.add(n),t.callbacks.execute("added",n)}))},e.prototype.removeLayouts=function(e){var t=this;e&&e.forEach((function(e){Un.removeWhere((function(n){return!t.compareLayouts(n,e)})),t.callbacks.execute("removed",e)}))},e.prototype.changeLayouts=function(e){var t=this;e&&e.forEach((function(e){Un.removeWhere((function(n){return!t.compareLayouts(n,e)})),Un.add(new ar(e)),t.callbacks.execute("changed",e)}))},e.prototype.renameLayouts=function(e){var t=this;e&&e.forEach((function(e){var n=Un.first((function(n){return t.compareLayouts(n,{type:e.type,name:e.oldName})}));if(!n)throw Error("received rename event for unknown layout with type "+e.type+" and name "+e.oldName);n.name=e.newName,t.callbacks.execute("renamed",n)}))},e.prototype.compareLayouts=function(e,t){return e.name===t.name&&e.type===t.type},e.prototype.getObjectValues=function(e){return e?Object.keys(e).map((function(t){return e[t]})):[]},e.prototype.restoredLayout=function(e){var t=this;e&&e.forEach((function(e){var n=Un.first((function(n){return t.compareLayouts(n,{type:e.type,name:e.name})}));t.callbacks.execute("restored",n)}))},e}();function cr(e){if(!e.agm)throw Error("config.agm is required");if(!e.logger)throw Error("config.logger is required");e.mode=e.mode||"slim";var t,n=e.logger,r=vn();return e.mode,t=new ur(e.agm,r),new sr(e,t,r,n)}var lr,dr,fr,pr=function(e,t){var n=this;this._agm=e,this._logger=t,this.all=function(){return a(n,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.callGD(lr.GetAll,{})];case 1:return[2,e.sent().map(this.decorateDisplay)]}}))}))},this.get=function(e){return a(n,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return[4,this.callGD(lr.Get,{id:e})];case 1:return t=n.sent(),[2,this.decorateDisplay(t)]}}))}))},this.getPrimary=function(){return a(n,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.all()];case 1:return[2,e.sent().find((function(e){return e.isPrimary}))]}}))}))},this.capture=function(e){return a(n,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.callGD(lr.Capture,o({},e))];case 1:return[2,t.sent()]}}))}))},this.captureAll=function(e){return a(n,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.callGD(lr.CaptureAll,o({},e))];case 1:return[2,t.sent()]}}))}))},this.getMousePosition=function(){return a(n,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.callGD(lr.GetMousePosition)];case 1:return[2,e.sent()]}}))}))},this.callGD=function(e,t){return a(n,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this._agm.invoke("T42.Displays.Command",{options:o({},t),command:e})];case 1:return[2,n.sent().returned.data]}}))}))},this.decorateDisplay=function(e){return o(o({},e),{capture:function(t){return n.capture({id:e.id,size:t})}})}};function hr(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){return dr.invoke("T42.Channels.Announce",{swId:null!==t&&void 0!==t?t:fr,command:"switchChannel",data:{newChannel:e}}),[2]}))}))}!function(e){e.Capture="capture",e.CaptureAll="captureAll",e.GetAll="getAll",e.Get="get",e.GetMousePosition="getMousePosition"}(lr||(lr={}));var yr="___channel___",gr=function(){function e(e){this.contexts=e}return e.prototype.subscribe=function(e){this.callback=e},e.prototype.subscribeFor=function(e,t){if(!this.isChannel(e))return Promise.reject(new Error("Channel with name: "+e+" doesn't exist!"));var n=this.createContextName(e);return this.contexts.subscribe(n,(function(e,n,r,i,o){var a;t(e.data,e,null===(a=o)||void 0===a?void 0:a.updaterId)}))},e.prototype.switchChannel=function(e){return a(this,void 0,void 0,(function(){var t,n,r=this;return s(this,(function(i){switch(i.label){case 0:return this.unsubscribe(),t=this.createContextName(e),n=this,[4,this.contexts.subscribe(t,(function(e,t,n,i,o){var a;r.callback&&r.callback(e.data,e,null===(a=o)||void 0===a?void 0:a.updaterId)}))];case 1:return n.unsubscribeFunc=i.sent(),[2]}}))}))},e.prototype.unsubscribe=function(){this.unsubscribeFunc&&this.unsubscribeFunc()},e.prototype.all=function(){return this.contexts.all().filter((function(e){return e.startsWith(yr)})).map((function(e){return e.substr(yr.length)}))},e.prototype.getContextData=function(e){var t=this;return new Promise((function(n,r){if(!t.isChannel(e))return r(new Error("A channel with name: "+e+" doesn't exist!"));var i=t.createContextName(e);t.contexts.subscribe(i,(function(e){n(e)})).then((function(e){return e()}))}))},e.prototype.updateChannel=function(e,t){var n=this.createContextName(e);return this.contexts.update(n,t)},e.prototype.updateData=function(e,t){var n=this.createContextName(e);if(this.contexts.setPathSupported){var r=Object.keys(t).map((function(e){return{path:"data."+e,value:t[e]}}));return this.contexts.setPaths(n,r)}return this.contexts.update(n,{data:t})},e.prototype.isChannel=function(e){return this.all().some((function(t){return t===e}))},e.prototype.createContextName=function(e){return yr+e},e}(),vr=function(){function e(e){this.shared=e,this.subsKey="subs",this.changedKey="changed",this.registry=vn(),this.shared.subscribe(this.handler.bind(this))}return e.prototype.subscribe=function(e){if("function"!==typeof e)throw new Error("Please provide the callback as a function!");return this.registry.add(this.subsKey,e)},e.prototype.subscribeFor=function(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:if("string"!==typeof e)throw new Error("Please provide the name as a string!");if("function"!==typeof t)throw new Error("Please provide the callback as a function!");return[4,this.shared.subscribeFor(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.publish=function(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){if("object"!==typeof e)throw new Error("Please provide the data as an object!");if(t){if("string"!==typeof t)throw new Error("Please provide the name as a string!");return this.shared.isChannel(t)?[2,this.shared.updateData(t,e)]:[2,Promise.reject(new Error("A channel with name: "+t+" doesn't exist!"))]}if(!this.currentContext)throw new Error("Not joined to any channel!");return[2,this.shared.updateData(this.currentContext,e)]}))}))},e.prototype.all=function(){var e=this.shared.all();return Promise.resolve(e)},e.prototype.list=function(){return a(this,void 0,void 0,(function(){var e,t=this;return s(this,(function(n){switch(n.label){case 0:return[4,this.all()];case 1:return e=n.sent(),[4,Promise.all(e.map((function(e){return t.get(e)})))];case 2:return[2,n.sent()]}}))}))},e.prototype.get=function(e){return"string"!==typeof e?Promise.reject(new Error("Please provide the channel name as a string!")):this.shared.getContextData(e)},e.prototype.join=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.joinCore(e)]}))}))},e.prototype.joinNoSelectorSwitch=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.joinCore(e,!1)]}))}))},e.prototype.leave=function(){return this.leaveCore()},e.prototype.leaveNoSelectorSwitch=function(){return this.leaveCore(!1)},e.prototype.current=function(){return this.currentContext},e.prototype.my=function(){return this.current()},e.prototype.changed=function(e){if("function"!==typeof e)throw new Error("Please provide the callback as a function!");return this.registry.add(this.changedKey,e)},e.prototype.onChanged=function(e){return this.changed(e)},e.prototype.add=function(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:if("object"!==typeof e)throw new Error("Please provide the info as an object!");if("undefined"===typeof e.name)throw new Error("info.name is missing!");if("string"!==typeof e.name)throw new Error("Please provide the info.name as a string!");if("undefined"===typeof e.meta)throw new Error("info.meta is missing!");if("object"!==typeof e.meta)throw new Error("Please provide the info.meta as an object!");if("undefined"===typeof e.meta.color)throw new Error("info.meta.color is missing!");if("string"!==typeof e.meta.color)throw new Error("Please provide the info.meta.color as a string!");return t={name:e.name,meta:e.meta||{},data:e.data||{}},[4,this.shared.updateChannel(e.name,t)];case 1:return n.sent(),[2,t]}}))}))},e.prototype.handler=function(e,t,n){this.registry.execute(this.subsKey,e,t,n)},e.prototype.joinCore=function(e,t){return void 0===t&&(t=!0),a(this,void 0,void 0,(function(){var n,r=this;return s(this,(function(i){switch(i.label){case 0:if("string"!==typeof e)throw new Error("Please provide the channel name as a string!");return e===this.currentContext?[2]:(n=function(e){return r.shared.all().includes(e)})(e)?[3,2]:[4,new Promise((function(t,r){var i,o=setInterval((function(){n(e)&&(clearTimeout(i),clearInterval(o),t())}),100);i=setTimeout((function(){return clearInterval(o),r(new Error("A channel with name: "+e+" doesn't exist!"))}),3e3)}))];case 1:i.sent(),i.label=2;case 2:return this.currentContext=e,[4,this.shared.switchChannel(e)];case 3:return i.sent(),t&&hr(e),this.registry.execute(this.changedKey,e),[2]}}))}))},e.prototype.leaveCore=function(e){return void 0===e&&(e=!0),this.currentContext=void 0,this.registry.execute(this.changedKey,void 0),this.shared.unsubscribe(),e&&hr(),Promise.resolve()},e}();function mr(e,t){var n=new gr(e),r=new vr(n);return function(e,t){a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return dr=e,"undefined"!==typeof window&&window.glue42gd&&(fr=window.glue42gd.windowId),fr?[4,dr.register("T42.Channels.Command",(function(e){var n=e.command;if(!n)throw new Error("missing command argument");if("join"!==n){if("leave"!==n){if("get"===n)return{id:r=t.current()};throw new Error("unknown command "+n)}t.leaveNoSelectorSwitch()}else{var r;if(!(r=e.channel))throw new Error("missing argument id");t.joinNoSelectorSwitch(r)}}))]:[2];case 1:return n.sent(),dr.invoke("T42.Channels.Announce",{swId:fr,instance:dr.instance.instance}),[2]}}))}))}(t,r),{subscribe:r.subscribe.bind(r),subscribeFor:r.subscribeFor.bind(r),publish:r.publish.bind(r),all:r.all.bind(r),list:r.list.bind(r),get:r.get.bind(r),join:r.join.bind(r),leave:r.leave.bind(r),current:r.current.bind(r),my:r.my.bind(r),changed:r.changed.bind(r),onChanged:r.onChanged.bind(r),add:r.add.bind(r),ready:function(){return e.ready()}}}var wr,br="T42.Hotkeys.Command",_r=function(){function e(e){this.agm=e,this.registry=vn(),this.firstHotkey=!0,this.hotkeys=new Map}return e.prototype.register=function(e,t){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:if("undefined"===typeof e)throw new Error("Hotkey parameter missing");if("string"===typeof e)e={hotkey:e};else{if(!e.hotkey)throw new Error("Info's hotkey parameter missing");e={hotkey:e.hotkey,description:e.description}}if(n=this.formatHotkey(e.hotkey),this.hotkeys.has(n))throw new Error("Shortcut for "+n+" already registered");return this.firstHotkey?(this.firstHotkey=!1,[4,this.registerInvokeAGMMethod()]):[3,2];case 1:r.sent(),r.label=2;case 2:return this.registry.add(n,t),[4,this.agm.invoke(br,{command:"register",hotkey:n,description:e.description})];case 3:return r.sent(),this.hotkeys.set(n,e),[2]}}))}))},e.prototype.unregister=function(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:if("undefined"===typeof e)throw new Error("hotkey parameter missing");if("string"!==typeof e)throw new Error("hotkey parameter must be string");return t=this.formatHotkey(e),[4,this.agm.invoke(br,{command:"unregister",hotkey:t})];case 1:return n.sent(),this.hotkeys.delete(t),this.registry.clearKey(t),[2]}}))}))},e.prototype.unregisterAll=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.agm.invoke(br,{command:"unregisterAll"})];case 1:return e.sent(),this.hotkeys.clear(),this.registry.clear(),[2]}}))}))},e.prototype.isRegistered=function(e){var t=this.formatHotkey(e);return this.hotkeys.has(t)},e.prototype.registerInvokeAGMMethod=function(){var e=this;this.agm.register("T42.Hotkeys.Invoke",(function(t){var n=t.key.toLowerCase(),r=e.hotkeys.get(n);e.registry.execute(n,r)}))},e.prototype.formatHotkey=function(e){if(e)return e.replace(/\s/g,"").toLowerCase()},e}(),kr="5.5.2",Sr=function(e){function t(e,t,r){if("boolean"!==typeof e||e){var i=n(e,t,r);return"object"===typeof e?(e.mode=i,e):{mode:i}}}function n(e,t,r){return"object"===typeof e?n(e.mode,t,r)+"":"undefined"===typeof e?"boolean"!==typeof t||t?t+"":void 0:"boolean"===typeof e?e?(void 0===r?t:r)+"":void 0:e+""}return{layouts:t(e.layouts,"slim"),activities:t(e.activities,"trackMyTypeAndInitiatedFromMe"),appManager:t(e.appManager,!1,"startOnly"),windows:t(e.windows,!0),channels:t(e.channels||!1,!1),displays:t(e.displays,!0)}},Cr=function(){function e(e){this.options=e,this.callbacks=vn(),this.actions=e.actions,this.body=e.body,this.badge=e.badge,this.data=e.data,this.dir=e.dir,this.icon=e.icon,this.image=e.image,this.lang=e.lang,this.renotify=e.renotify,this.requireInteraction=e.requireInteraction,this.silent=e.silent,this.tag=e.tag,this.timestamp=e.timestamp,this.title=e.title}return e.prototype.close=function(){throw new Error("Method not implemented.")},e.prototype.addEventListener=function(e,t,n){this.callbacks.add(e,t)},e.prototype.removeEventListener=function(e,t,n){},e.prototype.dispatchEvent=function(e){return this.callbacks.execute(e.type,e),!0},e}(),Ir=function(){function e(e){this.interop=e,this.methodsRegistered=!1,this.methodNameRoot="T42.Notifications.Handler-"+rr(),this.nextId=0,this.notifications={}}return Object.defineProperty(e.prototype,"maxActions",{get:function(){return 2},enumerable:!0,configurable:!0}),e.prototype.raise=function(e){var t,n;return a(this,void 0,void 0,(function(){var r,i,o,a,u,c,l,d,f,p,h;return s(this,(function(s){switch(s.label){case 0:if(!e)throw new Error("invalid options - should be an object");if(!e.title)throw new Error("invalid options - should have title");if(this.methodsRegistered)return[3,2];for(r=[],u=0;u<this.maxActions;u++)r.push(this.interop.register(this.methodNameRoot+"_"+u,this.handleNotificationAction.bind(this)));return[4,Promise.all(r)];case 1:s.sent(),this.methodsRegistered=!0,s.label=2;case 2:if(i=String(this.nextId++),o={title:e.title,severity:"Medium",description:e.body,glueRoutingDetailMethodName:this.methodNameRoot+"_0",actions:[],source:i},e.actions)for(a=e.actions.slice(0,this.maxActions),u=0,c=function(e){var r={g42notificationId:i,g42action:e.action,g42interopMethod:null===(t=e.interop)||void 0===t?void 0:t.method,g42interopTarget:null===(n=e.interop)||void 0===n?void 0:n.target},a=Object.keys(r).map((function(e){return{name:e,value:{stringValue:r[e]}}})),s={name:l.methodNameRoot+"_"+u,description:e.title,displayName:e.title,parameters:a};o.actions.push(s),u++},l=this,d=0,f=a;d<f.length;d++)p=f[d],c(p);return[4,this.interop.invoke("T42.GNS.Publish.RaiseNotification",{notification:o})];case 3:return s.sent(),h=new Cr(e),this.notifications[i]=h,[2,h]}}))}))},e.prototype.handleNotificationAction=function(e){if(e.g42notificationId){var t=e,n=t.g42notificationId;if(!(o=this.notifications[n]))return;var r=new Event("onaction");r.action=t.g42action,o.onaction&&o.onaction(r);var i=(o.actions||[]).find((function(e){return e.action===t.g42action})).interop;i&&this.interop.invoke(i.method,i.arguments||{},i.target||"best"),o.dispatchEvent(r)}else if(e.notification&&e.notification.source){var o;if(n=e.notification.source,!(o=this.notifications[n]))return;var a=new Event("onclick");o.onclick&&o.onclick(a);var s=o.options.clickInterop;s&&this.interop.invoke(s.method,s.arguments||{},s.target||"best"),o.dispatchEvent(a)}},e}(),xr=function(){function e(e){this.core=e,this.registry=vn(),this.isSubscribed=!1,this.getConfiguration()}return e.prototype.list=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.getConfiguration()];case 1:if(e.sent(),!this.getMethodName)throw new Error("not supported");return[4,this.getAll()];case 2:return[2,e.sent().returned.all]}}))}))},e.prototype.getCurrent=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,this.getConfiguration()];case 1:if(t.sent(),!this.getMethodName)throw new Error("not supported");return[4,this.getAll()];case 2:return[2,(e=t.sent()).returned.all.find((function(t){return t.name===e.returned.selected}))]}}))}))},e.prototype.select=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.getConfiguration()];case 1:if(t.sent(),!this.setMethodName)throw new Error("not supported");return[4,this.core.interop.invoke(this.setMethodName,{theme:e})];case 2:return t.sent(),[2]}}))}))},e.prototype.onChanged=function(e){return this.subscribe(),this.registry.add("changed",e)},e.prototype.getConfiguration=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.sharedContextName?[2]:[4,this.core.interop.invoke("T42.Themes.Configuration")];case 1:return e=t.sent(),this.sharedContextName=e.returned.sharedContextName,this.getMethodName=e.returned.getThemesMethodName,this.setMethodName=e.returned.setThemesMethodName,[3,3];case 2:return t.sent(),[2];case 3:return[2]}}))}))},e.prototype.getAll=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.getConfiguration()];case 1:return e.sent(),[4,this.core.interop.invoke(this.getMethodName)];case 2:return[2,e.sent()]}}))}))},e.prototype.subscribe=function(){return a(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){switch(t.label){case 0:return[4,this.getConfiguration()];case 1:return t.sent(),this.isSubscribed||(this.isSubscribed=!0,this.core.contexts.subscribe(this.sharedContextName,(function(t){t&&t.all&&t.selected&&e.registry.execute("changed",t.all.find((function(e){return e.name===t.selected})))}))),[2]}}))}))},e}(),Ar="Tick42.FDC3.Intents.",Tr=function(){function e(e,t,n){this.interop=e,this.windows=t,this.logger=n}return e.prototype.find=function(e){return a(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return[4,this.all()];case 1:if(t=r.sent(),"undefined"===typeof e)return[2,t];if("string"===typeof e)return[2,t.filter((function(t){return t.name===e}))];if("object"!==typeof e)throw new Error("Please provide the intentFilter as a string or an object!");return e.contextType&&(n=e.contextType.toLowerCase(),t=t.filter((function(e){return e.handlers.some((function(e){var t;return null===(t=e.contextTypes)||void 0===t?void 0:t.some((function(e){return e.toLowerCase()===n}))}))}))),e.name&&(t=t.filter((function(t){return t.name===e.name}))),[2,t]}}))}))},e.prototype.raise=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,o,a,u,c,l;return s(this,(function(s){switch(s.label){case 0:if("string"!==typeof e&&"object"!==typeof e||"object"===typeof e&&"string"!==typeof e.intent)throw new Error("Please provide the intent as a string or an object with an intent property!");return"string"===typeof e&&(e={intent:e}),t=e.intent,[4,this.get(t)];case 1:if("undefined"===typeof(n=s.sent()))throw new Error("Intent "+t+" not found.");if(r=!n.handlers.some((function(e){return"app"===e.type})),i=e.target||(r?"reuse":"startNew"),a=n.handlers.find((function(e){return"app"===e.type})),"startNew"===i)o=a;else if("reuse"===i)u=n.handlers.find((function(e){return"instance"===e.type})),o=u||a;else if(i.instance)o=n.handlers.find((function(e){return"instance"===e.type&&e.instanceId===i.instance}));else{if(!i.app)throw new Error("Invalid intent target: "+JSON.stringify(i));o=n.handlers.find((function(e){return"app"===e.type&&e.applicationName===i.app}))}if(!o)throw new Error("Can not raise intent for request "+JSON.stringify(e)+" - can not find intent handler.");return c=o.instanceId,"app"!==o.type?[3,3]:[4,this.startApp(o.applicationName,e.options)];case 2:c=s.sent(),s.label=3;case 3:return[4,this.raiseIntentToInstance(c,t,e.context)];case 4:return(l=s.sent()).request=e,l.handler=o,[2,l]}}))}))},e.prototype.all=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i,o,u,c,l,d,f,p,h,y,g,v,m,w,b,_,k,S=this;return s(this,(function(C){switch(C.label){case 0:return C.trys.push([0,2,,3]),[4,this.interop.invoke("T42.ACS.GetApplications",{withIntentsInfo:!0})];case 1:return m=C.sent(),e=m.returned.applications,[3,3];case 2:return t=C.sent(),this.logger.error("Failed to get the applications!",t),[2,[]];case 3:for(n={},r=e.filter((function(e){return e.intents&&e.intents.length>0})),i=0,o=r;i<o.length;i++)for(u=o[i],c=0,l=u.intents;c<l.length;c++)d=l[c],(f=n[d.name])||(f={name:d.name,handlers:[]},n[d.name]=f),p={applicationName:u.name,applicationTitle:u.title,applicationDescription:u.caption,displayName:d.displayName,contextTypes:d.contexts,applicationIcon:u.icon,type:"app"},f.handlers.push(p);if(h=this.interop.servers(),y=h.map((function(e){return e.windowId})).filter((function(e){return"undefined"!==typeof e})),g="T42.Wnd.GetInfo",!this.interop.methods().some((function(e){return e.name===g})))return[3,7];C.label=4;case 4:return C.trys.push([4,6,,7]),[4,this.interop.invoke(g,{ids:y})];case 5:return m=C.sent(),v=m.returned.windows,[3,7];case 6:return C.sent(),[3,7];case 7:w=function(t){return s(this,(function(r){switch(r.label){case 0:return[4,Promise.all(t.getMethods().filter((function(e){return e.name.startsWith(Ar)})).map((function(r){return a(S,void 0,void 0,(function(){var i,o,a,u,c,l,d,f,p,h,y,g;return s(this,(function(s){switch(s.label){case 0:return i=r.name.replace(Ar,""),(o=n[i])||(o={name:i,handlers:[]},n[i]=o),a=r.flags,(u=e.find((function(e){return e.name===t.application})))&&u.intents&&(c=u.intents.find((function(e){return e.name===i}))),[4,this.windowsIdToTitle(t.windowId,v)];case 1:return l=s.sent(),d={instanceId:t.instance,applicationName:t.application,applicationIcon:a.icon||(null===(f=u)||void 0===f?void 0:f.icon),applicationTitle:null===(p=u)||void 0===p?void 0:p.title,applicationDescription:a.description||(null===(h=u)||void 0===h?void 0:h.caption),displayName:a.displayName||(null===(y=c)||void 0===y?void 0:y.displayName),contextTypes:a.contextTypes||(null===(g=c)||void 0===g?void 0:g.contexts),instanceTitle:l,type:"instance"},o.handlers.push(d),[2]}}))}))})))];case 1:return r.sent(),[2]}}))},b=0,_=h,C.label=8;case 8:return b<_.length?(k=_[b],[5,w(k)]):[3,11];case 9:C.sent(),C.label=10;case 10:return b++,[3,8];case 11:return[2,Object.values(n)]}}))}))},e.prototype.addIntentListener=function(e,t){var n=this;if("string"!==typeof e&&"object"!==typeof e||"object"===typeof e&&"string"!==typeof e.intent)throw new Error("Please provide the intent as a string or an object with an intent property!");if("function"!==typeof t)throw new Error("Please provide the handler as a function!");var r={unsubscribe:function(){return console.log("Could not unsubscribe!")}},i="Tick42.FDC3.Intents."+("string"===typeof e?e:e.intent),o="string"===typeof e?{intent:e}:e;return this.interop.register({name:i,flags:o},(function(e){return t(e)})).then((function(){r.unsubscribe=function(){n.interop.unregister(i)}})),r},e.prototype.get=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.all()];case 1:return[2,t.sent().find((function(t){return t.name===e}))]}}))}))},e.prototype.startApp=function(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.interop.invoke("T42.ACS.StartApplication",{Name:e,options:t})];case 1:return[2,n.sent().returned.Id]}}))}))},e.prototype.raiseIntentToInstance=function(e,t,n){return a(this,void 0,void 0,(function(){var r,i,o=this;return s(this,(function(a){switch(a.label){case 0:return r="Tick42.FDC3.Intents."+t,(i=this.interop.servers().find((function(t){return t.instance===e})))?[3,2]:[4,new Promise((function(t,n){var r,a=o.interop.serverAdded((function(n){n.instance===e&&(i=n,t(),clearTimeout(r),a())}));r=setTimeout((function(){a(),n(new Error("Can not find interop server for instance "+e))}),3e4)}))];case 1:a.sent(),a.label=2;case 2:return i.getMethods().find((function(e){return e.name===r}))?[3,4]:[4,new Promise((function(t,n){var i,a=o.interop.methodAdded((function(e){e.name===r&&(t(),clearTimeout(i),a())}));i=setTimeout((function(){a(),n(new Error("Can not find interop method "+r+" for instance "+e))}),1e4)}))];case 3:a.sent(),a.label=4;case 4:return[4,this.interop.invoke(r,n,{instance:e})];case 5:return[2,{result:a.sent().returned}]}}))}))},e.prototype.windowsIdToTitle=function(e,t){var n,r,i;return a(this,void 0,void 0,(function(){var o;return s(this,(function(a){switch(a.label){case 0:return"undefined"!==typeof t?[2,null===(n=t.find((function(t){return t.id===e})))||void 0===n?void 0:n.title]:(o=null===(r=this.windows)||void 0===r?void 0:r.findById(e),[4,null===(i=o)||void 0===i?void 0:i.getTitle()]);case 1:return[2,a.sent()]}}))}))},e}(),Er=function(){function e(){var e=this;this.numberOfCalls=0,this.numberOfCalls=1,this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.getPromise=function(){return this.numberOfCalls++,this.promise},e.prototype.done=function(e){this.resolve(e)},e.prototype.error=function(e){this.reject(e)},e}(),Pr=function(e){return a(void 0,void 0,void 0,(function(){var t,n,r;return s(this,(function(i){switch(i.label){case 0:if(t="undefined"!==typeof window&&window.glue42gd){if(wr)return[2,wr.getPromise()];wr=new Er}return[4,Mr(e,t)];case 1:return n=i.sent(),null===(r=wr)||void 0===r||r.resolve(n),[2,n]}}))}))},Mr=function(e,t){return a(void 0,void 0,void 0,(function(){function n(e){if(g.windows){var t=p("windows",e.logger,g.windows);return h(w=Dn(e.agm,t,(function(){return v}),(function(){return b}),y)),w}}function r(e){var n,r;if(g.activities&&fn.checkIsUsingGW3Implementation&&fn.checkIsUsingGW3Implementation(e.connection)){var i=p("activity",e.logger,g.activities);return h(m=new fn({connection:e.connection,contexts:e.contexts,agm:e.agm,logger:i,logLevel:"info",disableAutoAnnounce:!1,disposeRequestHandling:"exit",announcementInfo:null,windows:w,appManagerGetter:function(){return v},mode:g.activities.mode,typesToTrack:g.activities.typesToTrack,activityId:null===(r=null===(n=t)||void 0===n?void 0:n.activityInfo)||void 0===r?void 0:r.activityId,gdMajorVersion:y}).api),m}}function i(e){if(g.appManager){var t=p("appManager",e.logger,g.appManager);return h(v=An({agm:e.agm,windows:w,logger:t,activities:m,mode:g.appManager.mode,gdMajorVersion:y})),v}}function o(e){var t;if(g.layouts){var n=p("layouts",e.logger,g.layouts),r=g.layouts,i=cr({agm:e.agm,appManager:v,activityGetter:function(){return m},logger:n,mode:r.mode,autoSaveWindowContext:(t=r.autoSaveWindowContext,null!==t&&void 0!==t&&t),gdMajorVersion:y});return h(i),i}}function a(e){if(g.channels&&e.contexts){var t=mr(e.contexts,e.agm);return h(t),t}}function u(e){var t=function(e){var t=new _r(e);return{register:t.register.bind(t),unregister:t.unregister.bind(t),unregisterAll:t.unregisterAll.bind(t),isRegistered:t.isRegistered.bind(t),ready:function(){return Promise.resolve()}}}(e.agm);return h(t),t}function c(e){var t=new Tr(e.agm,w,e.logger.subLogger("intents"));return h(t),t}function l(e){var t=new Ir(e.interop);return h(t),t}function d(e){if(g.displays){var t=p("displays",e.logger,g.displays);return h(b=new pr(e.agm,t)),b}}function f(e){if(e.contexts){var t=function(e){var t=new xr(e);return{list:t.list.bind(t),getCurrent:t.getCurrent.bind(t),select:t.select.bind(t),onChanged:t.onChanged.bind(t),ready:function(){return Promise.resolve()}}}(e);return h(t),t}}function p(e,t,n){var r=t.subLogger(e);if(n&&n.logger){var i=n.logger;i.console&&r.consoleLevel(i.console),i.publish&&r.publishLevel(i.publish)}return r}function h(e){k.push(e)}var y,g,v,m,w,b,_,k,S,C;return s(this,(function(t){switch(t.label){case 0:return y=En.getGDMajorVersion(),g=Sr(e=e||{}),e.gateway=e.gateway||{},_={libs:[{name:"windows",create:n},{name:"activities",create:r},{name:"appManager",create:i},{name:"layouts",create:o},{name:"channels",create:a},{name:"hotkeys",create:u},{name:"displays",create:d},{name:"intents",create:c},{name:"notifications",create:l},{name:"themes",create:f}],version:kr,enrichGlue:function(e){e.config.activities=g.activities,e.config.windows=g.windows,e.config.appManager=g.appManager,e.config.layouts=g.layouts,e.config.channels=g.channels,e.config.displays=g.displays}},k=[],"undefined"!==typeof window&&(window.glueFactoryLog||(window.glueFactoryLog=[]),window.glueFactoryLog.push(k)),[4,bt(e,_)];case 1:return S=t.sent(),Array.isArray(null===(C=e)||void 0===C?void 0:C.libraries)&&e.libraries.length?[4,Promise.all(e.libraries.map((function(t){return t(S,e)})))]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2,S]}}))}))};Pr.coreVersion=bt.version,Pr.version=kr,Pr.initInfo=wr;var Or=Pr,Rr=!0;if("undefined"!==typeof window){var jr=window.glue42gd;jr&&jr.autoInjected&&(Or=window.Glue,Rr=!1),Rr&&(window.Glue=Or),delete window.GlueCore}return Or.default=Or,Or},e.exports=i()}).call(this,n(9),n(18).Buffer,n(19))},,function(e,t,n){"use strict";n(15);var r=n(1),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:o,_owner:a.current}}t.jsx=c,t.jsxs=c},function(e,t,n){"use strict";var r=n(15),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;i=d("react.element"),o=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),a=d("react.provider"),s=d("react.context"),u=d("react.forward_ref"),t.Suspense=d("react.suspense"),c=d("react.memo"),l=d("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y={};function g(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||h}function v(){}function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var w=m.prototype=new v;w.constructor=m,r(w,g.prototype),w.isPureReactComponent=!0;var b={current:null},_=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,r)&&!k.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:b.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var I=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case o:u=!0}}if(u)return a=a(u=e),e=""===r?"."+x(u,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(I,"$&/")+"/"),A(a,t,n,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(I,"$&/")+"/")+e)),t.push(a)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+x(s=e[c],c);u+=A(s,t,n,l,a)}else if("function"===typeof(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),c=0;!(s=e.next()).done;)u+=A(s=s.value,t,n,l=r+x(s,c++),a);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function T(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function E(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var P={current:null};function M(){var e=P.current;if(null===e)throw Error(p(321));return e}var O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error(p(143));return e}},t.Component=g,t.PureComponent=m,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(p(267,e));var o=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=b.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)_.call(t,l)&&!k.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var d=0;d<l;d++)c[d]=arguments[d+2];o.children=c}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:E}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return M().useCallback(e,t)},t.useContext=function(e,t){return M().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return M().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return M().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return M().useLayoutEffect(e,t)},t.useMemo=function(e,t){return M().useMemo(e,t)},t.useReducer=function(e,t,n){return M().useReducer(e,t,n)},t.useRef=function(e){return M().useRef(e)},t.useState=function(e){return M().useState(e)},t.version="17.0.1"},function(e,t,n){"use strict";var r=n(1),i=n(15),o=n(26);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,h={},y={};function g(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=v.hasOwnProperty(t)?v[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!p.call(y,e)||!p.call(h,e)&&(f.test(e)?y[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,w);v[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,w);v[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,w);v[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=60103,S=60106,C=60107,I=60108,x=60114,A=60109,T=60110,E=60112,P=60113,M=60120,O=60115,R=60116,j=60121,L=60128,N=60129,F=60130,W=60131;if("function"===typeof Symbol&&Symbol.for){var D=Symbol.for;k=D("react.element"),S=D("react.portal"),C=D("react.fragment"),I=D("react.strict_mode"),x=D("react.profiler"),A=D("react.provider"),T=D("react.context"),E=D("react.forward_ref"),P=D("react.suspense"),M=D("react.suspense_list"),O=D("react.memo"),R=D("react.lazy"),j=D("react.block"),D("react.scope"),L=D("react.opaque.id"),N=D("react.debug_trace_mode"),F=D("react.offscreen"),W=D("react.legacy_hidden")}var U,B="function"===typeof Symbol&&Symbol.iterator;function z(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function H(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var G=!1;function V(e,t){if(!e||G)return"";G=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{G=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function q(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 22:return e=V(e.type._render,!1);case 1:return e=V(e.type,!0);default:return""}}function J(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case S:return"Portal";case x:return"Profiler";case I:return"StrictMode";case P:return"Suspense";case M:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return J(e.type);case j:return J(e._render);case R:t=e._payload,e=e._init;try{return J(e(t))}catch(n){}}return null}function Y(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Y(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Y(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Y(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Y(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Y(n)}}function ce(e,t){var n=Y(t.value),r=Y(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de="http://www.w3.org/1999/xhtml",fe="http://www.w3.org/2000/svg";function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function he(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ye,ge,ve=(ge=function(e,t){if(e.namespaceURI!==fe||"innerHTML"in e)e.innerHTML=t;else{for((ye=ye||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ye.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function me(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var we={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function _e(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||we.hasOwnProperty(e)&&we[e]?(""+t).trim():t+"px"}function ke(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=_e(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(we).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),we[t]=we[e]}))}));var Se=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ce(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function Ie(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ae=null,Te=null,Ee=null;function Pe(e){if(e=ei(e)){if("function"!==typeof Ae)throw Error(a(280));var t=e.stateNode;t&&(t=ni(t),Ae(e.stateNode,e.type,t))}}function Me(e){Te?Ee?Ee.push(e):Ee=[e]:Te=e}function Oe(){if(Te){var e=Te,t=Ee;if(Ee=Te=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function Re(e,t){return e(t)}function je(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Ne=Re,Fe=!1,We=!1;function De(){null===Te&&null===Ee||(Le(),Oe())}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=ni(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Be=!1;if(d)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Be=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(ge){Be=!1}function He(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ge=!1,Ve=null,qe=!1,Je=null,Ye={onError:function(e){Ge=!0,Ve=e}};function Ke(e,t,n,r,i,o,a,s,u){Ge=!1,Ve=null,He.apply(Ye,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if($e(e)!==e)throw Error(a(188))}function Ze(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Xe(i),e;if(o===r)return Xe(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,ot=!1,at=[],st=null,ut=null,ct=null,lt=new Map,dt=new Map,ft=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ht(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function yt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function gt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=ht(t,n,r,i,o),null!==t&&(null!==(t=ei(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function vt(e){var t=Zr(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ei(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function wt(e,t,n){mt(e)&&n.delete(t)}function bt(){for(ot=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=ei(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==st&&mt(st)&&(st=null),null!==ut&&mt(ut)&&(ut=null),null!==ct&&mt(ct)&&(ct=null),lt.forEach(wt),dt.forEach(wt)}function _t(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,bt)))}function kt(e){function t(t){return _t(t,e)}if(0<at.length){_t(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&_t(st,e),null!==ut&&_t(ut,e),null!==ct&&_t(ct,e),lt.forEach(t),dt.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)vt(n),null===n.blockedOn&&ft.shift()}function St(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ct={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},It={},xt={};function At(e){if(It[e])return It[e];if(!Ct[e])return e;var t,n=Ct[e];for(t in n)if(n.hasOwnProperty(t)&&t in xt)return It[e]=n[t];return e}d&&(xt=document.createElement("div").style,"AnimationEvent"in window||(delete Ct.animationend.animation,delete Ct.animationiteration.animation,delete Ct.animationstart.animation),"TransitionEvent"in window||delete Ct.transitionend.transition);var Tt=At("animationend"),Et=At("animationiteration"),Pt=At("animationstart"),Mt=At("transitionend"),Ot=new Map,Rt=new Map,jt=["abort","abort",Tt,"animationEnd",Et,"animationIteration",Pt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Mt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Rt.set(r,t),Ot.set(r,i),c(i,[r])}}(0,o.unstable_now)();var Nt=8;function Ft(e){if(0!==(1&e))return Nt=15,1;if(0!==(2&e))return Nt=14,2;if(0!==(4&e))return Nt=13,4;var t=24&e;return 0!==t?(Nt=12,t):0!==(32&e)?(Nt=11,32):0!==(t=192&e)?(Nt=10,t):0!==(256&e)?(Nt=9,256):0!==(t=3584&e)?(Nt=8,t):0!==(4096&e)?(Nt=7,4096):0!==(t=4186112&e)?(Nt=6,t):0!==(t=62914560&e)?(Nt=5,t):67108864&e?(Nt=4,67108864):0!==(134217728&e)?(Nt=3,134217728):0!==(t=805306368&e)?(Nt=2,t):0!==(1073741824&e)?(Nt=1,1073741824):(Nt=8,e)}function Wt(e,t){var n=e.pendingLanes;if(0===n)return Nt=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Nt=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Ft(u),i=Nt):0!==(s&=o)&&(r=Ft(s),i=Nt)}else 0!==(o=n&~a)?(r=Ft(o),i=Nt):0!==s&&(r=Ft(s),i=Nt);if(0===r)return 0;if(r=n&((0>(r=31-Gt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&a)){if(Ft(t),i<=Nt)return t;Nt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Gt(t)),r|=e[n],t&=~i;return r}function Dt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?Ut(10,t):e;case 10:return 0===(e=Bt(192&~t))?Ut(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function Bt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ht(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Gt(t)]=n}var Gt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Vt(e)/qt|0)|0},Vt=Math.log,qt=Math.LN2;var Jt=o.unstable_UserBlockingPriority,Yt=o.unstable_runWithPriority,Kt=!0;function $t(e,t,n,r){Fe||Le();var i=Xt,o=Fe;Fe=!0;try{je(i,e,t,n,r)}finally{(Fe=o)||De()}}function Qt(e,t,n,r){Yt(Jt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if(Kt)if((i=0===(4&t))&&0<at.length&&-1<pt.indexOf(e))e=ht(null,e,t,n,r),at.push(e);else{var o=Zt(e,t,n,r);if(null===o)i&&yt(e,r);else{if(i){if(-1<pt.indexOf(e))return e=ht(o,e,t,n,r),void at.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=gt(st,e,t,n,r,i),!0;case"dragenter":return ut=gt(ut,e,t,n,r,i),!0;case"mouseover":return ct=gt(ct,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return lt.set(o,gt(lt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,dt.set(o,gt(dt.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;yt(e,r)}Or(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=xe(r);if(null!==(i=Zr(i))){var o=$e(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Qe(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Or(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function on(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var cn,ln,dn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=un(fn),hn=i({},fn,{view:0,detail:0}),yn=un(hn),gn=i({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dn&&(dn&&"mousemove"===e.type?(cn=e.screenX-dn.screenX,ln=e.screenY-dn.screenY):ln=cn=0,dn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),vn=un(gn),mn=un(i({},gn,{dataTransfer:0})),wn=un(i({},hn,{relatedTarget:0})),bn=un(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=un(i({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),kn=un(i({},fn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function An(){return xn}var Tn=un(i({},hn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=on(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?on(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?on(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),En=un(i({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=un(i({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Mn=un(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=un(i({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Rn=[9,13,27,32],jn=d&&"CompositionEvent"in window,Ln=null;d&&"documentMode"in document&&(Ln=document.documentMode);var Nn=d&&"TextEvent"in window&&!Ln,Fn=d&&(!jn||Ln&&8<Ln&&11>=Ln),Wn=String.fromCharCode(32),Dn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Vn(e,t,n,r){Me(r),0<(t=jr(t,"onChange")).length&&(n=new pn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Jn=null;function Yn(e){xr(e,0)}function Kn(e){if(Q(ti(e)))return e}function $n(e,t){if("change"===e)return t}var Qn=!1;if(d){var Xn;if(d){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Qn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Jn=qn=null)}function nr(e){if("value"===e.propertyName&&Kn(Jn)){var t=[];if(Vn(t,Jn,e,xe(e)),e=Yn,Fe)e(t);else{Fe=!0;try{Re(e,t)}finally{Fe=!1,De()}}}}function rr(e,t,n){"focusin"===e?(tr(),Jn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Jn)}function or(e,t){if("click"===e)return Kn(t)}function ar(e,t){if("input"===e||"change"===e)return Kn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ur=Object.prototype.hasOwnProperty;function cr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ur.call(t,n[r])||!sr(e[n[r]],t[n[r]]))return!1;return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,mr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},mr&&cr(mr,r)||(mr=r,0<(r=jr(vr,"onSelect")).length&&(t=new pn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(jt,2);for(var _r="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),kr=0;kr<_r.length;kr++)Rt.set(_r[kr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(Ke.apply(this,arguments),Ge){if(!Ge)throw Error(a(198));var l=Ve;Ge=!1,Ve=null,qe||(qe=!0,Je=l)}}(r,t,void 0,e),e.currentTarget=null}function xr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Ir(i,s,c),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,c=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Ir(i,s,c),o=u}}}if(qe)throw e=Je,qe=!1,Je=null,e}function Ar(e,t){var n=ri(t),r=e+"__bubble";n.has(r)||(Mr(t,e,2,!1),n.add(r))}var Tr="_reactListening"+Math.random().toString(36).slice(2);function Er(e){e[Tr]||(e[Tr]=!0,s.forEach((function(t){Cr.has(t)||Pr(t,!1,e,null),Pr(t,!0,e,null)})))}function Pr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Cr.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=ri(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Mr(o,e,i,t),a.add(s))}function Mr(e,t,n,r){var i=Rt.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Qt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Or(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=Zr(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(We)return e(t,n);We=!0;try{Ne(e,t,n)}finally{We=!1,De()}}((function(){var r=o,i=xe(n),a=[];e:{var s=Ot.get(e);if(void 0!==s){var u=pn,c=e;switch(e){case"keypress":if(0===on(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=wn;break;case"focusout":c="blur",u=wn;break;case"beforeblur":case"afterblur":u=wn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Pn;break;case Tt:case Et:case Pt:u=bn;break;case Mt:u=Mn;break;case"scroll":u=yn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=En}var l=0!==(4&t),d=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var p,h=r;null!==h;){var y=(p=h).stateNode;if(5===p.tag&&null!==y&&(p=y,null!==f&&(null!=(y=Ue(h,f))&&l.push(Rr(h,y,p)))),d)break;h=h.return}0<l.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!Zr(c)&&!c[Qr])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?Zr(c):null)&&(c!==(d=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=vn,y="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=En,y="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==u?s:ti(u),p=null==c?s:ti(c),(s=new l(y,h+"leave",u,n,i)).target=d,s.relatedTarget=p,y=null,Zr(i)===r&&((l=new l(f,h+"enter",c,n,i)).target=p,l.relatedTarget=d,y=l),d=y,u&&c)e:{for(f=c,h=0,p=l=u;p;p=Lr(p))h++;for(p=0,y=f;y;y=Lr(y))p++;for(;0<h-p;)l=Lr(l),h--;for(;0<p-h;)f=Lr(f),p--;for(;h--;){if(l===f||null!==f&&l===f.alternate)break e;l=Lr(l),f=Lr(f)}l=null}else l=null;null!==u&&Nr(a,s,u,l,!1),null!==c&&null!==d&&Nr(a,d,c,l,!0)}if("select"===(u=(s=r?ti(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=$n;else if(Gn(s))if(Qn)g=ar;else{g=ir;var v=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Vn(a,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ie(s,"number",s.value)),v=r?ti(r):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,mr=null);break;case"focusout":mr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(a,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":br(a,n,i)}var m;if(jn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?Un(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(m=rn()):(tn="value"in(en=i)?en.value:en.textContent,zn=!0)),0<(v=jr(r,w)).length&&(w=new kn(w,e,null,n,i),a.push({event:w,listeners:v}),m?w.data=m:null!==(m=Bn(n))&&(w.data=m))),(m=Nn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Dn=!0,Wn);case"textInput":return(e=t.data)===Wn&&Dn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!jn&&Un(e,t)?(e=rn(),nn=tn=en=null,zn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=jr(r,"onBeforeInput")).length&&(i=new kn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=m))}xr(a,t)}))}function Rr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ue(e,n))&&r.unshift(Rr(e,o,i)),null!=(o=Ue(e,t))&&r.push(Rr(e,o,i))),e=e.return}return r}function Lr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Nr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ue(n,o))&&a.unshift(Rr(n,u,s)):i||null!=(u=Ue(n,o))&&a.push(Rr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Fr(){}var Wr=null,Dr=null;function Ur(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Br(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var zr="function"===typeof setTimeout?setTimeout:void 0,Hr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Vr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Jr=0;var Yr=Math.random().toString(36).slice(2),Kr="__reactFiber$"+Yr,$r="__reactProps$"+Yr,Qr="__reactContainer$"+Yr,Xr="__reactEvents$"+Yr;function Zr(e){var t=e[Kr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qr]||n[Kr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=qr(e);null!==e;){if(n=e[Kr])return n;e=qr(e)}return t}n=(e=n).parentNode}return null}function ei(e){return!(e=e[Kr]||e[Qr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ti(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ni(e){return e[$r]||null}function ri(e){var t=e[Xr];return void 0===t&&(t=e[Xr]=new Set),t}var ii=[],oi=-1;function ai(e){return{current:e}}function si(e){0>oi||(e.current=ii[oi],ii[oi]=null,oi--)}function ui(e,t){oi++,ii[oi]=e.current,e.current=t}var ci={},li=ai(ci),di=ai(!1),fi=ci;function pi(e,t){var n=e.type.contextTypes;if(!n)return ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function hi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){si(di),si(li)}function gi(e,t,n){if(li.current!==ci)throw Error(a(168));ui(li,t),ui(di,n)}function vi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,J(t)||"Unknown",o));return i({},n,r)}function mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ci,fi=li.current,ui(li,e),ui(di,di.current),!0}function wi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=vi(e,t,fi),r.__reactInternalMemoizedMergedChildContext=e,si(di),si(li),ui(li,e)):si(di),ui(di,n)}var bi=null,_i=null,ki=o.unstable_runWithPriority,Si=o.unstable_scheduleCallback,Ci=o.unstable_cancelCallback,Ii=o.unstable_shouldYield,xi=o.unstable_requestPaint,Ai=o.unstable_now,Ti=o.unstable_getCurrentPriorityLevel,Ei=o.unstable_ImmediatePriority,Pi=o.unstable_UserBlockingPriority,Mi=o.unstable_NormalPriority,Oi=o.unstable_LowPriority,Ri=o.unstable_IdlePriority,ji={},Li=void 0!==xi?xi:function(){},Ni=null,Fi=null,Wi=!1,Di=Ai(),Ui=1e4>Di?Ai:function(){return Ai()-Di};function Bi(){switch(Ti()){case Ei:return 99;case Pi:return 98;case Mi:return 97;case Oi:return 96;case Ri:return 95;default:throw Error(a(332))}}function zi(e){switch(e){case 99:return Ei;case 98:return Pi;case 97:return Mi;case 96:return Oi;case 95:return Ri;default:throw Error(a(332))}}function Hi(e,t){return e=zi(e),ki(e,t)}function Gi(e,t,n){return e=zi(e),Si(e,t,n)}function Vi(){if(null!==Fi){var e=Fi;Fi=null,Ci(e)}qi()}function qi(){if(!Wi&&null!==Ni){Wi=!0;var e=0;try{var t=Ni;Hi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ni=null}catch(n){throw null!==Ni&&(Ni=Ni.slice(e+1)),Si(Ei,Vi),n}finally{Wi=!1}}}var Ji=_.ReactCurrentBatchConfig;function Yi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ki=ai(null),$i=null,Qi=null,Xi=null;function Zi(){Xi=Qi=$i=null}function eo(e){var t=Ki.current;si(Ki),e.type._context._currentValue=t}function to(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function no(e,t){$i=e,Xi=Qi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ja=!0),e.firstContext=null)}function ro(e,t){if(Xi!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Xi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Qi){if(null===$i)throw Error(a(308));Qi=t,$i.dependencies={lanes:0,firstContext:t,responders:null}}else Qi=Qi.next=t;return e._currentValue}var io=!1;function oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ao(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function so(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function uo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function co(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function lo(e,t,n,r){var o=e.updateQueue;io=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?a=l:s.next=l,s=c;var d=e.alternate;if(null!==d){var f=(d=d.updateQueue).lastBaseUpdate;f!==s&&(null===f?d.firstBaseUpdate=l:f.next=l,d.lastBaseUpdate=c)}}if(null!==a){for(f=o.baseState,s=0,d=l=c=null;;){u=a.lane;var p=a.eventTime;if((r&u)===u){null!==d&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=e,y=a;switch(u=t,p=n,y.tag){case 1:if("function"===typeof(h=y.payload)){f=h.call(p,f,u);break e}f=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null===(u="function"===typeof(h=y.payload)?h.call(p,f,u):h)||void 0===u)break e;f=i({},f,u);break e;case 2:io=!0}}null!==a.callback&&(e.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else p={eventTime:p,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===d?(l=d=p,c=f):d=d.next=p,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===d&&(c=f),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=d,Ws|=s,e.lanes=s,e.memoizedState=f}}function fo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var po=(new r.Component).refs;function ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var yo={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=cu(),i=lu(e),o=so(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),uo(e,o),du(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=cu(),i=lu(e),o=so(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),uo(e,o),du(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=cu(),r=lu(e),i=so(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),uo(e,i),du(e,r,n)}};function go(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,o))}function vo(e,t,n){var r=!1,i=ci,o=t.contextType;return"object"===typeof o&&null!==o?o=ro(o):(i=hi(t)?fi:li.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?pi(e,i):ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=yo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function mo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yo.enqueueReplaceState(t,t.state,null)}function wo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=po,oo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ro(o):(o=hi(t)?fi:li.current,i.context=pi(e,o)),lo(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ho(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&yo.enqueueReplaceState(i,i.state,null),lo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var bo=Array.isArray;function _o(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===po&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ko(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function So(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Hu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ju(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_o(e,t,n),r.return=e,r):((r=Gu(n.type,n.key,n.props,null,e.mode,r)).ref=_o(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Yu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Vu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ju(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=Gu(t.type,t.key,t.props,null,e.mode,n)).ref=_o(e,null,t),n.return=e,n;case S:return(t=Yu(t,e.mode,n)).return=e,t}if(bo(t)||z(t))return(t=Vu(t,e.mode,n,null)).return=e,t;ko(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===i?n.type===C?d(e,t,n.props.children,r,i):c(e,t,n,r):null;case S:return n.key===i?l(e,t,n,r):null}if(bo(n)||z(n))return null!==i?null:d(e,t,n,r,null);ko(e,n)}return null}function h(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return e=e.get(null===r.key?n:r.key)||null,r.type===C?d(t,e,r.props.children,i,r.key):c(t,e,r,i);case S:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(bo(r)||z(r))return d(t,e=e.get(n)||null,r,i,null);ko(t,r)}return null}function y(i,a,s,u){for(var c=null,l=null,d=a,y=a=0,g=null;null!==d&&y<s.length;y++){d.index>y?(g=d,d=null):g=d.sibling;var v=p(i,d,s[y],u);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),a=o(v,a,y),null===l?c=v:l.sibling=v,l=v,d=g}if(y===s.length)return n(i,d),c;if(null===d){for(;y<s.length;y++)null!==(d=f(i,s[y],u))&&(a=o(d,a,y),null===l?c=d:l.sibling=d,l=d);return c}for(d=r(i,d);y<s.length;y++)null!==(g=h(d,i,y,s[y],u))&&(e&&null!==g.alternate&&d.delete(null===g.key?y:g.key),a=o(g,a,y),null===l?c=g:l.sibling=g,l=g);return e&&d.forEach((function(e){return t(i,e)})),c}function g(i,s,u,c){var l=z(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var d=l=null,y=s,g=s=0,v=null,m=u.next();null!==y&&!m.done;g++,m=u.next()){y.index>g?(v=y,y=null):v=y.sibling;var w=p(i,y,m.value,c);if(null===w){null===y&&(y=v);break}e&&y&&null===w.alternate&&t(i,y),s=o(w,s,g),null===d?l=w:d.sibling=w,d=w,y=v}if(m.done)return n(i,y),l;if(null===y){for(;!m.done;g++,m=u.next())null!==(m=f(i,m.value,c))&&(s=o(m,s,g),null===d?l=m:d.sibling=m,d=m);return l}for(y=r(i,y);!m.done;g++,m=u.next())null!==(m=h(y,i,g,m.value,c))&&(e&&null!==m.alternate&&y.delete(null===m.key?g:m.key),s=o(m,s,g),null===d?l=m:d.sibling=m,d=m);return e&&y.forEach((function(e){return t(i,e)})),l}return function(e,r,o,u){var c="object"===typeof o&&null!==o&&o.type===C&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case k:e:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===C){n(e,c.sibling),(r=i(c,o.props.children)).return=e,e=r;break e}break;default:if(c.elementType===o.type){n(e,c.sibling),(r=i(c,o.props)).ref=_o(e,c,o),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}o.type===C?((r=Vu(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Gu(o.type,o.key,o.props,null,e.mode,u)).ref=_o(e,r,o),u.return=e,e=u)}return s(e);case S:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Yu(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Ju(o,e.mode,u)).return=e,e=r),s(e);if(bo(o))return y(e,r,o,u);if(z(o))return g(e,r,o,u);if(l&&ko(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,J(e.type)||"Component"))}return n(e,r)}}var Co=So(!0),Io=So(!1),xo={},Ao=ai(xo),To=ai(xo),Eo=ai(xo);function Po(e){if(e===xo)throw Error(a(174));return e}function Mo(e,t){switch(ui(Eo,t),ui(To,e),ui(Ao,xo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:he(null,"");break;default:t=he(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}si(Ao),ui(Ao,t)}function Oo(){si(Ao),si(To),si(Eo)}function Ro(e){Po(Eo.current);var t=Po(Ao.current),n=he(t,e.type);t!==n&&(ui(To,e),ui(Ao,n))}function jo(e){To.current===e&&(si(Ao),si(To))}var Lo=ai(0);function No(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fo=null,Wo=null,Do=!1;function Uo(e,t){var n=Bu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Bo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function zo(e){if(Do){var t=Wo;if(t){var n=t;if(!Bo(e,t)){if(!(t=Vr(n.nextSibling))||!Bo(e,t))return e.flags=-1025&e.flags|2,Do=!1,void(Fo=e);Uo(Fo,n)}Fo=e,Wo=Vr(t.firstChild)}else e.flags=-1025&e.flags|2,Do=!1,Fo=e}}function Ho(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Fo=e}function Go(e){if(e!==Fo)return!1;if(!Do)return Ho(e),Do=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Br(t,e.memoizedProps))for(t=Wo;t;)Uo(e,t),t=Vr(t.nextSibling);if(Ho(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Wo=Vr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Wo=null}}else Wo=Fo?Vr(e.stateNode.nextSibling):null;return!0}function Vo(){Wo=Fo=null,Do=!1}var qo=[];function Jo(){for(var e=0;e<qo.length;e++)qo[e]._workInProgressVersionPrimary=null;qo.length=0}var Yo=_.ReactCurrentDispatcher,Ko=_.ReactCurrentBatchConfig,$o=0,Qo=null,Xo=null,Zo=null,ea=!1,ta=!1;function na(){throw Error(a(321))}function ra(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ia(e,t,n,r,i,o){if($o=o,Qo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yo.current=null===e||null===e.memoizedState?Pa:Ma,e=n(r,i),ta){o=0;do{if(ta=!1,!(25>o))throw Error(a(301));o+=1,Zo=Xo=null,t.updateQueue=null,Yo.current=Oa,e=n(r,i)}while(ta)}if(Yo.current=Ea,t=null!==Xo&&null!==Xo.next,$o=0,Zo=Xo=Qo=null,ea=!1,t)throw Error(a(300));return e}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Zo?Qo.memoizedState=Zo=e:Zo=Zo.next=e,Zo}function aa(){if(null===Xo){var e=Qo.alternate;e=null!==e?e.memoizedState:null}else e=Xo.next;var t=null===Zo?Qo.memoizedState:Zo.next;if(null!==t)Zo=t,Xo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Xo=e).memoizedState,baseState:Xo.baseState,baseQueue:Xo.baseQueue,queue:Xo.queue,next:null},null===Zo?Qo.memoizedState=Zo=e:Zo=Zo.next=e}return Zo}function sa(e,t){return"function"===typeof t?t(e):t}function ua(e){var t=aa(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Xo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.lane;if(($o&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var d={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=d,o=r):u=u.next=d,Qo.lanes|=l,Ws|=l}c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,sr(r,t.memoizedState)||(ja=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ca(e){var t=aa(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(ja=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function la(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=($o&e)===e)&&(t._workInProgressVersionPrimary=r,qo.push(t))),e)return n(t._source);throw qo.push(t),Error(a(350))}function da(e,t,n,r){var i=Ps;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),u=Yo.current,c=u.useState((function(){return la(i,t,n)})),l=c[1],d=c[0];c=Zo;var f=e.memoizedState,p=f.refs,h=p.getSnapshot,y=f.source;f=f.subscribe;var g=Qo;return e.memoizedState={refs:p,source:t,subscribe:r},u.useEffect((function(){p.getSnapshot=n,p.setSnapshot=l;var e=o(t._source);if(!sr(s,e)){e=n(t._source),sr(d,e)||(l(e),e=lu(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var u=31-Gt(a),c=1<<u;r[u]|=e,a&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=lu(g);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),sr(h,n)&&sr(y,t)&&sr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:d}).dispatch=l=Ta.bind(null,Qo,e),c.queue=e,c.baseQueue=null,d=la(i,t,n),c.memoizedState=c.baseState=d),d}function fa(e,t,n){return da(aa(),e,t,n)}function pa(e){var t=oa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:e}).dispatch=Ta.bind(null,Qo,e),[t.memoizedState,e]}function ha(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Qo.updateQueue)?(t={lastEffect:null},Qo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ya(e){return e={current:e},oa().memoizedState=e}function ga(){return aa().memoizedState}function va(e,t,n,r){var i=oa();Qo.flags|=e,i.memoizedState=ha(1|t,n,void 0,void 0===r?null:r)}function ma(e,t,n,r){var i=aa();r=void 0===r?null:r;var o=void 0;if(null!==Xo){var a=Xo.memoizedState;if(o=a.destroy,null!==r&&ra(r,a.deps))return void ha(t,n,o,r)}Qo.flags|=e,i.memoizedState=ha(1|t,n,o,r)}function wa(e,t){return va(516,4,e,t)}function ba(e,t){return ma(516,4,e,t)}function _a(e,t){return ma(4,2,e,t)}function ka(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Sa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ma(4,2,ka.bind(null,t,e),n)}function Ca(){}function Ia(e,t){var n=aa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ra(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xa(e,t){var n=aa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ra(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Aa(e,t){var n=Bi();Hi(98>n?98:n,(function(){e(!0)})),Hi(97<n?97:n,(function(){var n=Ko.transition;Ko.transition=1;try{e(!1),t()}finally{Ko.transition=n}}))}function Ta(e,t,n){var r=cu(),i=lu(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===Qo||null!==a&&a===Qo)ta=ea=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,sr(u,s))return}catch(c){}du(e,i,r)}}var Ea={readContext:ro,useCallback:na,useContext:na,useEffect:na,useImperativeHandle:na,useLayoutEffect:na,useMemo:na,useReducer:na,useRef:na,useState:na,useDebugValue:na,useDeferredValue:na,useTransition:na,useMutableSource:na,useOpaqueIdentifier:na,unstable_isNewReconciler:!1},Pa={readContext:ro,useCallback:function(e,t){return oa().memoizedState=[e,void 0===t?null:t],e},useContext:ro,useEffect:wa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,va(4,2,ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return va(4,2,e,t)},useMemo:function(e,t){var n=oa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ta.bind(null,Qo,e),[r.memoizedState,e]},useRef:ya,useState:pa,useDebugValue:Ca,useDeferredValue:function(e){var t=pa(e),n=t[0],r=t[1];return wa((function(){var t=Ko.transition;Ko.transition=1;try{r(e)}finally{Ko.transition=t}}),[e]),n},useTransition:function(){var e=pa(!1),t=e[0];return ya(e=Aa.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oa();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},da(r,e,t,n)},useOpaqueIdentifier:function(){if(Do){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Jr++).toString(36))),Error(a(355))})),n=pa(t)[1];return 0===(2&Qo.mode)&&(Qo.flags|=516,ha(5,(function(){n("r:"+(Jr++).toString(36))}),void 0,null)),t}return pa(t="r:"+(Jr++).toString(36)),t},unstable_isNewReconciler:!1},Ma={readContext:ro,useCallback:Ia,useContext:ro,useEffect:ba,useImperativeHandle:Sa,useLayoutEffect:_a,useMemo:xa,useReducer:ua,useRef:ga,useState:function(){return ua(sa)},useDebugValue:Ca,useDeferredValue:function(e){var t=ua(sa),n=t[0],r=t[1];return ba((function(){var t=Ko.transition;Ko.transition=1;try{r(e)}finally{Ko.transition=t}}),[e]),n},useTransition:function(){var e=ua(sa)[0];return[ga().current,e]},useMutableSource:fa,useOpaqueIdentifier:function(){return ua(sa)[0]},unstable_isNewReconciler:!1},Oa={readContext:ro,useCallback:Ia,useContext:ro,useEffect:ba,useImperativeHandle:Sa,useLayoutEffect:_a,useMemo:xa,useReducer:ca,useRef:ga,useState:function(){return ca(sa)},useDebugValue:Ca,useDeferredValue:function(e){var t=ca(sa),n=t[0],r=t[1];return ba((function(){var t=Ko.transition;Ko.transition=1;try{r(e)}finally{Ko.transition=t}}),[e]),n},useTransition:function(){var e=ca(sa)[0];return[ga().current,e]},useMutableSource:fa,useOpaqueIdentifier:function(){return ca(sa)[0]},unstable_isNewReconciler:!1},Ra=_.ReactCurrentOwner,ja=!1;function La(e,t,n,r){t.child=null===e?Io(t,null,n,r):Co(t,e.child,n,r)}function Na(e,t,n,r,i){n=n.render;var o=t.ref;return no(t,i),r=ia(e,t,n,r,o,i),null===e||ja?(t.flags|=1,La(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ns(e,t,i))}function Fa(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||zu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gu(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Wa(e,t,a,r,i,o))}return a=e.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:cr)(i,r)&&e.ref===t.ref)?ns(e,t,o):(t.flags|=1,(e=Hu(a,r)).ref=t.ref,e.return=t,t.child=e)}function Wa(e,t,n,r,i,o){if(null!==e&&cr(e.memoizedProps,r)&&e.ref===t.ref){if(ja=!1,0===(o&i))return t.lanes=e.lanes,ns(e,t,o);0!==(16384&e.flags)&&(ja=!0)}return Ba(e,t,n,r,o)}function Da(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},wu(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wu(t,e),null;t.memoizedState={baseLanes:0},wu(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,wu(t,r);return La(e,t,i,n),t.child}function Ua(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ba(e,t,n,r,i){var o=hi(n)?fi:li.current;return o=pi(t,o),no(t,i),n=ia(e,t,n,r,o,i),null===e||ja?(t.flags|=1,La(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ns(e,t,i))}function za(e,t,n,r,i){if(hi(n)){var o=!0;mi(t)}else o=!1;if(no(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),vo(t,n,r),wo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ro(c):c=pi(t,c=hi(n)?fi:li.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&mo(t,a,r,c),io=!1;var f=t.memoizedState;a.state=f,lo(t,r,a,i),u=t.memoizedState,s!==r||f!==u||di.current||io?("function"===typeof l&&(ho(t,n,l,r),u=t.memoizedState),(s=io||go(t,n,s,r,f,u,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,ao(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Yi(t.type,s),a.props=c,d=t.pendingProps,f=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=ro(u):u=pi(t,u=hi(n)?fi:li.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||f!==u)&&mo(t,a,r,u),io=!1,f=t.memoizedState,a.state=f,lo(t,r,a,i);var h=t.memoizedState;s!==d||f!==h||di.current||io?("function"===typeof p&&(ho(t,n,p,r),h=t.memoizedState),(c=io||go(t,n,c,r,f,h,u))?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=u,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Ha(e,t,n,r,o,i)}function Ha(e,t,n,r,i,o){Ua(e,t);var a=0!==(64&t.flags);if(!r&&!a)return i&&wi(t,n,!1),ns(e,t,o);r=t.stateNode,Ra.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Co(t,e.child,null,o),t.child=Co(t,null,s,o)):La(e,t,s,o),t.memoizedState=r.state,i&&wi(t,n,!0),t.child}function Ga(e){var t=e.stateNode;t.pendingContext?gi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gi(0,t.context,!1),Mo(e,t.containerInfo)}var Va,qa,Ja,Ya={dehydrated:null,retryLane:0};function Ka(e,t,n){var r,i=t.pendingProps,o=Lo.current,a=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),ui(Lo,1&o),null===e?(void 0!==i.fallback&&zo(t),e=i.children,o=i.fallback,a?(e=$a(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ya,e):"number"===typeof i.unstable_expectedLoadTime?(e=$a(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ya,t.lanes=33554432,e):((n=qu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=Xa(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Ya,i):(n=Qa(e,t,i.children,n),t.memoizedState=null,n))}function $a(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=qu(t,i,0,null),n=Vu(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function Qa(e,t,n,r){var i=e.child;return e=i.sibling,n=Hu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Xa(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Hu(a,s),null!==e?r=Hu(e,r):(r=Vu(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Za(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),to(e.return,t)}function es(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function ts(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(La(e,t,r.children,n),0!==(2&(r=Lo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Za(e,n);else if(19===e.tag)Za(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ui(Lo,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===No(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),es(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===No(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}es(t,!0,n,null,o,t.lastEffect);break;case"together":es(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ns(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ws|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Hu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function rs(e,t){if(!Do)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function is(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return hi(t.type)&&yi(),null;case 3:return Oo(),si(di),si(li),Jo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Go(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:jo(t);var o=Po(Eo.current);if(n=t.type,null!==e&&null!=t.stateNode)qa(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Po(Ao.current),Go(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Kr]=t,r[$r]=s,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Ar(Sr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,s),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ar("invalid",r);break;case"textarea":ue(r,s),Ar("invalid",r)}for(var c in Ce(n,s),e=null,s)s.hasOwnProperty(c)&&(o=s[c],"children"===c?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):u.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":$(r),re(r,s,!0);break;case"textarea":$(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Fr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,e===de&&(e=pe(n)),e===de?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Kr]=t,e[$r]=r,Va(e,t),t.stateNode=e,c=Ie(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),o=r;break;case"iframe":case"object":case"embed":Ar("load",e),o=r;break;case"video":case"audio":for(o=0;o<Sr.length;o++)Ar(Sr[o],e);o=r;break;case"source":Ar("error",e),o=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),o=r;break;case"details":Ar("toggle",e),o=r;break;case"input":ee(e,r),o=Z(e,r),Ar("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":ue(e,r),o=se(e,r),Ar("invalid",e);break;default:o=r}Ce(n,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var d=l[s];"style"===s?ke(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&ve(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&me(e,d):"number"===typeof d&&me(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Ar("scroll",e):null!=d&&b(e,s,d,c))}switch(n){case"input":$(e),re(e,r,!1);break;case"textarea":$(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Y(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ae(e,!!r.multiple,s,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Fr)}Ur(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ja(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));n=Po(Eo.current),Po(Ao.current),Go(t)?(r=t.stateNode,n=t.memoizedProps,r[Kr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Kr]=t,t.stateNode=r)}return null;case 13:return si(Lo),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Go(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Lo.current)?0===Ls&&(Ls=3):(0!==Ls&&3!==Ls||(Ls=4),null===Ps||0===(134217727&Ws)&&0===(134217727&Ds)||yu(Ps,Os))),(r||n)&&(t.flags|=4),null);case 4:return Oo(),null===e&&Er(t.stateNode.containerInfo),null;case 10:return eo(t),null;case 17:return hi(t.type)&&yi(),null;case 19:if(si(Lo),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)rs(r,!1);else{if(0!==Ls||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=No(e))){for(t.flags|=64,rs(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ui(Lo,1&Lo.current|2),t.child}e=e.sibling}null!==r.tail&&Ui()>Hs&&(t.flags|=64,s=!0,rs(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=No(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),rs(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Do)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ui()-r.renderingStartTime>Hs&&1073741824!==n&&(t.flags|=64,s=!0,rs(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ui(),n.sibling=null,t=Lo.current,ui(Lo,s?1&t|2:1&t),n):null;case 23:case 24:return bu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function os(e){switch(e.tag){case 1:hi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Oo(),si(di),si(li),Jo(),0!==(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return jo(e),null;case 13:return si(Lo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return si(Lo),null;case 4:return Oo(),null;case 10:return eo(e),null;case 23:case 24:return bu(),null;default:return null}}function as(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Va=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},qa=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Po(Ao.current);var a,s=null;switch(n){case"input":o=Z(e,o),r=Z(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Fr)}for(d in Ce(n,r),n=null,o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&null!=o[d])if("style"===d){var c=o[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(u.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var l=r[d];if(c=null!=o?o[d]:void 0,r.hasOwnProperty(d)&&l!==c&&(null!=l||null!=c))if("style"===d)if(c){for(a in c)!c.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&c[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(d,n)),n=l;else"dangerouslySetInnerHTML"===d?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(d,l)):"children"===d?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(d,""+l):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(u.hasOwnProperty(d)?(null!=l&&"onScroll"===d&&Ar("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(d,l))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Ja=function(e,t,n,r){n!==r&&(t.flags|=4)};var us="function"===typeof WeakMap?WeakMap:Map;function cs(e,t,n){(n=so(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Js||(Js=!0,Ys=r),ss(0,t)},n}function ls(e,t,n){(n=so(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ss(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ks?Ks=new Set([this]):Ks.add(this),ss(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ds="function"===typeof WeakSet?WeakSet:Set;function fs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Fu(e,n)}else t.current=null}function ps(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function hs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(ju(n,e),Ru(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}fo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Ur(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&kt(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=_e("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function gs(e,t){if(_i&&"function"===typeof _i.onCommitFiberUnmount)try{_i.onCommitFiberUnmount(bi,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))ju(t,n);else{r=t;try{i()}catch(o){Fu(r,o)}}n=n.next}while(n!==e)}break;case 1:if(fs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Fu(t,o)}break;case 5:fs(t);break;case 4:ks(e,t)}}function vs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ms(e){return 5===e.tag||3===e.tag||4===e.tag}function ws(e){e:{for(var t=e.return;null!==t;){if(ms(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(me(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ms(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?bs(e,n,t):_s(e,n,t)}function bs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Fr));else if(4!==r&&null!==(e=e.child))for(bs(e,t,n),e=e.sibling;null!==e;)bs(e,t,n),e=e.sibling}function _s(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(_s(e,t,n),e=e.sibling;null!==e;)_s(e,t,n),e=e.sibling}function ks(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(gs(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(gs(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Ss(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[$r]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ie(e,i),t=Ie(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?ke(n,u):"dangerouslySetInnerHTML"===s?ve(n,u):"children"===s?me(n,u):b(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ae(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ae(n,!!r.multiple,r.defaultValue,!0):ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,kt(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(zs=Ui(),ys(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 17:return;case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(a(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ds),t.forEach((function(t){var r=Du.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Is(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var xs=Math.ceil,As=_.ReactCurrentDispatcher,Ts=_.ReactCurrentOwner,Es=0,Ps=null,Ms=null,Os=0,Rs=0,js=ai(0),Ls=0,Ns=null,Fs=0,Ws=0,Ds=0,Us=0,Bs=null,zs=0,Hs=1/0;function Gs(){Hs=Ui()+500}var Vs,qs=null,Js=!1,Ys=null,Ks=null,$s=!1,Qs=null,Xs=90,Zs=[],eu=[],tu=null,nu=0,ru=null,iu=-1,ou=0,au=0,su=null,uu=!1;function cu(){return 0!==(48&Es)?Ui():-1!==iu?iu:iu=Ui()}function lu(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Bi()?1:2;if(0===ou&&(ou=Fs),0!==Ji.transition){0!==au&&(au=null!==Bs?Bs.pendingLanes:0),e=ou;var t=4186112&~au;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Bi(),0!==(4&Es)&&98===e?e=Ut(12,ou):e=Ut(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ou),e}function du(e,t,n){if(50<nu)throw nu=0,ru=null,Error(a(185));if(null===(e=fu(e,t)))return null;Ht(e,t,n),e===Ps&&(Ds|=t,4===Ls&&yu(e,Os));var r=Bi();1===t?0!==(8&Es)&&0===(48&Es)?gu(e):(pu(e,n),0===Es&&(Gs(),Vi())):(0===(4&Es)||98!==r&&99!==r||(null===tu?tu=new Set([e]):tu.add(e)),pu(e,n)),Bs=e}function fu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function pu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Gt(s),c=1<<u,l=o[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var d=Nt;o[u]=10<=d?l+250:6<=d?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Wt(e,e===Ps?Os:0),t=Nt,0===r)null!==n&&(n!==ji&&Ci(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==ji&&Ci(n)}15===t?(n=gu.bind(null,e),null===Ni?(Ni=[n],Fi=Si(Ei,qi)):Ni.push(n),n=ji):14===t?n=Gi(99,gu.bind(null,e)):n=Gi(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),hu.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function hu(e){if(iu=-1,au=ou=0,0!==(48&Es))throw Error(a(327));var t=e.callbackNode;if(Ou()&&e.callbackNode!==t)return null;var n=Wt(e,e===Ps?Os:0);if(0===n)return null;var r=n,i=Es;Es|=16;var o=Su();for(Ps===e&&Os===r||(Gs(),_u(e,r));;)try{xu();break}catch(u){ku(e,u)}if(Zi(),As.current=o,Es=i,null!==Ms?r=0:(Ps=null,Os=0,r=Ls),0!==(Fs&Ds))_u(e,0);else if(0!==r){if(2===r&&(Es|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=Dt(e))&&(r=Cu(e,n))),1===r)throw t=Ns,_u(e,0),yu(e,n),pu(e,Ui()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:Eu(e);break;case 3:if(yu(e,n),(62914560&n)===n&&10<(r=zs+500-Ui())){if(0!==Wt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){cu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=zr(Eu.bind(null,e),r);break}Eu(e);break;case 4:if(yu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Gt(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=Ui()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*xs(n/1960))-n)){e.timeoutHandle=zr(Eu.bind(null,e),n);break}Eu(e);break;case 5:Eu(e);break;default:throw Error(a(329))}}return pu(e,Ui()),e.callbackNode===t?hu.bind(null,e):null}function yu(e,t){for(t&=~Us,t&=~Ds,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Gt(t),r=1<<n;e[n]=-1,t&=~r}}function gu(e){if(0!==(48&Es))throw Error(a(327));if(Ou(),e===Ps&&0!==(e.expiredLanes&Os)){var t=Os,n=Cu(e,t);0!==(Fs&Ds)&&(n=Cu(e,t=Wt(e,t)))}else n=Cu(e,t=Wt(e,0));if(0!==e.tag&&2===n&&(Es|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=Dt(e))&&(n=Cu(e,t))),1===n)throw n=Ns,_u(e,0),yu(e,t),pu(e,Ui()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Eu(e),pu(e,Ui()),null}function vu(e,t){var n=Es;Es|=1;try{return e(t)}finally{0===(Es=n)&&(Gs(),Vi())}}function mu(e,t){var n=Es;Es&=-2,Es|=8;try{return e(t)}finally{0===(Es=n)&&(Gs(),Vi())}}function wu(e,t){ui(js,Rs),Rs|=t,Fs|=t}function bu(){Rs=js.current,si(js)}function _u(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Hr(n)),null!==Ms)for(n=Ms.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Oo(),si(di),si(li),Jo();break;case 5:jo(r);break;case 4:Oo();break;case 13:case 19:si(Lo);break;case 10:eo(r);break;case 23:case 24:bu()}n=n.return}Ps=e,Ms=Hu(e.current,null),Os=Rs=Fs=t,Ls=0,Ns=null,Us=Ds=Ws=0}function ku(e,t){for(;;){var n=Ms;try{if(Zi(),Yo.current=Ea,ea){for(var r=Qo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ea=!1}if($o=0,Zo=Xo=Qo=null,ta=!1,Ts.current=null,null===n||null===n.return){Ls=1,Ns=t,Ms=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=Os,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var d=0!==(1&Lo.current),f=a;do{var p;if(p=13===f.tag){var h=f.memoizedState;if(null!==h)p=null!==h.dehydrated;else{var y=f.memoizedProps;p=void 0!==y.fallback&&(!0!==y.unstable_avoidThisFallback||!d)}}if(p){var g=f.updateQueue;if(null===g){var v=new Set;v.add(c),f.updateQueue=v}else g.add(c);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var m=so(-1,1);m.tag=2,uo(s,m)}s.lanes|=1;break e}u=void 0,s=t;var w=o.pingCache;if(null===w?(w=o.pingCache=new us,u=new Set,w.set(c,u)):void 0===(u=w.get(c))&&(u=new Set,w.set(c,u)),!u.has(s)){u.add(s);var b=Wu.bind(null,o,c,s);c.then(b,b)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((J(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ls&&(Ls=2),u=as(u,s),f=a;do{switch(f.tag){case 3:o=u,f.flags|=4096,t&=-t,f.lanes|=t,co(f,cs(0,o,t));break e;case 1:o=u;var _=f.type,k=f.stateNode;if(0===(64&f.flags)&&("function"===typeof _.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ks||!Ks.has(k)))){f.flags|=4096,t&=-t,f.lanes|=t,co(f,ls(f,o,t));break e}}f=f.return}while(null!==f)}Tu(n)}catch(S){t=S,Ms===n&&null!==n&&(Ms=n=n.return);continue}break}}function Su(){var e=As.current;return As.current=Ea,null===e?Ea:e}function Cu(e,t){var n=Es;Es|=16;var r=Su();for(Ps===e&&Os===t||_u(e,t);;)try{Iu();break}catch(i){ku(e,i)}if(Zi(),Es=n,As.current=r,null!==Ms)throw Error(a(261));return Ps=null,Os=0,Ls}function Iu(){for(;null!==Ms;)Au(Ms)}function xu(){for(;null!==Ms&&!Ii();)Au(Ms)}function Au(e){var t=Vs(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?Tu(e):Ms=t,Ts.current=null}function Tu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=is(n,t,Rs)))return void(Ms=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Rs)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=os(t)))return n.flags&=2047,void(Ms=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ms=t);Ms=t=e}while(null!==t);0===Ls&&(Ls=5)}function Eu(e){var t=Bi();return Hi(99,Pu.bind(null,e,t)),null}function Pu(e,t){do{Ou()}while(null!==Qs);if(0!==(48&Es))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<o;){var c=31-Gt(o),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,o&=~l}if(null!==tu&&0===(24&r)&&tu.has(e)&&tu.delete(e),e===Ps&&(Ms=Ps=null,Os=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Es,Es|=32,Ts.current=null,Wr=Kt,hr(s=pr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,o=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(x){u=null;break e}var d=0,f=-1,p=-1,h=0,y=0,g=s,v=null;t:for(;;){for(var m;g!==u||0!==o&&3!==g.nodeType||(f=d+o),g!==c||0!==l&&3!==g.nodeType||(p=d+l),3===g.nodeType&&(d+=g.nodeValue.length),null!==(m=g.firstChild);)v=g,g=m;for(;;){if(g===s)break t;if(v===u&&++h===o&&(f=d),v===c&&++y===l&&(p=d),null!==(m=g.nextSibling))break;v=(g=v).parentNode}g=m}u=-1===f||-1===p?null:{start:f,end:p}}else u=null;u=u||{start:0,end:0}}else u=null;Dr={focusedElem:s,selectionRange:u},Kt=!1,su=null,uu=!1,qs=r;do{try{Mu()}catch(x){if(null===qs)throw Error(a(330));Fu(qs,x),qs=qs.nextEffect}}while(null!==qs);su=null,qs=r;do{try{for(s=e;null!==qs;){var w=qs.flags;if(16&w&&me(qs.stateNode,""),128&w){var b=qs.alternate;if(null!==b){var _=b.ref;null!==_&&("function"===typeof _?_(null):_.current=null)}}switch(1038&w){case 2:ws(qs),qs.flags&=-3;break;case 6:ws(qs),qs.flags&=-3,Ss(qs.alternate,qs);break;case 1024:qs.flags&=-1025;break;case 1028:qs.flags&=-1025,Ss(qs.alternate,qs);break;case 4:Ss(qs.alternate,qs);break;case 8:ks(s,u=qs);var k=u.alternate;vs(u),null!==k&&vs(k)}qs=qs.nextEffect}}catch(x){if(null===qs)throw Error(a(330));Fu(qs,x),qs=qs.nextEffect}}while(null!==qs);if(_=Dr,b=pr(),w=_.focusedElem,s=_.selectionRange,b!==w&&w&&w.ownerDocument&&fr(w.ownerDocument.documentElement,w)){null!==s&&hr(w)&&(b=s.start,void 0===(_=s.end)&&(_=b),"selectionStart"in w?(w.selectionStart=b,w.selectionEnd=Math.min(_,w.value.length)):(_=(b=w.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),u=w.textContent.length,k=Math.min(s.start,u),s=void 0===s.end?k:Math.min(s.end,u),!_.extend&&k>s&&(u=s,s=k,k=u),u=dr(w,k),o=dr(w,s),u&&o&&(1!==_.rangeCount||_.anchorNode!==u.node||_.anchorOffset!==u.offset||_.focusNode!==o.node||_.focusOffset!==o.offset)&&((b=b.createRange()).setStart(u.node,u.offset),_.removeAllRanges(),k>s?(_.addRange(b),_.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),_.addRange(b))))),b=[];for(_=w;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<b.length;w++)(_=b[w]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Kt=!!Wr,Dr=Wr=null,e.current=n,qs=r;do{try{for(w=e;null!==qs;){var S=qs.flags;if(36&S&&hs(w,qs.alternate,qs),128&S){b=void 0;var C=qs.ref;if(null!==C){var I=qs.stateNode;switch(qs.tag){case 5:b=I;break;default:b=I}"function"===typeof C?C(b):C.current=b}}qs=qs.nextEffect}}catch(x){if(null===qs)throw Error(a(330));Fu(qs,x),qs=qs.nextEffect}}while(null!==qs);qs=null,Li(),Es=i}else e.current=n;if($s)$s=!1,Qs=e,Xs=t;else for(qs=r;null!==qs;)t=qs.nextEffect,qs.nextEffect=null,8&qs.flags&&((S=qs).sibling=null,S.stateNode=null),qs=t;if(0===(r=e.pendingLanes)&&(Ks=null),1===r?e===ru?nu++:(nu=0,ru=e):nu=0,n=n.stateNode,_i&&"function"===typeof _i.onCommitFiberRoot)try{_i.onCommitFiberRoot(bi,n,void 0,64===(64&n.current.flags))}catch(x){}if(pu(e,Ui()),Js)throw Js=!1,e=Ys,Ys=null,e;return 0!==(8&Es)||Vi(),null}function Mu(){for(;null!==qs;){var e=qs.alternate;uu||null===su||(0!==(8&qs.flags)?et(qs,su)&&(uu=!0):13===qs.tag&&Is(e,qs)&&et(qs,su)&&(uu=!0));var t=qs.flags;0!==(256&t)&&ps(e,qs),0===(512&t)||$s||($s=!0,Gi(97,(function(){return Ou(),null}))),qs=qs.nextEffect}}function Ou(){if(90!==Xs){var e=97<Xs?97:Xs;return Xs=90,Hi(e,Lu)}return!1}function Ru(e,t){Zs.push(t,e),$s||($s=!0,Gi(97,(function(){return Ou(),null})))}function ju(e,t){eu.push(t,e),$s||($s=!0,Gi(97,(function(){return Ou(),null})))}function Lu(){if(null===Qs)return!1;var e=Qs;if(Qs=null,0!==(48&Es))throw Error(a(331));var t=Es;Es|=32;var n=eu;eu=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===o)throw Error(a(330));Fu(o,c)}}for(n=Zs,Zs=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===o)throw Error(a(330));Fu(o,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Es=t,Vi(),!0}function Nu(e,t,n){uo(e,t=cs(0,t=as(n,t),1)),t=cu(),null!==(e=fu(e,1))&&(Ht(e,1,t),pu(e,t))}function Fu(e,t){if(3===e.tag)Nu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Nu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ks||!Ks.has(r))){var i=ls(n,e=as(t,e),1);if(uo(n,i),i=cu(),null!==(n=fu(n,1)))Ht(n,1,i),pu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Ks||!Ks.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Wu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=cu(),e.pingedLanes|=e.suspendedLanes&n,Ps===e&&(Os&n)===n&&(4===Ls||3===Ls&&(62914560&Os)===Os&&500>Ui()-zs?_u(e,0):Us|=n),pu(e,t)}function Du(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Bi()?1:2:(0===ou&&(ou=Fs),0===(t=Bt(62914560&~ou))&&(t=4194304))),n=cu(),null!==(e=fu(e,t))&&(Ht(e,t,n),pu(e,n))}function Uu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Bu(e,t,n,r){return new Uu(e,t,n,r)}function zu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hu(e,t){var n=e.alternate;return null===n?((n=Bu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)zu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case C:return Vu(n.children,i,o,t);case N:s=8,i|=16;break;case I:s=8,i|=1;break;case x:return(e=Bu(12,n,t,8|i)).elementType=x,e.type=x,e.lanes=o,e;case P:return(e=Bu(13,n,t,i)).type=P,e.elementType=P,e.lanes=o,e;case M:return(e=Bu(19,n,t,i)).elementType=M,e.lanes=o,e;case F:return qu(n,i,o,t);case W:return(e=Bu(24,n,t,i)).elementType=W,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case T:s=9;break e;case E:s=11;break e;case O:s=14;break e;case R:s=16,r=null;break e;case j:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Bu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Vu(e,t,n,r){return(e=Bu(7,e,r,t)).lanes=n,e}function qu(e,t,n,r){return(e=Bu(23,e,r,t)).elementType=F,e.lanes=n,e}function Ju(e,t,n){return(e=Bu(6,e,null,t)).lanes=n,e}function Yu(e,t,n){return(t=Bu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ku(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function $u(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Qu(e,t,n,r){var i=t.current,o=cu(),s=lu(i);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(hi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(hi(c)){n=vi(n,c,u);break e}}n=u}else n=ci;return null===t.context?t.context=n:t.pendingContext=n,(t=so(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),uo(i,t),du(i,s,o),s}function Xu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Zu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ec(e,t){Zu(e,t),(e=e.alternate)&&Zu(e,t)}function tc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ku(e,t,null!=n&&!0===n.hydrate),t=Bu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,oo(t),e[Qr]=n.current,Er(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function nc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function rc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=Xu(a);s.call(e)}}Qu(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tc(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=Xu(a);u.call(e)}}mu((function(){Qu(t,a,e,i)}))}return Xu(a)}function ic(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nc(t))throw Error(a(200));return $u(e,t,null,n)}Vs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||di.current)ja=!0;else{if(0===(n&r)){switch(ja=!1,t.tag){case 3:Ga(t),Vo();break;case 5:Ro(t);break;case 1:hi(t.type)&&mi(t);break;case 4:Mo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ui(Ki,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Ka(e,t,n):(ui(Lo,1&Lo.current),null!==(t=ns(e,t,n))?t.sibling:null);ui(Lo,1&Lo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return ts(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ui(Lo,Lo.current),r)break;return null;case 23:case 24:return t.lanes=0,Da(e,t,n)}return ns(e,t,n)}ja=0!==(16384&e.flags)}else ja=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=pi(t,li.current),no(t,n),i=ia(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,hi(r)){var o=!0;mi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&ho(t,r,s,e),i.updater=yo,t.stateNode=i,i._reactInternals=t,wo(t,r,e,n),t=Ha(null,t,r,!0,o,n)}else t.tag=0,La(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"===typeof e)return zu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===O)return 14}return 2}(i),e=Yi(i,e),o){case 0:t=Ba(null,t,i,e,n);break e;case 1:t=za(null,t,i,e,n);break e;case 11:t=Na(null,t,i,e,n);break e;case 14:t=Fa(null,t,i,Yi(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ba(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,za(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(Ga(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ao(e,t),lo(t,r,null,n),(r=t.memoizedState.element)===i)Vo(),t=ns(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(Wo=Vr(t.stateNode.containerInfo.firstChild),Fo=t,o=Do=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],qo.push(o);for(n=Io(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else La(e,t,r,n),Vo();t=t.child}return t;case 5:return Ro(t),null===e&&zo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Br(r,i)?s=null:null!==o&&Br(r,o)&&(t.flags|=16),Ua(e,t),La(e,t,s,n),t.child;case 6:return null===e&&zo(t),null;case 13:return Ka(e,t,n);case 4:return Mo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Co(t,null,r,n):La(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Na(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return La(e,t,t.pendingProps,n),t.child;case 8:case 12:return La(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var u=t.type._context;if(ui(Ki,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=sr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!di.current){t=ns(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=so(-1,n&-n)).tag=2,uo(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),to(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}La(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,no(t,n),r=r(i=ro(i,o.unstable_observedBits)),t.flags|=1,La(e,t,r,n),t.child;case 14:return o=Yi(i=t.type,t.pendingProps),Fa(e,t,i,o=Yi(i.type,o),r,n);case 15:return Wa(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,hi(r)?(e=!0,mi(t)):e=!1,no(t,n),vo(t,r,i),wo(t,r,i,n),Ha(null,t,r,!0,e,n);case 19:return ts(e,t,n);case 23:case 24:return Da(e,t,n)}throw Error(a(156,t.tag))},tc.prototype.render=function(e){Qu(e,this._internalRoot,null,null)},tc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Qu(null,e,null,(function(){t[Qr]=null}))},tt=function(e){13===e.tag&&(du(e,4,cu()),ec(e,4))},nt=function(e){13===e.tag&&(du(e,67108864,cu()),ec(e,67108864))},rt=function(e){if(13===e.tag){var t=cu(),n=lu(e);du(e,n,t),ec(e,n)}},it=function(e,t){return t()},Ae=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ni(r);if(!i)throw Error(a(90));Q(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Re=vu,je=function(e,t,n,r,i){var o=Es;Es|=4;try{return Hi(98,e.bind(null,t,n,r,i))}finally{0===(Es=o)&&(Gs(),Vi())}},Le=function(){0===(49&Es)&&(function(){if(null!==tu){var e=tu;tu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,pu(e,Ui())}))}Vi()}(),Ou())},Ne=function(e,t){var n=Es;Es|=2;try{return e(t)}finally{0===(Es=n)&&(Gs(),Vi())}};var oc={Events:[ei,ti,ni,Me,Oe,Ou,{current:!1}]},ac={findFiberByHostInstance:Zr,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},sc={bundleType:ac.bundleType,version:ac.version,rendererPackageName:ac.rendererPackageName,rendererConfig:ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:ac.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{bi=uc.inject(sc),_i=uc}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oc,t.createPortal=ic,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Es;if(0!==(48&n))return e(t);Es|=1;try{if(e)return Hi(99,e.bind(null,t))}finally{Es=n,Vi()}},t.hydrate=function(e,t,n){if(!nc(t))throw Error(a(200));return rc(null,e,t,!0,n)},t.render=function(e,t,n){if(!nc(t))throw Error(a(200));return rc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nc(e))throw Error(a(40));return!!e._reactRootContainer&&(mu((function(){rc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Qr]=null}))})),!0)},t.unstable_batchedUpdates=vu,t.unstable_createPortal=function(e,t){return ic(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return rc(e,t,n,!1,r)},t.version="17.0.1"},function(e,t,n){"use strict";e.exports=n(27)},function(e,t,n){"use strict";var r,i,o,a;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,d=null,f=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(f,0))},i=function(e,t){d=setTimeout(e,t)},o=function(){clearTimeout(d)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,h=window.clearTimeout;if("undefined"!==typeof console){var y=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,v=null,m=-1,w=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,k=_.port2;_.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();b=e+w;try{v(!0,e)?k.postMessage(null):(g=!1,v=null)}catch(n){throw k.postMessage(null),n}}else g=!1},r=function(e){v=e,g||(g=!0,k.postMessage(null))},i=function(e,n){m=p((function(){e(t.unstable_now())}),n)},o=function(){h(m),m=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<x(i,t)))break e;e[r]=t,e[n]=i,n=r}}function C(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>x(a,n))void 0!==u&&0>x(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>x(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function x(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],T=[],E=1,P=null,M=3,O=!1,R=!1,j=!1;function L(e){for(var t=C(T);null!==t;){if(null===t.callback)I(T);else{if(!(t.startTime<=e))break;I(T),t.sortIndex=t.expirationTime,S(A,t)}t=C(T)}}function N(e){if(j=!1,L(e),!R)if(null!==C(A))R=!0,r(F);else{var t=C(T);null!==t&&i(N,t.startTime-e)}}function F(e,n){R=!1,j&&(j=!1,o()),O=!0;var r=M;try{for(L(n),P=C(A);null!==P&&(!(P.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=P.callback;if("function"===typeof a){P.callback=null,M=P.priorityLevel;var s=a(P.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?P.callback=s:P===C(A)&&I(A),L(n)}else I(A);P=C(A)}if(null!==P)var u=!0;else{var c=C(T);null!==c&&i(N,c.startTime-n),u=!1}return u}finally{P=null,M=r,O=!1}}var W=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||O||(R=!0,r(F))},t.unstable_getCurrentPriorityLevel=function(){return M},t.unstable_getFirstCallbackNode=function(){return C(A)},t.unstable_next=function(e){switch(M){case 1:case 2:case 3:var t=3;break;default:t=M}var n=M;M=t;try{return e()}finally{M=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=W,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=M;M=e;try{return t()}finally{M=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:E++,callback:n,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(e.sortIndex=a,S(T,e),null===C(A)&&e===C(T)&&(j?o():j=!0,i(N,a-s))):(e.sortIndex=u,S(A,e),R||O||(R=!0,r(F))),e},t.unstable_wrapCallback=function(e){var t=M;return function(){var n=M;M=t;try{return e.apply(this,arguments)}finally{M=n}}}},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(M){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),a=new T(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=I(a,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?h:f,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(M){return{type:"throw",arg:M}}}e.wrap=c;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",y={};function g(){}function v(){}function m(){}var w={};w[o]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(E([])));_&&_!==n&&r.call(_,o)&&(w=_);var k=m.prototype=g.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"===typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function I(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function E(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:t,done:!0}}return v.prototype=k.constructor=m,m.constructor=v,v.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},S(C.prototype),C.prototype[a]=function(){return this},e.AsyncIterator=C,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new C(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(k),u(k,s,"Generator"),k[o]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:E(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";var r=n(30);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},,,,function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),a=r[0],s=r[1],u=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,u=n-i;s<u;s+=a)o.push(l(e,s,s+a>u?u:s+a));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+e[t+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(a++,u/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*u-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=255&a,p+=h,a/=256,c-=8);e[n+p-h]|=128*y}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}]]);
//# sourceMappingURL=2.12184c32.chunk.js.map